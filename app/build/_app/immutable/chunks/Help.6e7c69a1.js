import{s as et,E as zt,F as Ot,G as At,H as Ut,w as we,e as xe,i as B,d,I as zl,x as Yt,y as En,p as be,f as k,g as y,h as E,L as Wt,Y as ml,u as fe,v as jt,T as kl,C as Ve,V as gl,o as yl,l as pe,a as R,m as _e,c as F,j as u,r as m,n as ye,R as Je,P as kt,K as Xt,t as Pe,z as Ne,A as ze,W as Te,k as Ht,S as ul,Q as Ol,O as zn,M as On}from"./scheduler.8ceb707f.js";import{S as tt,i as lt,a as H,t as L,g as Ge,c as Qe,h as In,j as xl,k as Al,f as Me,b as ne,d as re,m as oe,e as ie}from"./index.07e72a31.js";import{g as An}from"./globals.7f7f1b26.js";import{e as pt}from"./each.0e379b97.js";import{a as Be}from"./Toaster.svelte_svelte_type_style_lang.a1b53f72.js";import{F as Dn,M as Un,m as jn}from"./Messages.efa1ab6b.js";import"./dayjs.min.1e504c00.js";import{g as Fl}from"./navigation.4d72fedf.js";import{p as Pn}from"./stores.af736a4a.js";import{v as Rn,w as Fn,h as El,c as Il,g as Kt,n as Ul,j as Wn,u as ql,m as Sn,a as wl,y as Zn,S as xn,z as qn,A as jl,W as Cn,l as fl,o as Jn,s as Gn,x as Qn,i as al}from"./index.de68b371.js";import{i as Tn,r as Wl,j as as,k as Jl,v as cs,p as fs,s as Kn,l as Nl,a as us,m as Yn}from"./index.a303954b.js";import{i as Xn}from"./index.ba268a08.js";import{e as $n,s as ds,c as er,b as cl,C as hs,n as bl,q as tr,l as lr}from"./index.31423eb8.js";import{f as sr}from"./index.09416361.js";import{i as nr,p as rr,j as or,k as ir,l as ar}from"./index.435b937c.js";import{T as cr,S as fr,U as ur,q as dr}from"./ShareChatModal.e684fb29.js";import{r as hr,s as mr,t as gr,v as pr,w as _r}from"./index.c405526f.js";import{f as ms,s as vr}from"./index.e31818e9.js";import"./sha256.65a6c54a.js";import{T as Zt}from"./create.4fbceb05.js";import{D as Pl,M as sl}from"./Dropdown.268d4eaa.js";import{s as br,g as wr,u as kr,a as yr,M as Rl}from"./menu-trigger.87a134fd.js";import{f as Dl}from"./index.505b608a.js";import{S as Mn}from"./Switch.8a79adb4.js";import{t as Gl,s as Er}from"./index.e20bf255.js";import{A as Ir}from"./AddFilesPlaceholder.685275a7.js";import{S as Dr}from"./Selector.bea522a0.js";import{d as Sr}from"./index.e51049e7.js";import{g as pl}from"./spread.8a54911c.js";import{a as Vn,d as Cr}from"./updater.30cc5971.js";import{f as Tr}from"./FileSaver.min.898eb36f.js";import{b as Mr}from"./index.5b5097e5.js";import"./paths.00dc7eec.js";import{M as Vr}from"./MenuLines.01456c47.js";import"./index.c4ca6160.js";import{M as Hn}from"./Modal.9e048b4e.js";import{A as Hr}from"./AdvancedParams.94f6fb31.js";import{V as Br}from"./Valves.0441dd3c.js";import{C as Lr}from"./ConfirmDialog.beed6fd0.js";const Nr=s=>({subIds:s&1}),gs=s=>({subIds:s[0]});function zr(s){let e;const t=s[6].default,l=zt(t,s,s[5],gs);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,[r]){l&&l.p&&(!e||r&33)&&Ot(l,t,n,n[5],e?Ut(t,n[5],r,Nr):At(n[5]),gs)},i(n){e||(H(l,n),e=!0)},o(n){L(l,n),e=!1},d(n){l&&l.d(n)}}}function Or(s,e,t){let l,{$$slots:n={},$$scope:r}=e,{disabled:o=void 0}=e,{open:i=void 0}=e,{onOpenChange:a=void 0}=e;const{updateOption:f,ids:c,states:{subOpen:h}}=br({disabled:o,onOpenChange:({next:g})=>(i!==g&&(a==null||a(g),t(2,i=g)),g)}),v=Sr([c.menu,c.trigger],([g,b])=>({menu:g,trigger:b}));return we(s,v,g=>t(0,l=g)),s.$$set=g=>{"disabled"in g&&t(3,o=g.disabled),"open"in g&&t(2,i=g.open),"onOpenChange"in g&&t(4,a=g.onOpenChange),"$$scope"in g&&t(5,r=g.$$scope)},s.$$.update=()=>{s.$$.dirty&4&&i!==void 0&&h.set(i),s.$$.dirty&8&&f("disabled",o)},[l,v,i,o,a,r,n]}class Ar extends tt{constructor(e){super(),lt(this,e,Or,zr,et,{disabled:3,open:2,onOpenChange:4})}}const Ur=s=>({builder:s[0]&256}),ps=s=>({builder:s[8]}),jr=s=>({builder:s[0]&256}),_s=s=>({builder:s[8]}),Pr=s=>({builder:s[0]&256}),vs=s=>({builder:s[8]}),Rr=s=>({builder:s[0]&256}),bs=s=>({builder:s[8]}),Fr=s=>({builder:s[0]&256}),ws=s=>({builder:s[8]}),Wr=s=>({builder:s[0]&256}),ks=s=>({builder:s[8]});function Zr(s){let e,t,l,n;const r=s[28].default,o=zt(r,s,s[27],ps);let i=[s[8],s[13]],a={};for(let f=0;f<i.length;f+=1)a=Yt(a,i[f]);return{c(){e=k("div"),o&&o.c(),this.h()},l(f){e=y(f,"DIV",{});var c=E(e);o&&o.l(c),c.forEach(d),this.h()},h(){Wt(e,a)},m(f,c){B(f,e,c),o&&o.m(e,null),s[33](e),t=!0,l||(n=[ml(s[8].action(e)),fe(e,"m-focusout",s[12]),fe(e,"m-keydown",s[12]),fe(e,"m-pointermove",s[12])],l=!0)},p(f,c){o&&o.p&&(!t||c[0]&134217984)&&Ot(o,r,f,f[27],t?Ut(r,f[27],c,Ur):At(f[27]),ps),Wt(e,a=pl(i,[c[0]&256&&f[8],c[0]&8192&&f[13]]))},i(f){t||(H(o,f),t=!0)},o(f){L(o,f),t=!1},d(f){f&&d(e),o&&o.d(f),s[33](null),l=!1,jt(n)}}}function xr(s){let e,t,l,n,r;const o=s[28].default,i=zt(o,s,s[27],_s);let a=[s[8],s[13]],f={};for(let c=0;c<a.length;c+=1)f=Yt(f,a[c]);return{c(){e=k("div"),i&&i.c(),this.h()},l(c){e=y(c,"DIV",{});var h=E(e);i&&i.l(h),h.forEach(d),this.h()},h(){Wt(e,f)},m(c,h){B(c,e,h),i&&i.m(e,null),s[32](e),l=!0,n||(r=[ml(s[8].action(e)),fe(e,"m-focusout",s[12]),fe(e,"m-keydown",s[12]),fe(e,"m-pointermove",s[12])],n=!0)},p(c,h){s=c,i&&i.p&&(!l||h[0]&134217984)&&Ot(i,o,s,s[27],l?Ut(o,s[27],h,jr):At(s[27]),_s),Wt(e,f=pl(a,[h[0]&256&&s[8],h[0]&8192&&s[13]]))},i(c){l||(H(i,c),t&&t.end(1),l=!0)},o(c){L(i,c),c&&(t=In(e,s[5],s[6])),l=!1},d(c){c&&d(e),i&&i.d(c),s[32](null),c&&t&&t.end(),n=!1,jt(r)}}}function qr(s){let e,t,l,n,r;const o=s[28].default,i=zt(o,s,s[27],vs);let a=[s[8],s[13]],f={};for(let c=0;c<a.length;c+=1)f=Yt(f,a[c]);return{c(){e=k("div"),i&&i.c(),this.h()},l(c){e=y(c,"DIV",{});var h=E(e);i&&i.l(h),h.forEach(d),this.h()},h(){Wt(e,f)},m(c,h){B(c,e,h),i&&i.m(e,null),s[31](e),l=!0,n||(r=[ml(s[8].action(e)),fe(e,"m-focusout",s[12]),fe(e,"m-keydown",s[12]),fe(e,"m-pointermove",s[12])],n=!0)},p(c,h){s=c,i&&i.p&&(!l||h[0]&134217984)&&Ot(i,o,s,s[27],l?Ut(o,s[27],h,Pr):At(s[27]),vs),Wt(e,f=pl(a,[h[0]&256&&s[8],h[0]&8192&&s[13]]))},i(c){l||(H(i,c),c&&(t||kl(()=>{t=xl(e,s[3],s[4]),t.start()})),l=!0)},o(c){L(i,c),l=!1},d(c){c&&d(e),i&&i.d(c),s[31](null),n=!1,jt(r)}}}function Jr(s){let e,t,l,n,r,o;const i=s[28].default,a=zt(i,s,s[27],bs);let f=[s[8],s[13]],c={};for(let h=0;h<f.length;h+=1)c=Yt(c,f[h]);return{c(){e=k("div"),a&&a.c(),this.h()},l(h){e=y(h,"DIV",{});var v=E(e);a&&a.l(v),v.forEach(d),this.h()},h(){Wt(e,c)},m(h,v){B(h,e,v),a&&a.m(e,null),s[30](e),n=!0,r||(o=[ml(s[8].action(e)),fe(e,"m-focusout",s[12]),fe(e,"m-keydown",s[12]),fe(e,"m-pointermove",s[12])],r=!0)},p(h,v){s=h,a&&a.p&&(!n||v[0]&134217984)&&Ot(a,i,s,s[27],n?Ut(i,s[27],v,Rr):At(s[27]),bs),Wt(e,c=pl(f,[v[0]&256&&s[8],v[0]&8192&&s[13]]))},i(h){n||(H(a,h),h&&kl(()=>{n&&(l&&l.end(1),t=xl(e,s[3],s[4]),t.start())}),n=!0)},o(h){L(a,h),t&&t.invalidate(),h&&(l=In(e,s[5],s[6])),n=!1},d(h){h&&d(e),a&&a.d(h),s[30](null),h&&l&&l.end(),r=!1,jt(o)}}}function Gr(s){let e,t,l,n,r;const o=s[28].default,i=zt(o,s,s[27],ws);let a=[s[8],s[13]],f={};for(let c=0;c<a.length;c+=1)f=Yt(f,a[c]);return{c(){e=k("div"),i&&i.c(),this.h()},l(c){e=y(c,"DIV",{});var h=E(e);i&&i.l(h),h.forEach(d),this.h()},h(){Wt(e,f)},m(c,h){B(c,e,h),i&&i.m(e,null),s[29](e),l=!0,n||(r=[ml(s[8].action(e)),fe(e,"m-focusout",s[12]),fe(e,"m-keydown",s[12]),fe(e,"m-pointermove",s[12])],n=!0)},p(c,h){s=c,i&&i.p&&(!l||h[0]&134217984)&&Ot(i,o,s,s[27],l?Ut(o,s[27],h,Fr):At(s[27]),ws),Wt(e,f=pl(a,[h[0]&256&&s[8],h[0]&8192&&s[13]]))},i(c){l||(H(i,c),c&&kl(()=>{l&&(t||(t=Al(e,s[1],s[2],!0)),t.run(1))}),l=!0)},o(c){L(i,c),c&&(t||(t=Al(e,s[1],s[2],!1)),t.run(0)),l=!1},d(c){c&&d(e),i&&i.d(c),s[29](null),c&&t&&t.end(),n=!1,jt(r)}}}function Qr(s){let e;const t=s[28].default,l=zt(t,s,s[27],ks);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r[0]&134217984)&&Ot(l,t,n,n[27],e?Ut(t,n[27],r,Wr):At(n[27]),ks)},i(n){e||(H(l,n),e=!0)},o(n){L(l,n),e=!1},d(n){l&&l.d(n)}}}function Kr(s){let e,t,l,n;const r=[Qr,Gr,Jr,qr,xr,Zr],o=[];function i(a,f){return a[7]&&a[9]?0:a[1]&&a[9]?1:a[3]&&a[5]&&a[9]?2:a[3]&&a[9]?3:a[5]&&a[9]?4:a[9]?5:-1}return~(e=i(s))&&(t=o[e]=r[e](s)),{c(){t&&t.c(),l=xe()},l(a){t&&t.l(a),l=xe()},m(a,f){~e&&o[e].m(a,f),B(a,l,f),n=!0},p(a,f){let c=e;e=i(a),e===c?~e&&o[e].p(a,f):(t&&(Ge(),L(o[c],1,1,()=>{o[c]=null}),Qe()),~e?(t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),H(t,1),t.m(l.parentNode,l)):t=null)},i(a){n||(H(t),n=!0)},o(a){L(t),n=!1},d(a){a&&d(l),~e&&o[e].d(a)}}}function Yr(s,e,t){let l;const n=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let r=zl(e,n),o,i,{$$slots:a={},$$scope:f}=e,{transition:c=void 0}=e,{transitionConfig:h=void 0}=e,{inTransition:v=void 0}=e,{inTransitionConfig:g=void 0}=e,{outTransition:b=void 0}=e,{outTransitionConfig:_=void 0}=e,{asChild:p=!1}=e,{id:w=void 0}=e,{side:I="right"}=e,{align:D="start"}=e,{sideOffset:V=0}=e,{alignOffset:M=0}=e,{collisionPadding:N=8}=e,{avoidCollisions:Z=!0}=e,{collisionBoundary:O=void 0}=e,{sameWidth:G=!1}=e,{fitViewport:A=!1}=e,{strategy:j="absolute"}=e,{overlap:q=!1}=e,{el:J=void 0}=e;const{elements:{subMenu:x},states:{subOpen:W},ids:U,getAttrs:Q}=wr();we(s,x,C=>t(26,o=C)),we(s,W,C=>t(9,i=C));const Y=Vn(),$=Q("sub-content");function te(C){be[C?"unshift":"push"](()=>{J=C,t(0,J)})}function ue(C){be[C?"unshift":"push"](()=>{J=C,t(0,J)})}function De(C){be[C?"unshift":"push"](()=>{J=C,t(0,J)})}function Ie(C){be[C?"unshift":"push"](()=>{J=C,t(0,J)})}function ae(C){be[C?"unshift":"push"](()=>{J=C,t(0,J)})}return s.$$set=C=>{e=Yt(Yt({},e),En(C)),t(13,r=zl(e,n)),"transition"in C&&t(1,c=C.transition),"transitionConfig"in C&&t(2,h=C.transitionConfig),"inTransition"in C&&t(3,v=C.inTransition),"inTransitionConfig"in C&&t(4,g=C.inTransitionConfig),"outTransition"in C&&t(5,b=C.outTransition),"outTransitionConfig"in C&&t(6,_=C.outTransitionConfig),"asChild"in C&&t(7,p=C.asChild),"id"in C&&t(14,w=C.id),"side"in C&&t(15,I=C.side),"align"in C&&t(16,D=C.align),"sideOffset"in C&&t(17,V=C.sideOffset),"alignOffset"in C&&t(18,M=C.alignOffset),"collisionPadding"in C&&t(19,N=C.collisionPadding),"avoidCollisions"in C&&t(20,Z=C.avoidCollisions),"collisionBoundary"in C&&t(21,O=C.collisionBoundary),"sameWidth"in C&&t(22,G=C.sameWidth),"fitViewport"in C&&t(23,A=C.fitViewport),"strategy"in C&&t(24,j=C.strategy),"overlap"in C&&t(25,q=C.overlap),"el"in C&&t(0,J=C.el),"$$scope"in C&&t(27,f=C.$$scope)},s.$$.update=()=>{s.$$.dirty[0]&16384&&w&&U.menu.set(w),s.$$.dirty[0]&67108864&&t(8,l=o),s.$$.dirty[0]&256&&Object.assign(l,$),s.$$.dirty[0]&67076096&&kr({side:I,align:D,sideOffset:V,alignOffset:M,collisionPadding:N,avoidCollisions:Z,collisionBoundary:O,sameWidth:G,fitViewport:A,strategy:j,overlap:q})},[J,c,h,v,g,b,_,p,l,i,x,W,Y,r,w,I,D,V,M,N,Z,O,G,A,j,q,o,f,a,te,ue,De,Ie,ae]}class Xr extends tt{constructor(e){super(),lt(this,e,Yr,Kr,et,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const $r=s=>({builder:s&4}),ys=s=>({builder:s[2]}),eo=s=>({builder:s&4}),Es=s=>({builder:s[2]});function to(s){let e,t,l,n;const r=s[13].default,o=zt(r,s,s[12],ys);let i=[s[2],s[6]],a={};for(let f=0;f<i.length;f+=1)a=Yt(a,i[f]);return{c(){e=k("div"),o&&o.c(),this.h()},l(f){e=y(f,"DIV",{});var c=E(e);o&&o.l(c),c.forEach(d),this.h()},h(){Wt(e,a)},m(f,c){B(f,e,c),o&&o.m(e,null),s[14](e),t=!0,l||(n=[ml(s[2].action(e)),fe(e,"m-click",s[5]),fe(e,"m-focusin",s[5]),fe(e,"m-focusout",s[5]),fe(e,"m-keydown",s[5]),fe(e,"m-pointerleave",s[5]),fe(e,"m-pointermove",s[5])],l=!0)},p(f,c){o&&o.p&&(!t||c&4100)&&Ot(o,r,f,f[12],t?Ut(r,f[12],c,$r):At(f[12]),ys),Wt(e,a=pl(i,[c&4&&f[2],c&64&&f[6]]))},i(f){t||(H(o,f),t=!0)},o(f){L(o,f),t=!1},d(f){f&&d(e),o&&o.d(f),s[14](null),l=!1,jt(n)}}}function lo(s){let e;const t=s[13].default,l=zt(t,s,s[12],Es);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&4100)&&Ot(l,t,n,n[12],e?Ut(t,n[12],r,eo):At(n[12]),Es)},i(n){e||(H(l,n),e=!0)},o(n){L(l,n),e=!1},d(n){l&&l.d(n)}}}function so(s){let e,t,l,n;const r=[lo,to],o=[];function i(a,f){return a[1]?0:1}return e=i(s),t=o[e]=r[e](s),{c(){t.c(),l=xe()},l(a){t.l(a),l=xe()},m(a,f){o[e].m(a,f),B(a,l,f),n=!0},p(a,[f]){let c=e;e=i(a),e===c?o[e].p(a,f):(Ge(),L(o[c],1,1,()=>{o[c]=null}),Qe(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),H(t,1),t.m(l.parentNode,l))},i(a){n||(H(t),n=!0)},o(a){L(t),n=!1},d(a){a&&d(l),o[e].d(a)}}}function no(s,e,t){let l,n;const r=["disabled","asChild","id","el"];let o=zl(e,r),i,a,{$$slots:f={},$$scope:c}=e,{disabled:h=!1}=e,{asChild:v=!1}=e,{id:g=void 0}=e,{el:b=void 0}=e;const{elements:{subTrigger:_},ids:p,getAttrs:w,options:I}=yr();we(s,_,N=>t(11,a=N));const{disabled:D}=I;we(s,D,N=>t(10,i=N));const V=Vn();function M(N){be[N?"unshift":"push"](()=>{b=N,t(0,b)})}return s.$$set=N=>{e=Yt(Yt({},e),En(N)),t(6,o=zl(e,r)),"disabled"in N&&t(7,h=N.disabled),"asChild"in N&&t(1,v=N.asChild),"id"in N&&t(8,g=N.id),"el"in N&&t(0,b=N.el),"$$scope"in N&&t(12,c=N.$$scope)},s.$$.update=()=>{s.$$.dirty&256&&g&&p.trigger.set(g),s.$$.dirty&2048&&t(2,l=a),s.$$.dirty&1152&&t(9,n={...w("sub-trigger"),...Cr(h||i)}),s.$$.dirty&516&&Object.assign(l,n)},[b,v,l,_,D,V,o,h,g,n,i,a,c,f,M]}class ro extends tt{constructor(e){super(),lt(this,e,no,so,et,{disabled:7,asChild:1,id:8,el:0})}}function oo(s){let e,t,l,n,r,o,i;return a(),{feed:f,reset:a};function a(){e=!0,t="",l=0,n=-1,r=void 0,o=void 0,i=""}function f(h){t=t?t+h:h,e&&io(t)&&(t=t.slice(Bn.length)),e=!1;const v=t.length;let g=0,b=!1;for(;g<v;){b&&(t[g]===`
`&&++g,b=!1);let _=-1,p=n,w;for(let I=l;_<0&&I<v;++I)w=t[I],w===":"&&p<0?p=I-g:w==="\r"?(b=!0,_=I-g):w===`
`&&(_=I-g);if(_<0){l=v-g,n=p;break}else l=0,n=-1;c(t,g,p,_),g+=_+1}g===v?t="":g>0&&(t=t.slice(g))}function c(h,v,g,b){if(b===0){i.length>0&&(s({type:"event",id:r,event:o||void 0,data:i.slice(0,-1)}),i="",r=void 0),o=void 0;return}const _=g<0,p=h.slice(v,v+(_?b:g));let w=0;_?w=b:h[v+g+1]===" "?w=g+2:w=g+1;const I=v+w,D=b-w,V=h.slice(I,I+D).toString();if(p==="data")i+=V?"".concat(V,`
`):`
`;else if(p==="event")o=V;else if(p==="id"&&!V.includes("\0"))r=V;else if(p==="retry"){const M=parseInt(V,10);Number.isNaN(M)||s({type:"reconnect-interval",value:M})}}}const Bn=[239,187,191];function io(s){return Bn.every((e,t)=>s.charCodeAt(t)===e)}class ao extends TransformStream{constructor(){let e;super({start(t){e=oo(l=>{l.type==="event"&&t.enqueue(l)})},transform(t){e.feed(t)}})}}async function co(s,e){const t=s.pipeThrough(new TextDecoderStream).pipeThrough(new ao).getReader();let l=fo(t);return e&&(l=uo(l)),l}async function*fo(s){var e,t,l;for(;;){const{value:n,done:r}=await s.read();if(r){yield{done:!0,value:""};break}if(!n)continue;const o=n.data;if(o.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const i=JSON.parse(o);if(console.log(i),i.error){yield{done:!0,value:"",error:i.error};break}if(i.citations){yield{done:!1,value:"",citations:i.citations};continue}yield{done:!1,value:((l=(t=(e=i.choices)==null?void 0:e[0])==null?void 0:t.delta)==null?void 0:l.content)??"",usage:i.usage}}catch(i){console.error("Error extracting delta from SSE event:",i)}}}async function*uo(s){for await(const e of s){if(e.done){yield e;return}if(e.citations){yield e;continue}let t=e.value;if(t.length<5){yield{done:!1,value:t};continue}for(;t!="";){const l=Math.min(Math.floor(Math.random()*3)+1,t.length);yield{done:!1,value:t.slice(0,l)},(document==null?void 0:document.visibilityState)!=="hidden"&&await ho(5),t=t.slice(l)}}}const ho=s=>new Promise(e=>setTimeout(e,s));function Is(s){let e,t=s[2]&&Ds(s);return{c(){t&&t.c(),e=xe()},l(l){t&&t.l(l),e=xe()},m(l,n){t&&t.m(l,n),B(l,e,n)},p(l,n){l[2]?t?(t.p(l,n),n&4&&H(t,1)):(t=Ds(l),t.c(),H(t,1),t.m(e.parentNode,e)):t&&(Ge(),L(t,1,1,()=>{t=null}),Qe())},d(l){l&&d(e),t&&t.d(l)}}}function Ds(s){let e,t,l,n,r=s[1].type+"",o,i,a,f,c,h=s[1].content+"",v,g,b,_,p,w,I=s[1].url&&Ss(),D=s[1].url&&Cs(),V=s[1].dismissible&&Ts(s);return{c(){e=k("div"),t=k("div"),l=k("div"),n=k("div"),o=pe(r),a=R(),I&&I.c(),f=R(),c=k("div"),v=pe(h),g=R(),D&&D.c(),b=R(),_=k("div"),V&&V.c(),this.h()},l(M){e=y(M,"DIV",{class:!0});var N=E(e);t=y(N,"DIV",{class:!0});var Z=E(t);l=y(Z,"DIV",{class:!0});var O=E(l);n=y(O,"DIV",{class:!0});var G=E(n);o=_e(G,r),G.forEach(d),a=F(O),I&&I.l(O),O.forEach(d),f=F(Z),c=y(Z,"DIV",{class:!0});var A=E(c);v=_e(A,h),A.forEach(d),Z.forEach(d),g=F(N),D&&D.l(N),b=F(N),_=y(N,"DIV",{class:!0});var j=E(_);V&&V.l(j),j.forEach(d),N.forEach(d),this.h()},h(){u(n,"class",i="text-xs font-bold "+(s[3][s[1].type]??s[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"),u(l,"class","flex justify-between self-start"),u(c,"class","flex-1 text-xs text-gray-700 dark:text-white"),u(t,"class","flex flex-col md:flex-row md:items-center flex-1 text-sm w-fit gap-1.5"),u(_,"class","flex self-start"),u(e,"class","top-0 left-0 right-0 p-2 mx-4 px-3 flex justify-center items-center relative rounded-xl border border-gray-50 dark:border-gray-850 text-gray-800 dark:text-gary-100 bg-white dark:bg-gray-900 backdrop-blur-xl z-30")},m(M,N){B(M,e,N),m(e,t),m(t,l),m(l,n),m(n,o),m(l,a),I&&I.m(l,null),m(t,f),m(t,c),m(c,v),m(e,g),D&&D.m(e,null),m(e,b),m(e,_),V&&V.m(_,null),w=!0},p(M,N){(!w||N&2)&&r!==(r=M[1].type+"")&&ye(o,r),(!w||N&2&&i!==(i="text-xs font-bold "+(M[3][M[1].type]??M[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"))&&u(n,"class",i),M[1].url?I||(I=Ss(),I.c(),I.m(l,null)):I&&(I.d(1),I=null),(!w||N&2)&&h!==(h=M[1].content+"")&&ye(v,h),M[1].url?D||(D=Cs(),D.c(),D.m(e,b)):D&&(D.d(1),D=null),M[1].dismissible?V?V.p(M,N):(V=Ts(M),V.c(),V.m(_,null)):V&&(V.d(1),V=null)},i(M){w||(M&&kl(()=>{w&&(p||(p=Al(e,ms,{delay:100,duration:300},!0)),p.run(1))}),w=!0)},o(M){M&&(p||(p=Al(e,ms,{delay:100,duration:300},!1)),p.run(0)),w=!1},d(M){M&&d(e),I&&I.d(),D&&D.d(),V&&V.d(),M&&p&&p.end()}}}function Ss(s){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/assets/files/whitepaper.pdf" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=y(l,"DIV",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-o2pz5m"&&(e.innerHTML=t),this.h()},h(){u(e,"class","flex md:hidden group w-fit md:items-center")},m(l,n){B(l,e,n)},d(l){l&&d(e)}}}function Cs(s){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=y(l,"DIV",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-1wr7se3"&&(e.innerHTML=t),this.h()},h(){u(e,"class","hidden md:flex group w-fit md:items-center")},m(l,n){B(l,e,n)},d(l){l&&d(e)}}}function Ts(s){let e,t="×",l,n;return{c(){e=k("button"),e.textContent=t,this.h()},l(r){e=y(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-o8kh4p"&&(e.textContent=t),this.h()},h(){u(e,"class","-mt-1 -mb-2 -translate-y-[1px] ml-1.5 mr-1 text-gray-400 dark:hover:text-white")},m(r,o){B(r,e,o),l||(n=fe(e,"click",s[5]),l=!0)},p:Ve,d(r){r&&d(e),l=!1,n()}}}function mo(s){let e,t=!s[0]&&Is(s);return{c(){t&&t.c(),e=xe()},l(l){t&&t.l(l),e=xe()},m(l,n){t&&t.m(l,n),B(l,e,n)},p(l,[n]){l[0]?t&&(t.d(1),t=null):t?t.p(l,n):(t=Is(l),t.c(),t.m(e.parentNode,e))},i:Ve,o:Ve,d(l){l&&d(e),t&&t.d(l)}}}function go(s,e,t){const l=gl();let{banner:n={id:"",type:"info",title:"",content:"",url:"",dismissable:!0,timestamp:Math.floor(Date.now()/1e3)}}=e,{dismissed:r=!1}=e,o=!1;const i={info:"bg-blue-500/20 text-blue-700 dark:text-blue-200 ",success:"bg-green-500/20 text-green-700 dark:text-green-200",warning:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200",error:"bg-red-500/20 text-red-700 dark:text-red-200"},a=c=>{t(0,r=!0),l("dismiss",c)};yl(()=>{t(2,o=!0)});const f=()=>{a(n.id)};return s.$$set=c=>{"banner"in c&&t(1,n=c.banner),"dismissed"in c&&t(0,r=c.dismissed)},[r,n,o,i,a,f]}class po extends tt{constructor(e){super(),lt(this,e,go,mo,et,{banner:1,dismissed:0})}}function Ms(s,e,t){const l=s.slice();return l[12]=e[t],l[14]=t,l}function Vs(s){let e,t,l,n='<div class="text-lg font-semibold mt-2">/</div>',r,o,i,a,f,c,h='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',v,g,b=s[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",_,p=pt(s[1]),w=[];for(let I=0;I<p.length;I+=1)w[I]=Hs(Ms(s,p,I));return{c(){e=k("div"),t=k("div"),l=k("div"),l.innerHTML=n,r=R(),o=k("div"),i=k("div");for(let I=0;I<w.length;I+=1)w[I].c();a=R(),f=k("div"),c=k("div"),c.innerHTML=h,v=R(),g=k("div"),_=pe(b),this.h()},l(I){e=y(I,"DIV",{class:!0});var D=E(e);t=y(D,"DIV",{class:!0});var V=E(t);l=y(V,"DIV",{class:!0,"data-svelte-h":!0}),Je(l)!=="svelte-17yak1f"&&(l.innerHTML=n),r=F(V),o=y(V,"DIV",{class:!0});var M=E(o);i=y(M,"DIV",{class:!0});var N=E(i);for(let G=0;G<w.length;G+=1)w[G].l(N);N.forEach(d),a=F(M),f=y(M,"DIV",{class:!0});var Z=E(f);c=y(Z,"DIV",{"data-svelte-h":!0}),Je(c)!=="svelte-cdi12d"&&(c.innerHTML=h),v=F(Z),g=y(Z,"DIV",{class:!0});var O=E(g);_=_e(O,b),O.forEach(d),Z.forEach(d),M.forEach(d),V.forEach(d),D.forEach(d),this.h()},h(){u(l,"class","bg-gray-50 dark:bg-gray-850 w-10 rounded-l-lg text-center"),u(i,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),u(g,"class","line-clamp-1"),u(f,"class","px-2 pb-1 text-xs text-gray-600 dark:text-gray-100 bg-white dark:bg-gray-900 rounded-br-xl flex items-center space-x-1"),u(o,"class","max-h-60 flex flex-col w-full rounded-r-lg bg-white dark:bg-gray-900 dark:text-gray-100"),u(t,"class","flex w-full dark:border dark:border-gray-850 rounded-lg"),u(e,"class","pl-1 pr-12 mb-3 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(I,D){B(I,e,D),m(e,t),m(t,l),m(t,r),m(t,o),m(o,i);for(let V=0;V<w.length;V+=1)w[V]&&w[V].m(i,null);m(o,a),m(o,f),m(f,c),m(f,v),m(f,g),m(g,_)},p(I,D){if(D&19){p=pt(I[1]);let V;for(V=0;V<p.length;V+=1){const M=Ms(I,p,V);w[V]?w[V].p(M,D):(w[V]=Hs(M),w[V].c(),w[V].m(i,null))}for(;V<w.length;V+=1)w[V].d(1);w.length=p.length}D&4&&b!==(b=I[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&ye(_,b)},d(I){I&&d(e),Xt(w,I)}}}function Hs(s){let e,t,l=s[12].command+"",n,r,o,i=s[12].title+"",a,f,c,h,v;function g(){return s[10](s[12])}function b(){return s[11](s[14])}return{c(){e=k("button"),t=k("div"),n=pe(l),r=R(),o=k("div"),a=pe(i),f=R(),this.h()},l(_){e=y(_,"BUTTON",{class:!0,type:!0});var p=E(e);t=y(p,"DIV",{class:!0});var w=E(t);n=_e(w,l),w.forEach(d),r=F(p),o=y(p,"DIV",{class:!0});var I=E(o);a=_e(I,i),I.forEach(d),f=F(p),p.forEach(d),this.h()},h(){u(t,"class","font-medium text-black dark:text-gray-100"),u(o,"class","text-xs text-gray-600 dark:text-gray-100"),u(e,"class",c="px-3 py-1.5 rounded-xl w-full text-left "+(s[14]===s[0]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),u(e,"type","button")},m(_,p){B(_,e,p),m(e,t),m(t,n),m(e,r),m(e,o),m(o,a),m(e,f),h||(v=[fe(e,"click",g),fe(e,"mousemove",b),fe(e,"focus",vo)],h=!0)},p(_,p){s=_,p&2&&l!==(l=s[12].command+"")&&ye(n,l),p&2&&i!==(i=s[12].title+"")&&ye(a,i),p&1&&c!==(c="px-3 py-1.5 rounded-xl w-full text-left "+(s[14]===s[0]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&u(e,"class",c)},d(_){_&&d(e),h=!1,jt(v)}}}function _o(s){let e,t=s[1].length>0&&Vs(s);return{c(){t&&t.c(),e=xe()},l(l){t&&t.l(l),e=xe()},m(l,n){t&&t.m(l,n),B(l,e,n)},p(l,[n]){l[1].length>0?t?t.p(l,n):(t=Vs(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ve,o:Ve,d(l){l&&d(e),t&&t.d(l)}}}const vo=()=>{};function bo(s,e,t){let l,n;we(s,Rn,_=>t(9,n=_));const r=kt("i18n");we(s,r,_=>t(2,l=_));let{files:o}=e,{prompt:i=""}=e,a=0,f=[];const c=()=>{t(0,a=Math.max(0,a-1))},h=()=>{t(0,a=Math.min(a+1,f.length-1))},v=async _=>{let p=_.content;if(_.content.includes("{{CLIPBOARD}}")){const D=await navigator.clipboard.readText().catch(N=>(Be.error(l.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));console.log(D);const V=await navigator.clipboard.read();let M=null;for(const N of V)for(const Z of N.types)if(Z.startsWith("image/")){const O=await N.getType(Z);M=URL.createObjectURL(O),console.log(`Image URL (${Z}): ${M}`)}M&&t(6,o=[...o,{type:"image",url:M}]),p=_.content.replaceAll("{{CLIPBOARD}}",D)}t(5,i=p);const w=document.getElementById("chat-textarea");await Pe(),w.style.height="",w.style.height=Math.min(w.scrollHeight,200)+"px",w==null||w.focus(),await Pe();const I=Tn(i);if(I.length>0){const D=I.at(0);w.setSelectionRange(D==null?void 0:D.startIndex,D.endIndex+1)}},g=_=>{v(_)},b=_=>{t(0,a=_)};return s.$$set=_=>{"files"in _&&t(6,o=_.files),"prompt"in _&&t(5,i=_.prompt)},s.$$.update=()=>{s.$$.dirty&544&&t(1,f=n.filter(_=>_.command.toLowerCase().includes(i.toLowerCase())).sort((_,p)=>_.title.localeCompare(p.title))),s.$$.dirty&32&&i&&t(0,a=0)},[a,f,l,r,v,i,o,c,h,n,g,b]}class wo extends tt{constructor(e){super(),lt(this,e,bo,_o,et,{files:6,prompt:5,selectUp:7,selectDown:8})}get selectUp(){return this.$$.ctx[7]}get selectDown(){return this.$$.ctx[8]}}function Bs(s,e,t){const l=s.slice();return l[20]=e[t],l[22]=t,l}function Ls(s){let e,t,l,n='<div class="text-lg font-semibold mt-2">#</div>',r,o,i,a,f,c,h=pt(s[3]),v=[];for(let p=0;p<h.length;p+=1)v[p]=Ns(Bs(s,h,p));function g(p,w){var I,D;if(w&1&&(f=null),w&1&&(c=null),f==null&&(f=!!p[0].split(" ").some(So)),f)return Io;if(c==null&&(c=!!((D=(I=p[0].split(" "))==null?void 0:I.at(0))!=null&&D.substring(1).startsWith("http"))),c)return Eo}let b=g(s,-1),_=b&&b(s);return{c(){e=k("div"),t=k("div"),l=k("div"),l.innerHTML=n,r=R(),o=k("div"),i=k("div");for(let p=0;p<v.length;p+=1)v[p].c();a=R(),_&&_.c(),this.h()},l(p){e=y(p,"DIV",{class:!0});var w=E(e);t=y(w,"DIV",{class:!0});var I=E(t);l=y(I,"DIV",{class:!0,"data-svelte-h":!0}),Je(l)!=="svelte-1bz58rh"&&(l.innerHTML=n),r=F(I),o=y(I,"DIV",{class:!0});var D=E(o);i=y(D,"DIV",{class:!0});var V=E(i);for(let M=0;M<v.length;M+=1)v[M].l(V);a=F(V),_&&_.l(V),V.forEach(d),D.forEach(d),I.forEach(d),w.forEach(d),this.h()},h(){u(l,"class","bg-gray-50 dark:bg-gray-850 w-10 rounded-l-lg text-center"),u(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5 scrollbar-hidden"),u(o,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white dark:bg-gray-900 dark:text-gray-100"),u(t,"class","flex w-full dark:border dark:border-gray-850 rounded-lg"),u(e,"class","pl-1 pr-12 mb-3 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(p,w){B(p,e,w),m(e,t),m(t,l),m(t,r),m(t,o),m(o,i);for(let I=0;I<v.length;I+=1)v[I]&&v[I].m(i,null);m(i,a),_&&_.m(i,null)},p(p,w){if(w&46){h=pt(p[3]);let I;for(I=0;I<h.length;I+=1){const D=Bs(p,h,I);v[I]?v[I].p(D,w):(v[I]=Ns(D),v[I].c(),v[I].m(i,a))}for(;I<v.length;I+=1)v[I].d(1);v.length=h.length}b===(b=g(p,w))&&_?_.p(p,w):(_&&_.d(1),_=b&&b(p),_&&(_.c(),_.m(i,null)))},d(p){p&&d(e),Xt(v,p),_&&_.d()}}}function ko(s){let e,t,l=s[20].name+"",n,r,o=s[20].filename+"",i,a,f,c,h=s[20].title+"",v;return{c(){e=k("div"),t=pe("#"),n=pe(l),r=pe(" ("),i=pe(o),a=pe(")"),f=R(),c=k("div"),v=pe(h),this.h()},l(g){e=y(g,"DIV",{class:!0});var b=E(e);t=_e(b,"#"),n=_e(b,l),r=_e(b," ("),i=_e(b,o),a=_e(b,")"),b.forEach(d),f=F(g),c=y(g,"DIV",{class:!0});var _=E(c);v=_e(_,h),_.forEach(d),this.h()},h(){u(e,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(c,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1")},m(g,b){B(g,e,b),m(e,t),m(e,n),m(e,r),m(e,i),m(e,a),B(g,f,b),B(g,c,b),m(c,v)},p(g,b){b&8&&l!==(l=g[20].name+"")&&ye(n,l),b&8&&o!==(o=g[20].filename+"")&&ye(i,o),b&8&&h!==(h=g[20].title+"")&&ye(v,h)},d(g){g&&(d(e),d(f),d(c))}}}function yo(s){var a;let e,t=(((a=s[20])==null?void 0:a.title)??`#${s[20].name}`)+"",l,n,r,o=s[1].t("Collection")+"",i;return{c(){e=k("div"),l=pe(t),n=R(),r=k("div"),i=pe(o),this.h()},l(f){e=y(f,"DIV",{class:!0});var c=E(e);l=_e(c,t),c.forEach(d),n=F(f),r=y(f,"DIV",{class:!0});var h=E(r);i=_e(h,o),h.forEach(d),this.h()},h(){u(e,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(r,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1")},m(f,c){B(f,e,c),m(e,l),B(f,n,c),B(f,r,c),m(r,i)},p(f,c){var h;c&8&&t!==(t=(((h=f[20])==null?void 0:h.title)??`#${f[20].name}`)+"")&&ye(l,t),c&2&&o!==(o=f[1].t("Collection")+"")&&ye(i,o)},d(f){f&&(d(e),d(n),d(r))}}}function Ns(s){let e,t,l,n;function r(c,h){return c[20].type==="collection"?yo:ko}let o=r(s),i=o(s);function a(){return s[14](s[20])}function f(){return s[15](s[22])}return{c(){e=k("button"),i.c(),this.h()},l(c){e=y(c,"BUTTON",{class:!0,type:!0});var h=E(e);i.l(h),h.forEach(d),this.h()},h(){u(e,"class",t="px-3 py-1.5 rounded-xl w-full text-left "+(s[22]===s[2]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":"")),u(e,"type","button")},m(c,h){B(c,e,h),i.m(e,null),l||(n=[fe(e,"click",a),fe(e,"mousemove",f),fe(e,"focus",Co)],l=!0)},p(c,h){s=c,o===(o=r(s))&&i?i.p(s,h):(i.d(1),i=o(s),i&&(i.c(),i.m(e,null))),h&4&&t!==(t="px-3 py-1.5 rounded-xl w-full text-left "+(s[22]===s[2]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":""))&&u(e,"class",t)},d(c){c&&d(e),i.d(),l=!1,jt(n)}}}function Eo(s){var h,v;let e,t,l=((v=(h=s[0].split(" "))==null?void 0:h.at(0))==null?void 0:v.substring(1))+"",n,r,o,i=s[1].t("Web")+"",a,f,c;return{c(){e=k("button"),t=k("div"),n=pe(l),r=R(),o=k("div"),a=pe(i),this.h()},l(g){e=y(g,"BUTTON",{class:!0,type:!0});var b=E(e);t=y(b,"DIV",{class:!0});var _=E(t);n=_e(_,l),_.forEach(d),r=F(b),o=y(b,"DIV",{class:!0});var p=E(o);a=_e(p,i),p.forEach(d),b.forEach(d),this.h()},h(){u(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(o,"class","text-xs text-gray-600 line-clamp-1"),u(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),u(e,"type","button")},m(g,b){B(g,e,b),m(e,t),m(t,n),m(e,r),m(e,o),m(o,a),f||(c=fe(e,"click",s[17]),f=!0)},p(g,b){var _,p;b&1&&l!==(l=((p=(_=g[0].split(" "))==null?void 0:_.at(0))==null?void 0:p.substring(1))+"")&&ye(n,l),b&2&&i!==(i=g[1].t("Web")+"")&&ye(a,i)},d(g){g&&d(e),f=!1,c()}}}function Io(s){var h,v;let e,t,l=((v=(h=s[0].split(" "))==null?void 0:h.at(0))==null?void 0:v.substring(1))+"",n,r,o,i=s[1].t("Youtube")+"",a,f,c;return{c(){e=k("button"),t=k("div"),n=pe(l),r=R(),o=k("div"),a=pe(i),this.h()},l(g){e=y(g,"BUTTON",{class:!0,type:!0});var b=E(e);t=y(b,"DIV",{class:!0});var _=E(t);n=_e(_,l),_.forEach(d),r=F(b),o=y(b,"DIV",{class:!0});var p=E(o);a=_e(p,i),p.forEach(d),b.forEach(d),this.h()},h(){u(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(o,"class","text-xs text-gray-600 line-clamp-1"),u(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),u(e,"type","button")},m(g,b){B(g,e,b),m(e,t),m(t,n),m(e,r),m(e,o),m(o,a),f||(c=fe(e,"click",s[16]),f=!0)},p(g,b){var _,p;b&1&&l!==(l=((p=(_=g[0].split(" "))==null?void 0:_.at(0))==null?void 0:p.substring(1))+"")&&ye(n,l),b&2&&i!==(i=g[1].t("Youtube")+"")&&ye(a,i)},d(g){g&&d(e),f=!1,c()}}}function Do(s){var n,r;let e=s[3].length>0||((r=(n=s[0].split(" "))==null?void 0:n.at(0))==null?void 0:r.substring(1).startsWith("http")),t,l=e&&Ls(s);return{c(){l&&l.c(),t=xe()},l(o){l&&l.l(o),t=xe()},m(o,i){l&&l.m(o,i),B(o,t,i)},p(o,[i]){var a,f;i&9&&(e=o[3].length>0||((f=(a=o[0].split(" "))==null?void 0:a.at(0))==null?void 0:f.substring(1).startsWith("http"))),e?l?l.p(o,i):(l=Ls(o),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:Ve,o:Ve,d(o){o&&d(t),l&&l.d(o)}}}const So=s=>s.substring(1).startsWith("https://www.youtube.com")||s.substring(1).startsWith("https://youtu.be"),Co=()=>{};function To(s,e,t){let l,n,r;we(s,Fn,Z=>t(13,n=Z));const o=kt("i18n");we(s,o,Z=>t(1,r=Z));let{prompt:i=""}=e;const a=gl();let f=0,c=[],h=[],v=[];const g=(Z,O)=>{var A,j;return Z.name.toLowerCase().includes(((j=(A=O.toLowerCase().split(" "))==null?void 0:A.at(0))==null?void 0:j.substring(1))??"")},b=()=>{t(2,f=Math.max(0,f-1))},_=()=>{t(2,f=Math.min(f+1,c.length-1))},p=async Z=>{a("select",Z),t(0,i=Wl(i));const O=document.getElementById("chat-textarea");await Pe(),O==null||O.focus(),await Pe()},w=async Z=>{a("url",Z),t(0,i=Wl(i));const O=document.getElementById("chat-textarea");await Pe(),O==null||O.focus(),await Pe()},I=async Z=>{a("youtube",Z),t(0,i=Wl(i));const O=document.getElementById("chat-textarea");await Pe(),O==null||O.focus(),await Pe()},D=Z=>{console.log(Z),p(Z)},V=Z=>{t(2,f=Z)},M=()=>{var O,G;const Z=(G=(O=i.split(" "))==null?void 0:O.at(0))==null?void 0:G.substring(1);as(Z)?I(Z):Be.error(r.t("Oops! Looks like the URL is invalid. Please double-check and try again."))},N=()=>{var O,G;const Z=(G=(O=i.split(" "))==null?void 0:O.at(0))==null?void 0:G.substring(1);as(Z)?w(Z):Be.error(r.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return s.$$set=Z=>{"prompt"in Z&&t(0,i=Z.prompt)},s.$$.update=()=>{s.$$.dirty&8194&&t(11,v=[...n.length>0?[{name:"All Documents",type:"collection",title:r.t("All Documents"),collection_names:n.map(Z=>Z.collection_name)}]:[],...n.reduce((Z,O,G,A)=>{var j;return[...new Set([...Z,...(((j=O==null?void 0:O.content)==null?void 0:j.tags)??[]).map(q=>q.name)])]},[]).map(Z=>({name:Z,type:"collection",collection_names:n.filter(O=>{var G;return(((G=O==null?void 0:O.content)==null?void 0:G.tags)??[]).map(A=>A.name).includes(Z)}).map(O=>O.collection_name)}))]),s.$$.dirty&2049&&t(12,l=v.filter(Z=>g(Z,i)).sort((Z,O)=>Z.name.localeCompare(O.name))),s.$$.dirty&8193&&t(10,h=n.filter(Z=>g(Z,i)).sort((Z,O)=>Z.title.localeCompare(O.title))),s.$$.dirty&5120&&t(3,c=[...l,...h]),s.$$.dirty&4097&&i&&(t(2,f=0),console.log(l))},[i,r,f,c,o,p,w,I,b,_,h,v,l,n,D,V,M,N]}class Mo extends tt{constructor(e){super(),lt(this,e,To,Do,et,{prompt:0,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function zs(s,e,t){const l=s.slice();return l[16]=e[t],l[18]=t,l}function Os(s){let e,t=s[2].length>0&&As(s);return{c(){t&&t.c(),e=xe()},l(l){t&&t.l(l),e=xe()},m(l,n){t&&t.m(l,n),B(l,e,n)},p(l,n){l[2].length>0?t?t.p(l,n):(t=As(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&d(e),t&&t.d(l)}}}function As(s){let e,t,l,n='<div class="text-lg font-semibold mt-2">@</div>',r,o,i,a=pt(s[2]),f=[];for(let c=0;c<a.length;c+=1)f[c]=Us(zs(s,a,c));return{c(){e=k("div"),t=k("div"),l=k("div"),l.innerHTML=n,r=R(),o=k("div"),i=k("div");for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){e=y(c,"DIV",{class:!0});var h=E(e);t=y(h,"DIV",{class:!0});var v=E(t);l=y(v,"DIV",{class:!0,"data-svelte-h":!0}),Je(l)!=="svelte-1wyzeqe"&&(l.innerHTML=n),r=F(v),o=y(v,"DIV",{class:!0});var g=E(o);i=y(g,"DIV",{class:!0});var b=E(i);for(let _=0;_<f.length;_+=1)f[_].l(b);b.forEach(d),g.forEach(d),v.forEach(d),h.forEach(d),this.h()},h(){u(l,"class","bg-gray-50 dark:bg-gray-850 w-10 rounded-l-lg text-center"),u(i,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),u(o,"class","max-h-60 flex flex-col w-full rounded-r-lg bg-white dark:bg-gray-900 dark:text-gray-100"),u(t,"class","flex w-full dark:border dark:border-gray-850 rounded-lg"),u(e,"class","pl-1 pr-12 mb-3 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(c,h){B(c,e,h),m(e,t),m(t,l),m(t,r),m(t,o),m(o,i);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(i,null)},p(c,h){if(h&22){a=pt(c[2]);let v;for(v=0;v<a.length;v+=1){const g=zs(c,a,v);f[v]?f[v].p(g,h):(f[v]=Us(g),f[v].c(),f[v].m(i,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=a.length}},d(c){c&&d(e),Xt(f,c)}}}function Us(s){let e,t,l=s[16].name+"",n,r,o,i,a;function f(){return s[11](s[16])}function c(){return s[12](s[18])}return{c(){e=k("button"),t=k("div"),n=pe(l),r=R(),this.h()},l(h){e=y(h,"BUTTON",{class:!0,type:!0});var v=E(e);t=y(v,"DIV",{class:!0});var g=E(t);n=_e(g,l),g.forEach(d),r=F(v),v.forEach(d),this.h()},h(){u(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(e,"class",o="px-3 py-1.5 rounded-xl w-full text-left "+(s[18]===s[1]?"  bg-gray-50 dark:bg-gray-850  selected-command-option-button":"")),u(e,"type","button")},m(h,v){B(h,e,v),m(e,t),m(t,n),m(e,r),i||(a=[fe(e,"click",f),fe(e,"mousemove",c),fe(e,"focus",Ho)],i=!0)},p(h,v){s=h,v&4&&l!==(l=s[16].name+"")&&ye(n,l),v&2&&o!==(o="px-3 py-1.5 rounded-xl w-full text-left "+(s[18]===s[1]?"  bg-gray-50 dark:bg-gray-850  selected-command-option-button":""))&&u(e,"class",o)},d(h){h&&d(e),i=!1,jt(a)}}}function Vo(s){let e=s[0].charAt(0)==="@",t,l=e&&Os(s);return{c(){l&&l.c(),t=xe()},l(n){l&&l.l(n),t=xe()},m(n,r){l&&l.m(n,r),B(n,t,r)},p(n,[r]){r&1&&(e=n[0].charAt(0)==="@"),e?l?l.p(n,r):(l=Os(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:Ve,o:Ve,d(n){n&&d(t),l&&l.d(n)}}}const Ho=()=>{};function Bo(s,e,t){let l;we(s,El,w=>t(10,l=w));const n=kt("i18n");we(s,n,w=>t(13,w));const r=gl();let{prompt:o=""}=e,{user:i=null}=e,{chatInputPlaceholder:a=""}=e,{messages:f=[]}=e,c=0,h=[];const v=()=>{t(1,c=Math.max(0,c-1))},g=()=>{t(1,c=Math.min(c+1,h.length-1))},b=async w=>{t(0,o=""),r("select",w)},_=w=>{b(w)},p=w=>{t(1,c=w)};return s.$$set=w=>{"prompt"in w&&t(0,o=w.prompt),"user"in w&&t(5,i=w.user),"chatInputPlaceholder"in w&&t(6,a=w.chatInputPlaceholder),"messages"in w&&t(7,f=w.messages)},s.$$.update=()=>{s.$$.dirty&1025&&t(2,h=l.filter(w=>{var I,D;return w.name.toLowerCase().includes(((D=(I=o.toLowerCase().split(" "))==null?void 0:I.at(0))==null?void 0:D.substring(1))??"")}).sort((w,I)=>w.name.localeCompare(I.name))),s.$$.dirty&1&&o&&t(1,c=0)},[o,c,h,n,b,i,a,f,v,g,l,_,p]}class Lo extends tt{constructor(e){super(),lt(this,e,Bo,Vo,et,{prompt:0,user:5,chatInputPlaceholder:6,messages:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function No(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=E(e);t=ze(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M6 18 18 6M6 6l12 12"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",s[1]),u(e,"stroke","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&2&&u(e,"stroke-width",l[1]),n&1&&u(e,"class",l[0])},i:Ve,o:Ve,d(l){l&&d(e)}}}function zo(s,e,t){let{className:l="size-3.5"}=e,{strokeWidth:n="2"}=e;return s.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class Ln extends tt{constructor(e){super(),lt(this,e,zo,No,et,{className:0,strokeWidth:1})}}function Oo(s){let e,t,l;return{c(){e=Ne("svg"),t=Ne("path"),l=Ne("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=E(e);t=ze(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(t).forEach(d),l=ze(r,"path",{d:!0}),E(l).forEach(d),r.forEach(d),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm6.905 9.97a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72V18a.75.75 0 0 0 1.5 0v-4.19l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z"),u(t,"clip-rule","evenodd"),u(l,"d","M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class",s[0])},m(n,r){B(n,e,r),m(e,t),m(e,l)},p(n,[r]){r&1&&u(e,"class",n[0])},i:Ve,o:Ve,d(n){n&&d(e)}}}function Ao(s,e,t){let{className:l="size-4"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className)},[l]}class Uo extends tt{constructor(e){super(),lt(this,e,Ao,Oo,et,{className:0})}}function jo(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=E(e);t=ze(n,"path",{d:!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){u(t,"d","M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&1&&u(e,"class",l[0])},i:Ve,o:Ve,d(l){l&&d(e)}}}function Po(s,e,t){let{className:l="size-4"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className)},[l]}class Ro extends tt{constructor(e){super(),lt(this,e,Po,jo,et,{className:0})}}function Fo(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=E(e);t=ze(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M12 6.75a5.25 5.25 0 0 1 6.775-5.025.75.75 0 0 1 .313 1.248l-3.32 3.319c.063.475.276.934.641 1.299.365.365.824.578 1.3.64l3.318-3.319a.75.75 0 0 1 1.248.313 5.25 5.25 0 0 1-5.472 6.756c-1.018-.086-1.87.1-2.309.634L7.344 21.3A3.298 3.298 0 1 1 2.7 16.657l8.684-7.151c.533-.44.72-1.291.634-2.309A5.342 5.342 0 0 1 12 6.75ZM4.117 19.125a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&1&&u(e,"class",l[0])},i:Ve,o:Ve,d(l){l&&d(e)}}}function Wo(s,e,t){let{className:l="size-4"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className)},[l]}class Zo extends tt{constructor(e){super(),lt(this,e,Wo,Fo,et,{className:0})}}function js(s,e,t){const l=s.slice();return l[17]=e[t],l[18]=e,l[19]=t,l}function xo(s){let e;const t=s[9].default,l=zt(t,s,s[16],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&65536)&&Ot(l,t,n,n[16],e?Ut(t,n[16],r,null):At(n[16]),null)},i(n){e||(H(l,n),e=!0)},o(n){L(l,n),e=!1},d(n){l&&l.d(n)}}}function qo(s){let e,t;return e=new Zt({props:{content:s[7].t("More"),$$slots:{default:[xo]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,n){const r={};n&128&&(r.content=l[7].t("More")),n&65536&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function Ps(s){let e,t,l,n,r=pt(Object.keys(s[1])),o=[];for(let a=0;a<r.length;a+=1)o[a]=Rs(js(s,r,a));const i=a=>L(o[a],1,1,()=>{o[a]=null});return{c(){e=k("div");for(let a=0;a<o.length;a+=1)o[a].c();t=R(),l=k("hr"),this.h()},l(a){e=y(a,"DIV",{class:!0});var f=E(e);for(let c=0;c<o.length;c+=1)o[c].l(f);f.forEach(d),t=F(a),l=y(a,"HR",{class:!0}),this.h()},h(){u(e,"class","max-h-28 overflow-y-auto scrollbar-hidden"),u(l,"class","border-gray-100 dark:border-gray-800 my-1")},m(a,f){B(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);B(a,t,f),B(a,l,f),n=!0},p(a,f){if(f&3){r=pt(Object.keys(a[1]));let c;for(c=0;c<r.length;c+=1){const h=js(a,r,c);o[c]?(o[c].p(h,f),H(o[c],1)):(o[c]=Rs(h),o[c].c(),H(o[c],1),o[c].m(e,null))}for(Ge(),c=r.length;c<o.length;c+=1)i(c);Qe()}},i(a){if(!n){for(let f=0;f<r.length;f+=1)H(o[f]);n=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)L(o[f]);n=!1},d(a){a&&(d(e),d(t),d(l)),Xt(o,a)}}}function Jo(s){let e,t=s[1][s[17]].name+"",l;return{c(){e=k("div"),l=pe(t),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=E(e);l=_e(r,t),r.forEach(d),this.h()},h(){u(e,"class","line-clamp-1")},m(n,r){B(n,e,r),m(e,l)},p(n,r){r&2&&t!==(t=n[1][n[17]].name+"")&&ye(l,t)},d(n){n&&d(e)}}}function Rs(s){var b;let e,t,l,n,r,o,i,a,f,c;l=new Zo({}),r=new Zt({props:{content:((b=s[1][s[17]])==null?void 0:b.description)??"",className:"flex-1",$$slots:{default:[Jo]},$$scope:{ctx:s}}});function h(_){s[10](_,s[17])}function v(..._){return s[11](s[17],..._)}let g={};return s[1][s[17]].enabled!==void 0&&(g.state=s[1][s[17]].enabled),i=new Mn({props:g}),be.push(()=>Me(i,"state",h)),i.$on("change",v),{c(){e=k("div"),t=k("div"),ne(l.$$.fragment),n=R(),ne(r.$$.fragment),o=R(),ne(i.$$.fragment),f=R(),this.h()},l(_){e=y(_,"DIV",{class:!0});var p=E(e);t=y(p,"DIV",{class:!0});var w=E(t);re(l.$$.fragment,w),n=F(w),re(r.$$.fragment,w),w.forEach(d),o=F(p),re(i.$$.fragment,p),f=F(p),p.forEach(d),this.h()},h(){u(t,"class","flex-1 flex items-center gap-2"),u(e,"class","flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl")},m(_,p){B(_,e,p),m(e,t),oe(l,t,null),m(t,n),oe(r,t,null),m(e,o),oe(i,e,null),m(e,f),c=!0},p(_,p){var D;s=_;const w={};p&2&&(w.content=((D=s[1][s[17]])==null?void 0:D.description)??""),p&65538&&(w.$$scope={dirty:p,ctx:s}),r.$set(w);const I={};!a&&p&2&&(a=!0,I.state=s[1][s[17]].enabled,Te(()=>a=!1)),i.$set(I)},i(_){c||(H(l.$$.fragment,_),H(r.$$.fragment,_),H(i.$$.fragment,_),c=!0)},o(_){L(l.$$.fragment,_),L(r.$$.fragment,_),L(i.$$.fragment,_),c=!1},d(_){_&&d(e),ie(l),ie(r),ie(i)}}}function Fs(s){let e,t,l,n,r,o=s[7].t("Web Search")+"",i,a,f,c,h,v,g;l=new Ro({});function b(p){s[12](p)}let _={};return s[2]!==void 0&&(_.state=s[2]),f=new Mn({props:_}),be.push(()=>Me(f,"state",b)),{c(){e=k("div"),t=k("div"),ne(l.$$.fragment),n=R(),r=k("div"),i=pe(o),a=R(),ne(f.$$.fragment),h=R(),v=k("hr"),this.h()},l(p){e=y(p,"DIV",{class:!0});var w=E(e);t=y(w,"DIV",{class:!0});var I=E(t);re(l.$$.fragment,I),n=F(I),r=y(I,"DIV",{class:!0});var D=E(r);i=_e(D,o),D.forEach(d),I.forEach(d),a=F(w),re(f.$$.fragment,w),w.forEach(d),h=F(p),v=y(p,"HR",{class:!0}),this.h()},h(){u(r,"class","line-clamp-1"),u(t,"class","flex-1 flex items-center gap-2"),u(e,"class","flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl"),u(v,"class","border-gray-100 dark:border-gray-800 my-1")},m(p,w){B(p,e,w),m(e,t),oe(l,t,null),m(t,n),m(t,r),m(r,i),m(e,a),oe(f,e,null),B(p,h,w),B(p,v,w),g=!0},p(p,w){(!g||w&128)&&o!==(o=p[7].t("Web Search")+"")&&ye(i,o);const I={};!c&&w&4&&(c=!0,I.state=p[2],Te(()=>c=!1)),f.$set(I)},i(p){g||(H(l.$$.fragment,p),H(f.$$.fragment,p),g=!0)},o(p){L(l.$$.fragment,p),L(f.$$.fragment,p),g=!1},d(p){p&&(d(e),d(h),d(v)),ie(l),ie(f)}}}function Go(s){let e,t,l,n=s[7].t("Upload Files")+"",r,o;return e=new Uo({}),{c(){ne(e.$$.fragment),t=R(),l=k("div"),r=pe(n),this.h()},l(i){re(e.$$.fragment,i),t=F(i),l=y(i,"DIV",{class:!0});var a=E(l);r=_e(a,n),a.forEach(d),this.h()},h(){u(l,"class","line-clamp-1")},m(i,a){oe(e,i,a),B(i,t,a),B(i,l,a),m(l,r),o=!0},p(i,a){(!o||a&128)&&n!==(n=i[7].t("Upload Files")+"")&&ye(r,n)},i(i){o||(H(e.$$.fragment,i),o=!0)},o(i){L(e.$$.fragment,i),o=!1},d(i){i&&(d(t),d(l)),ie(e,i)}}}function Qo(s){var a,f;let e=Object.keys(s[1]).length>0,t,l,n,r,o=e&&Ps(s),i=((f=(a=s[6])==null?void 0:a.features)==null?void 0:f.enable_web_search)&&Fs(s);return n=new sl({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl",$$slots:{default:[Go]},$$scope:{ctx:s}}}),n.$on("click",s[13]),{c(){o&&o.c(),t=R(),i&&i.c(),l=R(),ne(n.$$.fragment)},l(c){o&&o.l(c),t=F(c),i&&i.l(c),l=F(c),re(n.$$.fragment,c)},m(c,h){o&&o.m(c,h),B(c,t,h),i&&i.m(c,h),B(c,l,h),oe(n,c,h),r=!0},p(c,h){var g,b;h&2&&(e=Object.keys(c[1]).length>0),e?o?(o.p(c,h),h&2&&H(o,1)):(o=Ps(c),o.c(),H(o,1),o.m(t.parentNode,t)):o&&(Ge(),L(o,1,1,()=>{o=null}),Qe()),(b=(g=c[6])==null?void 0:g.features)!=null&&b.enable_web_search?i?(i.p(c,h),h&64&&H(i,1)):(i=Fs(c),i.c(),H(i,1),i.m(l.parentNode,l)):i&&(Ge(),L(i,1,1,()=>{i=null}),Qe());const v={};h&65664&&(v.$$scope={dirty:h,ctx:c}),n.$set(v)},i(c){r||(H(o),H(i),H(n.$$.fragment,c),r=!0)},o(c){L(o),L(i),L(n.$$.fragment,c),r=!1},d(c){c&&(d(t),d(l)),o&&o.d(c),i&&i.d(c),ie(n,c)}}}function Ko(s){let e,t,l;return t=new Rl({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:15,alignOffset:-8,side:"top",align:"start",transition:Dl,$$slots:{default:[Qo]},$$scope:{ctx:s}}}),{c(){e=k("div"),ne(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{slot:!0});var r=E(e);re(t.$$.fragment,r),r.forEach(d),this.h()},h(){u(e,"slot","content")},m(n,r){B(n,e,r),oe(t,e,null),l=!0},p(n,r){const o={};r&65743&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){L(t.$$.fragment,n),l=!1},d(n){n&&d(e),ie(t)}}}function Yo(s){let e,t,l;function n(o){s[14](o)}let r={$$slots:{content:[Ko],default:[qo]},$$scope:{ctx:s}};return s[5]!==void 0&&(r.show=s[5]),e=new Pl({props:r}),be.push(()=>Me(e,"show",n)),e.$on("change",s[15]),{c(){ne(e.$$.fragment)},l(o){re(e.$$.fragment,o)},m(o,i){oe(e,o,i),l=!0},p(o,[i]){const a={};i&65743&&(a.$$scope={dirty:i,ctx:o}),!t&&i&32&&(t=!0,a.show=o[5],Te(()=>t=!1)),e.$set(a)},i(o){l||(H(e.$$.fragment,o),l=!0)},o(o){L(e.$$.fragment,o),l=!1},d(o){ie(e,o)}}}function Xo(s,e,t){let l,n;we(s,Il,V=>t(6,l=V));let{$$slots:r={},$$scope:o}=e;const i=kt("i18n");we(s,i,V=>t(7,n=V));let{uploadFilesHandler:a}=e,{selectedToolIds:f=[]}=e,{webSearchEnabled:c}=e,{tools:h={}}=e,{onClose:v}=e,g=!1;function b(V,M){s.$$.not_equal(h[M].enabled,V)&&(h[M].enabled=V,t(1,h),t(0,f))}const _=(V,M)=>{t(0,f=M.detail?[...f,V]:f.filter(N=>N!==V))};function p(V){c=V,t(2,c)}const w=()=>{a()};function I(V){g=V,t(5,g)}const D=V=>{V.detail===!1&&v()};return s.$$set=V=>{"uploadFilesHandler"in V&&t(3,a=V.uploadFilesHandler),"selectedToolIds"in V&&t(0,f=V.selectedToolIds),"webSearchEnabled"in V&&t(2,c=V.webSearchEnabled),"tools"in V&&t(1,h=V.tools),"onClose"in V&&t(4,v=V.onClose),"$$scope"in V&&t(16,o=V.$$scope)},s.$$.update=()=>{s.$$.dirty&3&&t(1,h=Object.fromEntries(Object.keys(h).map(V=>[V,{...h[V],enabled:f.includes(V)}])))},[f,h,c,a,v,g,l,n,i,r,b,_,p,w,I,D,o]}class $o extends tt{constructor(e){super(),lt(this,e,Xo,Yo,et,{uploadFilesHandler:3,selectedToolIds:0,webSearchEnabled:2,tools:1,onClose:4})}}function ei(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=E(e);t=ze(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M12 5a7 7 0 0 0-7 7v1.17c.313-.11.65-.17 1-.17h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H6a3 3 0 0 1-3-3v-6a9 9 0 0 1 18 0v6a3 3 0 0 1-3 3h-2a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2c.35 0 .687.06 1 .17V12a7 7 0 0 0-7-7Z"),u(t,"clip-rule","evenodd"),u(e,"aria-hidden","true"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",s[1]),u(e,"stroke","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&2&&u(e,"stroke-width",l[1]),n&1&&u(e,"class",l[0])},i:Ve,o:Ve,d(l){l&&d(e)}}}function ti(s,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="0"}=e;return s.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class li extends tt{constructor(e){super(),lt(this,e,ti,ei,et,{className:0,strokeWidth:1})}}function Ws(s,e,t){const l=s.slice();return l[29]=e[t],l}function Zs(s){let e,t;return{c(){e=k("div"),this.h()},l(l){e=y(l,"DIV",{class:!0,style:!0}),E(e).forEach(d),this.h()},h(){u(e,"class",t="w-[2px] "+(s[0]?" bg-gray-500 dark:bg-gray-400   ":"bg-indigo-500 dark:bg-indigo-400  ")+" inline-block h-full"),Ht(e,"height",Math.min(100,Math.max(14,s[29]*100))+"%")},m(l,n){B(l,e,n)},p(l,n){n[0]&1&&t!==(t="w-[2px] "+(l[0]?" bg-gray-500 dark:bg-gray-400   ":"bg-indigo-500 dark:bg-indigo-400  ")+" inline-block h-full")&&u(e,"class",t),n[0]&4&&Ht(e,"height",Math.min(100,Math.max(14,l[29]*100))+"%")},d(l){l&&d(e)}}}function si(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5"></path></svg>',l,n;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(r){e=y(r,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-1qzkal"&&(e.innerHTML=t),this.h()},h(){u(e,"type","button"),u(e,"class","p-1.5 bg-indigo-500 text-white dark:bg-indigo-500 dark:text-blue-950 rounded-full")},m(r,o){B(r,e,o),l||(n=fe(e,"click",s[10]),l=!0)},p:Ve,d(r){r&&d(e),l=!1,n()}}}function ni(s){let e,t=`<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><style>.spinner_OSmW {
							transform-origin: center;
							animation: spinner_T6mA 0.75s step-end infinite;
						}
						@keyframes spinner_T6mA {
							8.3% {
								transform: rotate(30deg);
							}
							16.6% {
								transform: rotate(60deg);
							}
							25% {
								transform: rotate(90deg);
							}
							33.3% {
								transform: rotate(120deg);
							}
							41.6% {
								transform: rotate(150deg);
							}
							50% {
								transform: rotate(180deg);
							}
							58.3% {
								transform: rotate(210deg);
							}
							66.6% {
								transform: rotate(240deg);
							}
							75% {
								transform: rotate(270deg);
							}
							83.3% {
								transform: rotate(300deg);
							}
							91.6% {
								transform: rotate(330deg);
							}
							100% {
								transform: rotate(360deg);
							}
						}
					</style><g class="spinner_OSmW"><rect x="11" y="1" width="2" height="5" opacity=".14"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(30 12 12)" opacity=".29"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(60 12 12)" opacity=".43"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(90 12 12)" opacity=".57"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(120 12 12)" opacity=".71"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(150 12 12)" opacity=".86"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(180 12 12)"></rect></g></svg>`;return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=y(l,"DIV",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-otpw2s"&&(e.innerHTML=t),this.h()},h(){u(e,"class","text-gray-500 rounded-full cursor-not-allowed")},m(l,n){B(l,e,n)},p:Ve,d(l){l&&d(e)}}}function ri(s){let e,t,l,n,r,o,i,a,f,c,h,v,g=s[5](s[1])+"",b,_,p,w,I,D,V,M=pt(s[2].slice().reverse()),N=[];for(let A=0;A<M.length;A+=1)N[A]=Zs(Ws(s,M,A));function Z(A,j){return A[0]?ni:si}let O=Z(s),G=O(s);return{c(){e=k("div"),t=k("div"),l=k("button"),n=Ne("svg"),r=Ne("path"),i=R(),a=k("div"),f=k("div");for(let A=0;A<N.length;A+=1)N[A].c();c=R(),h=k("div"),v=k("div"),b=pe(g),p=R(),w=k("div"),G.c(),this.h()},l(A){e=y(A,"DIV",{class:!0});var j=E(e);t=y(j,"DIV",{class:!0});var q=E(t);l=y(q,"BUTTON",{type:!0,class:!0});var J=E(l);n=ze(J,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var x=E(n);r=ze(x,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(r).forEach(d),x.forEach(d),J.forEach(d),q.forEach(d),i=F(j),a=y(j,"DIV",{class:!0,dir:!0});var W=E(a);f=y(W,"DIV",{class:!0});var U=E(f);for(let te=0;te<N.length;te+=1)N[te].l(U);U.forEach(d),W.forEach(d),c=F(j),h=y(j,"DIV",{class:!0});var Q=E(h);v=y(Q,"DIV",{class:!0});var Y=E(v);b=_e(Y,g),Y.forEach(d),Q.forEach(d),p=F(j),w=y(j,"DIV",{class:!0});var $=E(w);G.l($),$.forEach(d),j.forEach(d),this.h()},h(){u(r,"stroke-linecap","round"),u(r,"stroke-linejoin","round"),u(r,"d","M6 18 18 6M6 6l12 12"),u(n,"xmlns","http://www.w3.org/2000/svg"),u(n,"fill","none"),u(n,"viewBox","0 0 24 24"),u(n,"stroke-width","3"),u(n,"stroke","currentColor"),u(n,"class","size-4"),u(l,"type","button"),u(l,"class",o="p-1.5 "+(s[0]?" bg-gray-200 dark:bg-gray-700/50":"bg-indigo-400/20 text-indigo-600 dark:text-indigo-300 ")+" rounded-full"),u(t,"class","flex items-center mr-1"),u(f,"class","flex-1 flex items-center gap-0.5 h-6"),u(a,"class","flex flex-1 self-center items-center justify-between ml-2 mx-1 overflow-hidden h-6"),u(a,"dir","rtl"),u(v,"class",_="text-sm "+(s[0]?" text-gray-500  dark:text-gray-400  ":" text-indigo-400 ")+" font-medium flex-1 mx-auto text-center"),u(h,"class","mx-1.5 pr-1 flex justify-center items-center"),u(w,"class","flex items-center mr-1"),u(e,"class",I=(s[0]?" bg-gray-100/50 dark:bg-gray-850/50":"bg-indigo-300/10 dark:bg-indigo-500/10 ")+" rounded-full flex p-2.5")},m(A,j){B(A,e,j),m(e,t),m(t,l),m(l,n),m(n,r),m(e,i),m(e,a),m(a,f);for(let q=0;q<N.length;q+=1)N[q]&&N[q].m(f,null);m(e,c),m(e,h),m(h,v),m(v,b),m(e,p),m(e,w),G.m(w,null),D||(V=fe(l,"click",s[9]),D=!0)},p(A,j){if(j[0]&1&&o!==(o="p-1.5 "+(A[0]?" bg-gray-200 dark:bg-gray-700/50":"bg-indigo-400/20 text-indigo-600 dark:text-indigo-300 ")+" rounded-full")&&u(l,"class",o),j[0]&5){M=pt(A[2].slice().reverse());let q;for(q=0;q<M.length;q+=1){const J=Ws(A,M,q);N[q]?N[q].p(J,j):(N[q]=Zs(J),N[q].c(),N[q].m(f,null))}for(;q<N.length;q+=1)N[q].d(1);N.length=M.length}j[0]&2&&g!==(g=A[5](A[1])+"")&&ye(b,g),j[0]&1&&_!==(_="text-sm "+(A[0]?" text-gray-500  dark:text-gray-400  ":" text-indigo-400 ")+" font-medium flex-1 mx-auto text-center")&&u(v,"class",_),O===(O=Z(A))&&G?G.p(A,j):(G.d(1),G=O(A),G&&(G.c(),G.m(w,null))),j[0]&1&&I!==(I=(A[0]?" bg-gray-100/50 dark:bg-gray-850/50":"bg-indigo-300/10 dark:bg-indigo-500/10 ")+" rounded-full flex p-2.5")&&u(e,"class",I)},i:Ve,o:Ve,d(A){A&&d(e),Xt(N,A),G.d(),D=!1,V()}}}const xs=300;function oi(s,e,t){let l,n,r;we(s,Kt,W=>t(18,n=W)),we(s,Il,W=>t(19,r=W));const o=kt("i18n");we(s,o,W=>t(17,l=W));const i=gl();let{recording:a=!1}=e,f=!1,c=!1,h=0,v=null,g="";const b=()=>{v=setInterval(()=>{t(1,h++,h)},1e3)},_=()=>{clearInterval(v),t(1,h=0)},p=W=>{const U=Math.floor(W/60),Q=W%60,Y=Q<10?`0${Q}`:Q;return`${U}:${Y}`};let w,I,D=[];const V=-45;let M=Array(xs).fill(0);const N=W=>{let U=0;for(let Q=0;Q<W.length;Q++){const Y=(W[Q]-128)/128;U+=Y*Y}return Math.sqrt(U/W.length)},Z=W=>{W=W*10;const Q=Math.pow(W,1.5);return Math.min(1,Math.max(.01,Q))},O=W=>{const U=new AudioContext,Q=U.createMediaStreamSource(W),Y=U.createAnalyser();Y.minDecibels=V,Q.connect(Y);const $=Y.frequencyBinCount,te=new Uint8Array($),ue=new Uint8Array(Y.fftSize);(()=>{const Ie=()=>{if(!(!a||f)){if(a&&!f){Y.getByteTimeDomainData(ue),Y.getByteFrequencyData(te);const ae=N(ue);M.push(Z(ae)),M.length>=xs&&M.shift(),t(2,M)}window.requestAnimationFrame(Ie)}};window.requestAnimationFrame(Ie)})()},G=async W=>{await Pe();const U=Jl(W,"recording.wav"),Q=await Gl(localStorage.token,U).catch(Y=>(Be.error(Y),null));Q&&(console.log(Q.text),i("confirm",Q.text))},A=async()=>{var U,Q;b();const W=await navigator.mediaDevices.getUserMedia({audio:!0});if(I=new MediaRecorder(W),I.onstart=()=>{console.log("Recording started"),D=[],O(W)},I.ondataavailable=Y=>D.push(Y.data),I.onstop=async()=>{var Y,$;if(console.log("Recording stopped"),((($=(Y=n==null?void 0:n.audio)==null?void 0:Y.stt)==null?void 0:$.engine)??"")==="web")D=[];else{if(c){const te=new Blob(D,{type:"audio/wav"});await G(te),c=!1,t(0,f=!1)}D=[],t(8,a=!1)}},I.start(),(r.audio.stt.engine==="web"||(((Q=(U=n==null?void 0:n.audio)==null?void 0:U.stt)==null?void 0:Q.engine)??"")==="web")&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){w=new(window.SpeechRecognition||window.webkitSpeechRecognition),w.continuous=!0;const Y=2e3;let $;w.start(),w.onresult=async te=>{var De;clearTimeout($),console.log(te);const ue=te.results[Object.keys(te.results).length-1][0].transcript;g=`${g}${ue}`,await Pe(),(De=document.getElementById("chat-textarea"))==null||De.focus(),$=setTimeout(()=>{console.log("Speech recognition turned off due to inactivity."),w.stop()},Y)},w.onend=function(){console.log("recognition ended"),q(),i("confirm",g),c=!1,t(0,f=!1)},w.onerror=function(te){console.log(te),Be.error(l.t("Speech recognition error: {{error}}",{error:te.error})),i("cancel"),j()}}},j=async()=>{a&&I&&await I.stop(),_(),D=[]},q=async()=>{t(0,f=!0),c=!0,a&&I&&await I.stop(),clearInterval(v)},J=async()=>{i("cancel"),j()},x=async()=>{await q()};return s.$$set=W=>{"recording"in W&&t(8,a=W.recording)},s.$$.update=()=>{s.$$.dirty[0]&256&&(a?A():j())},[f,h,M,o,i,p,j,q,a,J,x]}class ii extends tt{constructor(e){super(),lt(this,e,oi,ri,et,{recording:8},null,[-1,-1])}}function qs(s){let e,t,l,n,r,o,i;return r=new Ir({}),{c(){e=k("div"),t=k("div"),l=k("div"),n=k("div"),ne(r.$$.fragment),this.h()},l(a){e=y(a,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=E(e);t=y(f,"DIV",{class:!0});var c=E(t);l=y(c,"DIV",{class:!0});var h=E(l);n=y(h,"DIV",{class:!0});var v=E(n);re(r.$$.fragment,v),v.forEach(d),h.forEach(d),c.forEach(d),f.forEach(d),this.h()},h(){u(n,"class","max-w-md"),u(l,"class","m-auto pt-64 flex flex-col justify-center"),u(t,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),u(e,"class",o="fixed "+(s[2]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" fixed top-0 right-0 bottom-0 w-full h-full flex z-[9999] touch-none pointer-events-none"),u(e,"id","dropzone"),u(e,"role","region"),u(e,"aria-label","Drag and Drop Container")},m(a,f){B(a,e,f),m(e,t),m(t,l),m(l,n),oe(r,n,null),s[3](e),i=!0},p(a,f){(!i||f&4&&o!==(o="fixed "+(a[2]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" fixed top-0 right-0 bottom-0 w-full h-full flex z-[9999] touch-none pointer-events-none"))&&u(e,"class",o)},i(a){i||(H(r.$$.fragment,a),i=!0)},o(a){L(r.$$.fragment,a),i=!1},d(a){a&&d(e),ie(r),s[3](null)}}}function ai(s){let e,t,l=s[0]&&qs(s);return{c(){l&&l.c(),e=xe()},l(n){l&&l.l(n),e=xe()},m(n,r){l&&l.m(n,r),B(n,e,r),t=!0},p(n,[r]){n[0]?l?(l.p(n,r),r&1&&H(l,1)):(l=qs(n),l.c(),H(l,1),l.m(e.parentNode,e)):l&&(Ge(),L(l,1,1,()=>{l=null}),Qe())},i(n){t||(H(l),t=!0)},o(n){L(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}function ci(s,e,t){let l;we(s,Ul,i=>t(2,l=i));let{show:n=!1}=e,r=null;function o(i){be[i?"unshift":"push"](()=>{r=i,t(1,r)})}return s.$$set=i=>{"show"in i&&t(0,n=i.show)},s.$$.update=()=>{s.$$.dirty&3&&(n&&r?(document.body.appendChild(r),document.body.style.overflow="hidden"):r&&(document.body.removeChild(r),document.body.style.overflow="unset"))},[n,r,l,o]}class fi extends tt{constructor(e){super(),lt(this,e,ci,ai,et,{show:0})}}function Js(s,e,t){const l=s.slice();return l[76]=e[t],l[78]=t,l}function Gs(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',n,r;return{c(){e=k("div"),t=k("button"),t.innerHTML=l,this.h()},l(o){e=y(o,"DIV",{class:!0});var i=E(e);t=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(t)!=="svelte-txgoc3"&&(t.innerHTML=l),i.forEach(d),this.h()},h(){u(t,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto"),u(e,"class","absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none")},m(o,i){B(o,e,i),m(e,t),n||(r=fe(t,"click",s[35]),n=!0)},p:Ve,d(o){o&&d(e),n=!1,r()}}}function ui(s){let e,t,l;function n(o){s[40](o)}let r={};return s[1]!==void 0&&(r.prompt=s[1]),e=new Mo({props:r}),s[39](e),be.push(()=>Me(e,"prompt",n)),e.$on("youtube",s[41]),e.$on("url",s[42]),e.$on("select",s[43]),{c(){ne(e.$$.fragment)},l(o){re(e.$$.fragment,o)},m(o,i){oe(e,o,i),l=!0},p(o,i){const a={};!t&&i[0]&2&&(t=!0,a.prompt=o[1],Te(()=>t=!1)),e.$set(a)},i(o){l||(H(e.$$.fragment,o),l=!0)},o(o){L(e.$$.fragment,o),l=!1},d(o){s[39](null),ie(e,o)}}}function di(s){let e,t,l,n;function r(a){s[37](a)}function o(a){s[38](a)}let i={};return s[1]!==void 0&&(i.prompt=s[1]),s[3]!==void 0&&(i.files=s[3]),e=new wo({props:i}),s[36](e),be.push(()=>Me(e,"prompt",r)),be.push(()=>Me(e,"files",o)),{c(){ne(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,f){oe(e,a,f),n=!0},p(a,f){const c={};!t&&f[0]&2&&(t=!0,c.prompt=a[1],Te(()=>t=!1)),!l&&f[0]&8&&(l=!0,c.files=a[3],Te(()=>l=!1)),e.$set(c)},i(a){n||(H(e.$$.fragment,a),n=!0)},o(a){L(e.$$.fragment,a),n=!1},d(a){s[36](null),ie(e,a)}}}function Qs(s){let e,t,l,n,r,o,i,a,f=s[0].name+"",c,h,v,g,b,_,p,w;return b=new Ln({}),{c(){e=k("div"),t=k("div"),l=k("img"),r=R(),o=k("div"),i=pe("Talking to "),a=k("span"),c=pe(f),h=R(),v=k("div"),g=k("button"),ne(b.$$.fragment),this.h()},l(I){e=y(I,"DIV",{class:!0});var D=E(e);t=y(D,"DIV",{class:!0});var V=E(t);l=y(V,"IMG",{crossorigin:!0,alt:!0,class:!0,src:!0}),r=F(V),o=y(V,"DIV",{});var M=E(o);i=_e(M,"Talking to "),a=y(M,"SPAN",{class:!0});var N=E(a);c=_e(N,f),N.forEach(d),M.forEach(d),V.forEach(d),h=F(D),v=y(D,"DIV",{});var Z=E(v);g=y(Z,"BUTTON",{class:!0});var O=E(g);re(b.$$.fragment,O),O.forEach(d),Z.forEach(d),D.forEach(d),this.h()},h(){var I,D,V;u(l,"crossorigin","anonymous"),u(l,"alt","model profile"),u(l,"class","size-5 max-w-[28px] object-cover rounded-full"),ul(l.src,n=((V=(D=(I=s[13].find(s[48]))==null?void 0:I.info)==null?void 0:D.meta)==null?void 0:V.profile_image_url)??(s[24].language==="dg-DG"?"/doge.png":`${wl}/static/favicon.png`))||u(l,"src",n),u(a,"class","font-medium"),u(t,"class","flex items-center gap-2 text-sm dark:text-gray-500"),u(g,"class","flex items-center"),u(e,"class","px-3 py-2.5 text-left w-full flex justify-between items-center absolute bottom-0 left-0 right-0 bg-gradient-to-t from-50% from-white dark:from-gray-900")},m(I,D){B(I,e,D),m(e,t),m(t,l),m(t,r),m(t,o),m(o,i),m(o,a),m(a,c),m(e,h),m(e,v),m(v,g),oe(b,g,null),_=!0,p||(w=fe(g,"click",s[49]),p=!0)},p(I,D){var V,M,N;(!_||D[0]&16785409&&!ul(l.src,n=((N=(M=(V=I[13].find(I[48]))==null?void 0:V.info)==null?void 0:M.meta)==null?void 0:N.profile_image_url)??(I[24].language==="dg-DG"?"/doge.png":`${wl}/static/favicon.png`)))&&u(l,"src",n),(!_||D[0]&1)&&f!==(f=I[0].name+"")&&ye(c,f)},i(I){_||(H(b.$$.fragment,I),_=!0)},o(I){L(b.$$.fragment,I),_=!1},d(I){I&&d(e),ie(b),p=!1,w()}}}function hi(s){let e,t,l,n,r,o,i,a,f,c,h,v,g,b=s[11].length==0||s[11].at(-1).done==!0,_,p,w,I,D,V,M,N,Z,O=s[3].length>0&&Ks(s);function G(U){s[62](U)}function A(U){s[63](U)}let j={tools:s[26].reduce(s[59],{}),uploadFilesHandler:s[60],onClose:s[61],$$slots:{default:[vi]},$$scope:{ctx:s}};s[5]!==void 0&&(j.webSearchEnabled=s[5]),s[4]!==void 0&&(j.selectedToolIds=s[4]),o=new $o({props:j}),be.push(()=>Me(o,"webSearchEnabled",G)),be.push(()=>Me(o,"selectedToolIds",A));let q=b&&$s(s);const J=[ki,wi],x=[];function W(U,Q){return Q[0]&2048&&(I=null),I==null&&(I=U[11].length==0||U[11].at(-1).done==!0),I?0:1}return D=W(s,[-1,-1,-1]),V=x[D]=J[D](s),{c(){e=k("form"),t=k("div"),O&&O.c(),l=R(),n=k("div"),r=k("div"),ne(o.$$.fragment),f=R(),c=k("textarea"),v=R(),g=k("div"),q&&q.c(),p=R(),w=k("div"),V.c(),this.h()},l(U){e=y(U,"FORM",{class:!0});var Q=E(e);t=y(Q,"DIV",{class:!0,dir:!0});var Y=E(t);O&&O.l(Y),l=F(Y),n=y(Y,"DIV",{class:!0});var $=E(n);r=y($,"DIV",{class:!0});var te=E(r);re(o.$$.fragment,te),te.forEach(d),f=F($),c=y($,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),E(c).forEach(d),v=F($),g=y($,"DIV",{class:!0});var ue=E(g);q&&q.l(ue),ue.forEach(d),$.forEach(d),Y.forEach(d),p=F(Q),w=y(Q,"DIV",{class:!0});var De=E(w);V.l(De),De.forEach(d),Q.forEach(d),this.h()},h(){var U;u(r,"class","ml-0.5 self-end mb-1.5 flex space-x-1"),u(c,"id","chat-textarea"),u(c,"class","scrollbar-hidden bg-gray-50 dark:bg-gray-850 dark:text-gray-100 outline-none w-full py-3 px-1 rounded-xl resize-none h-[48px] svelte-141e0sl"),u(c,"placeholder",h=s[22]!==""?s[22]:s[24].t("Send a Message")),u(c,"rows","1"),u(g,"class","self-end mb-2 flex space-x-1 mr-1"),u(n,"class","flex"),u(t,"class","flex-1 flex flex-col relative w-full rounded-3xl px-1.5 bg-gray-50 dark:bg-gray-850 dark:text-gray-100"),u(t,"dir",_=((U=s[25])==null?void 0:U.chatDirection)??"LTR"),u(w,"class","flex items-end w-10"),u(e,"class","w-full flex gap-1.5")},m(U,Q){B(U,e,Q),m(e,t),O&&O.m(t,null),m(t,l),m(t,n),m(n,r),oe(o,r,null),m(n,f),m(n,c),s[64](c),Ol(c,s[1]),m(n,v),m(n,g),q&&q.m(g,null),m(e,p),m(e,w),x[D].m(w,null),M=!0,N||(Z=[fe(c,"input",s[65]),fe(c,"keypress",s[66]),fe(c,"keydown",s[67]),fe(c,"input",s[68]),fe(c,"focus",s[69]),fe(c,"paste",s[70]),fe(e,"submit",zn(s[74]))],N=!0)},p(U,Q){var te;U[3].length>0?O?(O.p(U,Q),Q[0]&8&&H(O,1)):(O=Ks(U),O.c(),H(O,1),O.m(t,l)):O&&(Ge(),L(O,1,1,()=>{O=null}),Qe());const Y={};Q[0]&201327616&&(Y.tools=U[26].reduce(U[59],{})),Q[0]&32768&&(Y.uploadFilesHandler=U[60]),Q[0]&4096&&(Y.onClose=U[61]),Q[2]&131072&&(Y.$$scope={dirty:Q,ctx:U}),!i&&Q[0]&32&&(i=!0,Y.webSearchEnabled=U[5],Te(()=>i=!1)),!a&&Q[0]&16&&(a=!0,Y.selectedToolIds=U[4],Te(()=>a=!1)),o.$set(Y),(!M||Q[0]&20971520&&h!==(h=U[22]!==""?U[22]:U[24].t("Send a Message")))&&u(c,"placeholder",h),Q[0]&2&&Ol(c,U[1]),Q[0]&2048&&(b=U[11].length==0||U[11].at(-1).done==!0),b?q?(q.p(U,Q),Q[0]&2048&&H(q,1)):(q=$s(U),q.c(),H(q,1),q.m(g,null)):q&&(Ge(),L(q,1,1,()=>{q=null}),Qe()),(!M||Q[0]&33554432&&_!==(_=((te=U[25])==null?void 0:te.chatDirection)??"LTR"))&&u(t,"dir",_);let $=D;D=W(U,Q),D===$?x[D].p(U,Q):(Ge(),L(x[$],1,1,()=>{x[$]=null}),Qe(),V=x[D],V?V.p(U,Q):(V=x[D]=J[D](U),V.c()),H(V,1),V.m(w,null))},i(U){M||(H(O),H(o.$$.fragment,U),H(q),H(V),M=!0)},o(U){L(O),L(o.$$.fragment,U),L(q),L(V),M=!1},d(U){U&&d(e),O&&O.d(),ie(o),s[64](null),q&&q.d(),x[D].d(),N=!1,jt(Z)}}}function mi(s){let e,t,l;function n(o){s[53](o)}let r={};return s[14]!==void 0&&(r.recording=s[14]),e=new ii({props:r}),be.push(()=>Me(e,"recording",n)),e.$on("cancel",s[54]),e.$on("confirm",s[55]),{c(){ne(e.$$.fragment)},l(o){re(e.$$.fragment,o)},m(o,i){oe(e,o,i),l=!0},p(o,i){const a={};!t&&i[0]&16384&&(t=!0,a.recording=o[14],Te(()=>t=!1)),e.$set(a)},i(o){l||(H(e.$$.fragment,o),l=!0)},o(o){L(e.$$.fragment,o),l=!1},d(o){ie(e,o)}}}function Ks(s){let e,t,l=pt(s[3]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Xs(Js(s,l,o));const r=o=>L(n[o],1,1,()=>{n[o]=null});return{c(){e=k("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0});var i=E(e);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(d),this.h()},h(){u(e,"class","mx-1 mt-2.5 mb-1 flex flex-wrap gap-2")},m(o,i){B(o,e,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,i){if(i[0]&25166345){l=pt(o[3]);let a;for(a=0;a<l.length;a+=1){const f=Js(o,l,a);n[a]?(n[a].p(f,i),H(n[a],1)):(n[a]=Xs(f),n[a].c(),H(n[a],1),n[a].m(e,null))}for(Ge(),a=l.length;a<n.length;a+=1)r(a);Qe()}},i(o){if(!t){for(let i=0;i<l.length;i+=1)H(n[i]);t=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)L(n[i]);t=!1},d(o){o&&d(e),Xt(n,o)}}}function gi(s){let e,t;function l(){return s[58](s[78])}return e=new Dn({props:{name:s[76].name,type:s[76].type,status:s[76].status,dismissible:!0}}),e.$on("dismiss",l),{c(){ne(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,r){oe(e,n,r),t=!0},p(n,r){s=n;const o={};r[0]&8&&(o.name=s[76].name),r[0]&8&&(o.type=s[76].type),r[0]&8&&(o.status=s[76].status),e.$set(o)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){ie(e,n)}}}function pi(s){let e,t,l,n,r,o,i,a,f='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,h,v,g,b=(s[0]?s[23].length===0:s[9].length!==s[23].length)&&Ys(s);function _(){return s[57](s[78])}return{c(){e=k("div"),t=k("div"),l=k("img"),r=R(),b&&b.c(),o=R(),i=k("div"),a=k("button"),a.innerHTML=f,c=R(),this.h()},l(p){e=y(p,"DIV",{class:!0});var w=E(e);t=y(w,"DIV",{class:!0});var I=E(t);l=y(I,"IMG",{src:!0,alt:!0,class:!0}),r=F(I),b&&b.l(I),I.forEach(d),o=F(w),i=y(w,"DIV",{class:!0});var D=E(i);a=y(D,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Je(a)!=="svelte-l5shih"&&(a.innerHTML=f),D.forEach(d),c=F(w),w.forEach(d),this.h()},h(){ul(l.src,n=s[76].url)||u(l,"src",n),u(l,"alt","input"),u(l,"class","h-16 w-16 rounded-xl object-cover"),u(t,"class","relative"),u(a,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),u(a,"type","button"),u(i,"class","absolute -top-1 -right-1"),u(e,"class","relative group")},m(p,w){B(p,e,w),m(e,t),m(t,l),m(t,r),b&&b.m(t,null),m(e,o),m(e,i),m(i,a),m(e,c),h=!0,v||(g=fe(a,"click",_),v=!0)},p(p,w){s=p,(!h||w[0]&8&&!ul(l.src,n=s[76].url))&&u(l,"src",n),(s[0]?s[23].length===0:s[9].length!==s[23].length)?b?(b.p(s,w),w[0]&8389121&&H(b,1)):(b=Ys(s),b.c(),H(b,1),b.m(t,null)):b&&(Ge(),L(b,1,1,()=>{b=null}),Qe())},i(p){h||(H(b),h=!0)},o(p){L(b),h=!1},d(p){p&&d(e),b&&b.d(),v=!1,g()}}}function Ys(s){let e,t;return e=new Zt({props:{className:" absolute top-1 left-1",content:s[24].t("{{ models }}",{models:[...s[0]?[s[0]]:s[9]].filter(s[56]).join(", ")}),$$slots:{default:[_i]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,n){const r={};n[0]&25166337&&(r.content=l[24].t("{{ models }}",{models:[...l[0]?[l[0]]:l[9]].filter(l[56]).join(", ")})),n[2]&131072&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function _i(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=E(e);t=ze(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","size-4 fill-yellow-300")},m(l,n){B(l,e,n),m(e,t)},p:Ve,d(l){l&&d(e)}}}function Xs(s){let e,t,l,n;const r=[pi,gi],o=[];function i(a,f){return a[76].type==="image"?0:1}return e=i(s),t=o[e]=r[e](s),{c(){t.c(),l=xe()},l(a){t.l(a),l=xe()},m(a,f){o[e].m(a,f),B(a,l,f),n=!0},p(a,f){let c=e;e=i(a),e===c?o[e].p(a,f):(Ge(),L(o[c],1,1,()=>{o[c]=null}),Qe(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),H(t,1),t.m(l.parentNode,l))},i(a){n||(H(t),n=!0)},o(a){L(t),n=!1},d(a){a&&d(l),o[e].d(a)}}}function vi(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-5"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>';return{c(){e=k("button"),e.innerHTML=t,this.h()},l(l){e=y(l,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Je(e)!=="svelte-1948p7i"&&(e.innerHTML=t),this.h()},h(){u(e,"class","bg-gray-50 hover:bg-gray-100 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-2 outline-none focus:outline-none"),u(e,"type","button")},m(l,n){B(l,e,n)},p:Ve,d(l){l&&d(e)}}}function $s(s){let e,t;return e=new Zt({props:{content:s[24].t("Record voice"),$$slots:{default:[bi]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,n){const r={};n[0]&16777216&&(r.content=l[24].t("Record voice")),n[0]&16793600|n[2]&131072&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function bi(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 translate-y-[0.5px]"><path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"></path><path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"></path></svg>',l,n;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(r){e=y(r,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),Je(e)!=="svelte-47fjze"&&(e.innerHTML=t),this.h()},h(){u(e,"id","voice-input-button"),u(e,"class","text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-full p-1.5 mr-0.5 self-center"),u(e,"type","button")},m(r,o){B(r,e,o),l||(n=fe(e,"click",s[71]),l=!0)},p:Ve,d(r){r&&d(e),l=!1,n()}}}function wi(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',n,r;return{c(){e=k("div"),t=k("button"),t.innerHTML=l,this.h()},l(o){e=y(o,"DIV",{class:!0});var i=E(e);t=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(t)!=="svelte-5uu99u"&&(t.innerHTML=l),i.forEach(d),this.h()},h(){u(t,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5"),u(e,"class","flex items-center mb-1.5")},m(o,i){B(o,e,i),m(e,t),n||(r=fe(t,"click",s[73]),n=!0)},p:Ve,i:Ve,o:Ve,d(o){o&&d(e),n=!1,r()}}}function ki(s){let e,t,l,n;const r=[Ei,yi],o=[];function i(a,f){return a[1]===""?0:1}return e=i(s),t=o[e]=r[e](s),{c(){t.c(),l=xe()},l(a){t.l(a),l=xe()},m(a,f){o[e].m(a,f),B(a,l,f),n=!0},p(a,f){let c=e;e=i(a),e===c?o[e].p(a,f):(Ge(),L(o[c],1,1,()=>{o[c]=null}),Qe(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),H(t,1),t.m(l.parentNode,l))},i(a){n||(H(t),n=!0)},o(a){L(t),n=!1},d(a){a&&d(l),o[e].d(a)}}}function yi(s){let e,t,l;return t=new Zt({props:{content:s[24].t("Send message"),$$slots:{default:[Ii]},$$scope:{ctx:s}}}),{c(){e=k("div"),ne(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=E(e);re(t.$$.fragment,r),r.forEach(d),this.h()},h(){u(e,"class","flex items-center mb-1")},m(n,r){B(n,e,r),oe(t,e,null),l=!0},p(n,r){const o={};r[0]&16777216&&(o.content=n[24].t("Send message")),r[0]&2|r[2]&131072&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){L(t.$$.fragment,n),l=!1},d(n){n&&d(e),ie(t)}}}function Ei(s){let e,t,l;return t=new Zt({props:{content:s[24].t("Call"),$$slots:{default:[Di]},$$scope:{ctx:s}}}),{c(){e=k("div"),ne(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=E(e);re(t.$$.fragment,r),r.forEach(d),this.h()},h(){u(e,"class","flex items-center mb-1")},m(n,r){B(n,e,r),oe(t,e,null),l=!0},p(n,r){const o={};r[0]&16777216&&(o.content=n[24].t("Call")),r[0]&553648640|r[2]&131072&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){L(t.$$.fragment,n),l=!1},d(n){n&&d(e),ie(t)}}}function Ii(s){let e,t,l,n,r;return{c(){e=k("button"),t=Ne("svg"),l=Ne("path"),this.h()},l(o){e=y(o,"BUTTON",{id:!0,class:!0,type:!0});var i=E(e);t=ze(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=E(t);l=ze(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(l).forEach(d),a.forEach(d),i.forEach(d),this.h()},h(){u(l,"fill-rule","evenodd"),u(l,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),u(l,"clip-rule","evenodd"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"viewBox","0 0 16 16"),u(t,"fill","currentColor"),u(t,"class","size-6"),u(e,"id","send-message-button"),u(e,"class",n=(s[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center"),u(e,"type","submit"),e.disabled=r=s[1]===""},m(o,i){B(o,e,i),m(e,t),m(t,l)},p(o,i){i[0]&2&&n!==(n=(o[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center")&&u(e,"class",n),i[0]&2&&r!==(r=o[1]==="")&&(e.disabled=r)},d(o){o&&d(e)}}}function Di(s){let e,t,l,n,r;return t=new li({props:{className:"size-6"}}),{c(){e=k("button"),ne(t.$$.fragment),this.h()},l(o){e=y(o,"BUTTON",{class:!0,type:!0});var i=E(e);re(t.$$.fragment,i),i.forEach(d),this.h()},h(){u(e,"class","text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-full p-2 self-center"),u(e,"type","button")},m(o,i){B(o,e,i),oe(t,e,null),l=!0,n||(r=fe(e,"click",s[72]),n=!0)},p:Ve,i(o){l||(H(t.$$.fragment,o),l=!0)},o(o){L(t.$$.fragment,o),l=!1},d(o){o&&d(e),ie(t),n=!1,r()}}}function Si(s){let e,t,l,n,r,o,i,a,f,c,h,v,g,b,_,p,w,I,D,V,M,N,Z,O,G,A,j,q=s[24].t("LLMs can make mistakes. Verify important information.")+"",J,x,W,U,Q;e=new fi({props:{show:s[20]}});let Y=s[2]===!1&&s[11].length>0&&Gs(s);const $=[di,ui],te=[];function ue(se,he){return he[0]&2&&(f=null),he[0]&2&&(c=null),f==null&&(f=se[1].charAt(0)==="/"),f?0:(c==null&&(c=se[1].charAt(0)==="#"),c?1:-1)}~(h=ue(s,[-1,-1,-1]))&&(v=te[h]=$[h](s));function De(se){s[45](se)}function Ie(se){s[46](se)}let ae={messages:s[11]};s[1]!==void 0&&(ae.prompt=s[1]),s[22]!==void 0&&(ae.chatInputPlaceholder=s[22]),b=new Lo({props:ae}),s[44](b),be.push(()=>Me(b,"prompt",De)),be.push(()=>Me(b,"chatInputPlaceholder",Ie)),b.$on("select",s[47]);let C=s[0]!==void 0&&Qs(s);const K=[mi,hi],Le=[];function Ue(se,he){return se[14]?0:1}return O=Ue(s),G=Le[O]=K[O](s),{c(){ne(e.$$.fragment),t=R(),l=k("div"),n=k("div"),r=k("div"),o=k("div"),Y&&Y.c(),i=R(),a=k("div"),v&&v.c(),g=R(),ne(b.$$.fragment),w=R(),C&&C.c(),I=R(),D=k("div"),V=k("div"),M=k("div"),N=k("input"),Z=R(),G.c(),A=R(),j=k("div"),J=pe(q),this.h()},l(se){re(e.$$.fragment,se),t=F(se),l=y(se,"DIV",{class:!0});var he=E(l);n=y(he,"DIV",{class:!0});var Re=E(n);r=y(Re,"DIV",{class:!0});var Ke=E(r);o=y(Ke,"DIV",{class:!0});var $e=E(o);Y&&Y.l($e),$e.forEach(d),i=F(Ke),a=y(Ke,"DIV",{class:!0});var rt=E(a);v&&v.l(rt),g=F(rt),re(b.$$.fragment,rt),w=F(rt),C&&C.l(rt),rt.forEach(d),Ke.forEach(d),Re.forEach(d),I=F(he),D=y(he,"DIV",{class:!0});var st=E(D);V=y(st,"DIV",{class:!0});var _t=E(V);M=y(_t,"DIV",{class:!0});var dt=E(M);N=y(dt,"INPUT",{type:!0}),Z=F(dt),G.l(dt),A=F(dt),j=y(dt,"DIV",{class:!0});var mt=E(j);J=_e(mt,q),mt.forEach(d),dt.forEach(d),_t.forEach(d),st.forEach(d),he.forEach(d),this.h()},h(){u(o,"class","relative"),u(a,"class","w-full relative"),u(r,"class","flex flex-col max-w-6xl px-2.5 md:px-6 w-full"),u(n,"class","-mb-0.5 mx-auto inset-x-0 bg-transparent flex justify-center"),u(N,"type","file"),N.hidden=!0,N.multiple=!0,u(j,"class","mt-1.5 text-xs text-gray-500 text-center line-clamp-1"),u(M,"class","pb-2"),u(V,"class","max-w-6xl px-2.5 md:px-6 mx-auto inset-x-0"),u(D,"class",x=s[6]?"bg-transparent":"bg-white dark:bg-gray-900"),u(l,"class","w-full font-primary")},m(se,he){oe(e,se,he),B(se,t,he),B(se,l,he),m(l,n),m(n,r),m(r,o),Y&&Y.m(o,null),m(r,i),m(r,a),~h&&te[h].m(a,null),m(a,g),oe(b,a,null),m(a,w),C&&C.m(a,null),m(l,I),m(l,D),m(D,V),m(V,M),m(M,N),s[50](N),m(M,Z),Le[O].m(M,null),m(M,A),m(M,j),m(j,J),W=!0,U||(Q=[fe(N,"change",s[51]),fe(N,"change",s[52])],U=!0)},p(se,he){const Re={};he[0]&1048576&&(Re.show=se[20]),e.$set(Re),se[2]===!1&&se[11].length>0?Y?Y.p(se,he):(Y=Gs(se),Y.c(),Y.m(o,null)):Y&&(Y.d(1),Y=null);let Ke=h;h=ue(se,he),h===Ke?~h&&te[h].p(se,he):(v&&(Ge(),L(te[Ke],1,1,()=>{te[Ke]=null}),Qe()),~h?(v=te[h],v?v.p(se,he):(v=te[h]=$[h](se),v.c()),H(v,1),v.m(a,g)):v=null);const $e={};he[0]&2048&&($e.messages=se[11]),!_&&he[0]&2&&(_=!0,$e.prompt=se[1],Te(()=>_=!1)),!p&&he[0]&4194304&&(p=!0,$e.chatInputPlaceholder=se[22],Te(()=>p=!1)),b.$set($e),se[0]!==void 0?C?(C.p(se,he),he[0]&1&&H(C,1)):(C=Qs(se),C.c(),H(C,1),C.m(a,null)):C&&(Ge(),L(C,1,1,()=>{C=null}),Qe());let rt=O;O=Ue(se),O===rt?Le[O].p(se,he):(Ge(),L(Le[rt],1,1,()=>{Le[rt]=null}),Qe(),G=Le[O],G?G.p(se,he):(G=Le[O]=K[O](se),G.c()),H(G,1),G.m(M,A)),(!W||he[0]&16777216)&&q!==(q=se[24].t("LLMs can make mistakes. Verify important information.")+"")&&ye(J,q),(!W||he[0]&64&&x!==(x=se[6]?"bg-transparent":"bg-white dark:bg-gray-900"))&&u(D,"class",x)},i(se){W||(H(e.$$.fragment,se),H(v),H(b.$$.fragment,se),H(C),H(G),W=!0)},o(se){L(e.$$.fragment,se),L(v),L(b.$$.fragment,se),L(C),L(G),W=!1},d(se){se&&(d(t),d(l)),ie(e,se),Y&&Y.d(),~h&&te[h].d(),s[44](null),ie(b),C&&C.d(),s[50](null),Le[O].d(),U=!1,jt(Q)}}}function Ci(s,e,t){let l,n,r,o,i,a,f;we(s,El,S=>t(13,n=S)),we(s,Kt,S=>t(25,r=S)),we(s,Wn,S=>t(26,o=S)),we(s,ql,S=>t(27,i=S)),we(s,Sn,S=>t(28,a=S)),we(s,Il,S=>t(29,f=S));const c=kt("i18n");we(s,c,S=>t(24,l=S));let{transparentBackground:h=!1}=e,{submitPrompt:v}=e,{stopResponse:g}=e,{autoScroll:b=!0}=e,{atSelectedModel:_}=e,{selectedModels:p}=e,w=!1,I,D,V,M,N,Z,O=!1,G=null,A="",{files:j=[]}=e,{availableToolIds:q=[]}=e,{selectedToolIds:J=[]}=e,{webSearchEnabled:x=!1}=e,{prompt:W=""}=e,{messages:U=[]}=e,Q=[];const Y=()=>{const S=document.getElementById("messages-container");S.scrollTop=S.scrollHeight},$=async S=>{if(console.log(S),["audio/mpeg","audio/wav"].includes(S.type)){const Se=await Gl(localStorage.token,S).catch(Ce=>(Be.error(Ce),null));if(Se){console.log(Se);const Ce=new Blob([Se.text],{type:"text/plain"});S=Jl(Ce,`${S.name}.txt`)}}const ke=await nr(localStorage.token,S).catch(Se=>(Be.error(Se),null));if(ke){const Se={type:"file",file:ke,id:ke.id,url:`${Zn}/files/${ke.id}`,name:S.name,collection_name:"",status:"uploaded",error:""};t(3,j=[...j,Se]),xn.includes(S.type)||qn.includes(S.name.split(".").at(-1))||Be.error(l.t("Unknown file type '{{file_type}}'. Proceeding with the file upload anyway.",{file_type:S.type})),te(Se)}},te=async S=>{try{const ke=await rr(localStorage.token,S.id);ke&&(S.status="processed",S.collection_name=ke.collection_name,t(3,j))}catch(ke){Be.error(ke),S.status="processed",t(3,j)}},ue=async S=>{console.log(S);const ke={type:"doc",name:S,collection_name:"",status:!1,url:S,error:""};try{t(3,j=[...j,ke]);const Se=await or(localStorage.token,"",S);Se&&(ke.status="processed",ke.collection_name=Se.collection_name,t(3,j))}catch(Se){t(3,j=j.filter(Ce=>Ce.name!==S)),Be.error(Se)}},De=async S=>{console.log(S);const ke={type:"doc",name:S,collection_name:"",status:!1,url:S,error:""};try{t(3,j=[...j,ke]);const Se=await ir(localStorage.token,S);Se&&(ke.status="processed",ke.collection_name=Se.collection_name,t(3,j))}catch(Se){t(3,j=j.filter(Ce=>Ce.name!==S)),Be.error(Se)}};yl(()=>{window.setTimeout(()=>I==null?void 0:I.focus(),0);const S=document.querySelector("body"),ke=ft=>{ft.key==="Escape"&&(console.log("Escape"),t(20,O=!1))},Se=ft=>{ft.preventDefault(),t(20,O=!0)},Ce=()=>{t(20,O=!1)},nt=async ft=>{var Dt,Bt;if(ft.preventDefault(),console.log(ft),(Dt=ft.dataTransfer)!=null&&Dt.files){const Rt=Array.from((Bt=ft.dataTransfer)==null?void 0:Bt.files);Rt&&Rt.length>0?Rt.forEach(Lt=>{if(console.log(Lt,Lt.name.split(".").at(-1)),["image/gif","image/webp","image/jpeg","image/png"].includes(Lt.type)){if(Q.length===0){Be.error(l.t("Selected model(s) do not support image inputs"));return}let el=new FileReader;el.onload=ol=>{t(3,j=[...j,{type:"image",url:`${ol.target.result}`}])},el.readAsDataURL(Lt)}else $(Lt)}):Be.error(l.t("File not found."))}t(20,O=!1)};return window.addEventListener("keydown",ke),S==null||S.addEventListener("dragover",Se),S==null||S.addEventListener("drop",nt),S==null||S.addEventListener("dragleave",Ce),()=>{window.removeEventListener("keydown",ke),S==null||S.removeEventListener("dragover",Se),S==null||S.removeEventListener("drop",nt),S==null||S.removeEventListener("dragleave",Ce)}});const Ie=()=>{t(2,b=!0),Y()};function ae(S){be[S?"unshift":"push"](()=>{V=S,t(16,V)})}function C(S){W=S,t(1,W)}function K(S){j=S,t(3,j)}function Le(S){be[S?"unshift":"push"](()=>{M=S,t(17,M)})}function Ue(S){W=S,t(1,W)}const se=S=>{console.log(S),De(S.detail)},he=S=>{console.log(S),ue(S.detail)},Re=S=>{var ke;console.log(S),t(3,j=[...j,{type:((ke=S==null?void 0:S.detail)==null?void 0:ke.type)??"file",...S.detail,status:"processed"}])};function Ke(S){be[S?"unshift":"push"](()=>{N=S,t(18,N)})}function $e(S){W=S,t(1,W)}function rt(S){A=S,t(22,A)}const st=S=>{t(0,_=S.detail),I==null||I.focus()},_t=S=>S.id===_.id,dt=()=>{t(0,_=void 0)};function mt(S){be[S?"unshift":"push"](()=>{D=S,t(15,D)})}function yt(){Z=this.files,t(19,Z)}const ht=async()=>{Z&&Z.length>0?Array.from(Z).forEach(ke=>{if(["image/gif","image/webp","image/jpeg","image/png"].includes(ke.type)){if(Q.length===0){Be.error(l.t("Selected model(s) do not support image inputs"));return}let Se=new FileReader;Se.onload=Ce=>{t(3,j=[...j,{type:"image",url:`${Ce.target.result}`}])},Se.readAsDataURL(ke)}else $(ke)}):Be.error(l.t("File not found.")),t(15,D.value="",D)};function Pt(S){w=S,t(14,w)}const xt=async()=>{var S;t(14,w=!1),await Pe(),(S=document.getElementById("chat-textarea"))==null||S.focus()},Et=async S=>{var Se;const ke=S.detail;t(1,W=`${W}${ke} `),t(14,w=!1),await Pe(),(Se=document.getElementById("chat-textarea"))==null||Se.focus(),((r==null?void 0:r.speechAutoSend)??!1)&&v(W)},X=S=>!Q.includes(S),Ee=S=>{j.splice(S,1),t(3,j)},de=S=>{j.splice(S,1),t(3,j)},ge=(S,ke,Se,Ce)=>((q.includes(ke.id)||((i==null?void 0:i.role)??"user")==="admin")&&(S[ke.id]={name:ke.name,description:ke.meta.description,enabled:!1}),S),P=()=>{D.click()},le=async()=>{await Pe(),I==null||I.focus()};function qe(S){x=S,t(5,x)}function We(S){J=S,t(4,J)}function it(S){be[S?"unshift":"push"](()=>{I=S,t(12,I),t(1,W)})}function ct(){W=this.value,t(1,W)}const vt=S=>{(!a||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(S.key==="Enter"&&!S.shiftKey&&S.preventDefault(),W!==""&&S.key==="Enter"&&!S.shiftKey&&v(W))},It=async S=>{var Se;const ke=S.ctrlKey||S.metaKey;if(W===""&&ke&&S.key.toLowerCase()==="r"){S.preventDefault(),console.log("regenerate");const Ce=[...document.getElementsByClassName("regenerate-response-button")].at(-1);Ce==null||Ce.click()}if(W===""&&S.key=="ArrowUp"){S.preventDefault();const Ce=[...document.getElementsByClassName("user-message")].at(-1),nt=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(Ce),Ce.scrollIntoView({block:"center"}),nt==null||nt.click()}if(["/","#","@"].includes(W.charAt(0))&&S.key==="ArrowUp"&&(S.preventDefault(),(V||M||N).selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(W.charAt(0))&&S.key==="ArrowDown"&&(S.preventDefault(),(V||M||N).selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(W.charAt(0))&&S.key==="Enter"){S.preventDefault();const Ce=[...document.getElementsByClassName("selected-command-option-button")].at(-1);S.shiftKey?t(1,W=`${W}
`):Ce?Ce==null||Ce.click():(Se=document.getElementById("send-message-button"))==null||Se.click()}if(["/","#","@"].includes(W.charAt(0))&&S.key==="Tab"){S.preventDefault();const Ce=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ce==null||Ce.click()}else if(S.key==="Tab"){const Ce=Tn(W);if(Ce.length>0){const nt=Ce.at(0),ft=W;t(1,W=W.substring(0,(nt==null?void 0:nt.endIndex)+1)),await Pe(),S.target.scrollTop=S.target.scrollHeight,t(1,W=ft),await Pe(),S.preventDefault(),S.target.setSelectionRange(nt==null?void 0:nt.startIndex,nt.endIndex+1)}S.target.style.height="",S.target.style.height=Math.min(S.target.scrollHeight,200)+"px"}S.key==="Escape"&&(console.log("Escape"),t(0,_=void 0))},$t=S=>{S.target.style.height="",S.target.style.height=Math.min(S.target.scrollHeight,200)+"px",t(21,G=null)},tl=S=>{S.target.style.height="",S.target.style.height=Math.min(S.target.scrollHeight,200)+"px"},nl=S=>{const ke=S.clipboardData||window.clipboardData;if(ke&&ke.items){for(const Se of ke.items)if(Se.type.indexOf("image")!==-1){const Ce=Se.getAsFile(),nt=new FileReader;nt.onload=function(ft){t(3,j=[...j,{type:"image",url:`${ft.target.result}`}])},nt.readAsDataURL(Ce)}}},qt=async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(ke){return Be.error(l.t("Permission denied when accessing microphone: {{error}}",{error:ke})),null})&&t(14,w=!0)}catch{Be.error(l.t("Permission denied when accessing microphone"))}},dl=async()=>{if(p.length>1){Be.error(l.t("Select only one model to call"));return}if(f.audio.stt.engine==="web"){Be.error(l.t("Call feature is not supported when using Web STT engine"));return}try{await navigator.mediaDevices.getUserMedia({audio:!0}),jl.set(!0)}catch{Be.error(l.t("Permission denied when accessing media devices"))}},rl=()=>{g()},Qt=()=>{v(W)};return s.$$set=S=>{"transparentBackground"in S&&t(6,h=S.transparentBackground),"submitPrompt"in S&&t(7,v=S.submitPrompt),"stopResponse"in S&&t(8,g=S.stopResponse),"autoScroll"in S&&t(2,b=S.autoScroll),"atSelectedModel"in S&&t(0,_=S.atSelectedModel),"selectedModels"in S&&t(9,p=S.selectedModels),"files"in S&&t(3,j=S.files),"availableToolIds"in S&&t(10,q=S.availableToolIds),"selectedToolIds"in S&&t(4,J=S.selectedToolIds),"webSearchEnabled"in S&&t(5,x=S.webSearchEnabled),"prompt"in S&&t(1,W=S.prompt),"messages"in S&&t(11,U=S.messages)},s.$$.update=()=>{s.$$.dirty[0]&8705&&t(23,Q=[..._?[_]:p].filter(S=>{var ke,Se,Ce,nt;return((nt=(Ce=(Se=(ke=n.find(ft=>ft.id===S))==null?void 0:ke.info)==null?void 0:Se.meta)==null?void 0:Ce.capabilities)==null?void 0:nt.vision)??!0})),s.$$.dirty[0]&4098&&W&&I&&(t(12,I.style.height="",I),t(12,I.style.height=Math.min(I.scrollHeight,200)+"px",I))},[_,W,b,j,J,x,h,v,g,p,q,U,I,n,w,D,V,M,N,Z,O,G,A,Q,l,r,o,i,a,f,c,Y,$,ue,De,Ie,ae,C,K,Le,Ue,se,he,Re,Ke,$e,rt,st,_t,dt,mt,yt,ht,Pt,xt,Et,X,Ee,de,ge,P,le,qe,We,it,ct,vt,It,$t,tl,nl,qt,dl,rl,Qt]}class Ti extends tt{constructor(e){super(),lt(this,e,Ci,Si,et,{transparentBackground:6,submitPrompt:7,stopResponse:8,autoScroll:2,atSelectedModel:0,selectedModels:9,files:3,availableToolIds:10,selectedToolIds:4,webSearchEnabled:5,prompt:1,messages:11},null,[-1,-1,-1])}}function en(s,e,t){const l=s.slice();return l[12]=e[t],l[13]=e,l[14]=t,l}function Mi(s){let e,t,l;return t=new Zt({props:{content:s[4].t("Remove Model"),$$slots:{default:[Hi]},$$scope:{ctx:s}}}),{c(){e=k("div"),ne(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=E(e);re(t.$$.fragment,r),r.forEach(d),this.h()},h(){u(e,"class","self-center disabled:text-gray-600 disabled:hover:text-gray-600 mr-2")},m(n,r){B(n,e,r),oe(t,e,null),l=!0},p(n,r){const o={};r&16&&(o.content=n[4].t("Remove Model")),r&32771&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){L(t.$$.fragment,n),l=!1},d(n){n&&d(e),ie(t)}}}function Vi(s){let e,t,l;return t=new Zt({props:{content:s[4].t("Add Model"),$$slots:{default:[Bi]},$$scope:{ctx:s}}}),{c(){e=k("div"),ne(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=E(e);re(t.$$.fragment,r),r.forEach(d),this.h()},h(){u(e,"class","self-center mr-2 disabled:text-gray-600 disabled:hover:text-gray-600")},m(n,r){B(n,e,r),oe(t,e,null),l=!0},p(n,r){const o={};r&16&&(o.content=n[4].t("Add Model")),r&32771&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){L(t.$$.fragment,n),l=!1},d(n){n&&d(e),ie(t)}}}function Hi(s){let e,t,l,n,r;function o(){return s[10](s[14])}return{c(){e=k("button"),t=Ne("svg"),l=Ne("path"),this.h()},l(i){e=y(i,"BUTTON",{});var a=E(e);t=ze(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var f=E(t);l=ze(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(l).forEach(d),f.forEach(d),a.forEach(d),this.h()},h(){u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"d","M19.5 12h-15"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(t,"stroke-width","2"),u(t,"stroke","currentColor"),u(t,"class","size-3.5"),e.disabled=s[1]},m(i,a){B(i,e,a),m(e,t),m(t,l),n||(r=fe(e,"click",o),n=!0)},p(i,a){s=i,a&2&&(e.disabled=s[1])},d(i){i&&d(e),n=!1,r()}}}function Bi(s){let e,t,l,n,r;return{c(){e=k("button"),t=Ne("svg"),l=Ne("path"),this.h()},l(o){e=y(o,"BUTTON",{class:!0});var i=E(e);t=ze(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=E(t);l=ze(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(l).forEach(d),a.forEach(d),i.forEach(d),this.h()},h(){u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"d","M12 6v12m6-6H6"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(t,"stroke-width","2"),u(t,"stroke","currentColor"),u(t,"class","size-3.5"),u(e,"class",""),e.disabled=s[1]},m(o,i){B(o,e,i),m(e,t),m(t,l),n||(r=fe(e,"click",s[9]),n=!0)},p(o,i){i&2&&(e.disabled=o[1])},d(o){o&&d(e),n=!1,r()}}}function tn(s){let e,t,l,n,r,o,i,a,f,c;function h(p){s[8](p,s[12],s[13],s[14])}let v={placeholder:s[4].t("Select a model"),items:s[3].map(sn)};s[12]!==void 0&&(v.value=s[12]),n=new Dr({props:v}),be.push(()=>Me(n,"value",h));const g=[Vi,Mi],b=[];function _(p,w){return p[14]===0?0:1}return i=_(s),a=b[i]=g[i](s),{c(){e=k("div"),t=k("div"),l=k("div"),ne(n.$$.fragment),o=R(),a.c(),f=R(),this.h()},l(p){e=y(p,"DIV",{class:!0});var w=E(e);t=y(w,"DIV",{class:!0});var I=E(t);l=y(I,"DIV",{class:!0});var D=E(l);re(n.$$.fragment,D),D.forEach(d),I.forEach(d),o=F(w),a.l(w),f=F(w),w.forEach(d),this.h()},h(){u(l,"class","mr-1 max-w-full"),u(t,"class","overflow-hidden w-full"),u(e,"class","flex w-full max-w-fit")},m(p,w){B(p,e,w),m(e,t),m(t,l),oe(n,l,null),m(e,o),b[i].m(e,null),m(e,f),c=!0},p(p,w){s=p;const I={};w&16&&(I.placeholder=s[4].t("Select a model")),w&8&&(I.items=s[3].map(sn)),!r&&w&1&&(r=!0,I.value=s[12],Te(()=>r=!1)),n.$set(I),a.p(s,w)},i(p){c||(H(n.$$.fragment,p),H(a),c=!0)},o(p){L(n.$$.fragment,p),L(a),c=!1},d(p){p&&d(e),ie(n),b[i].d()}}}function ln(s){let e,t,l=s[4].t("Set as default")+"",n,r,o;return{c(){e=k("div"),t=k("button"),n=pe(l),this.h()},l(i){e=y(i,"DIV",{class:!0});var a=E(e);t=y(a,"BUTTON",{});var f=E(t);n=_e(f,l),f.forEach(d),a.forEach(d),this.h()},h(){u(e,"class","text-left mt-0.5 ml-1 text-[0.7rem] text-gray-500 font-primary")},m(i,a){B(i,e,a),m(e,t),m(t,n),r||(o=fe(t,"click",s[7]),r=!0)},p(i,a){a&16&&l!==(l=i[4].t("Set as default")+"")&&ye(n,l)},d(i){i&&d(e),r=!1,o()}}}function Li(s){let e,t,l,n,r=pt(s[0]),o=[];for(let f=0;f<r.length;f+=1)o[f]=tn(en(s,r,f));const i=f=>L(o[f],1,1,()=>{o[f]=null});let a=s[2]&&!s[5]&&ln(s);return{c(){e=k("div");for(let f=0;f<o.length;f+=1)o[f].c();t=R(),a&&a.c(),l=xe(),this.h()},l(f){e=y(f,"DIV",{class:!0});var c=E(e);for(let h=0;h<o.length;h+=1)o[h].l(c);c.forEach(d),t=F(f),a&&a.l(f),l=xe(),this.h()},h(){u(e,"class","flex flex-col w-full items-start")},m(f,c){B(f,e,c);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);B(f,t,c),a&&a.m(f,c),B(f,l,c),n=!0},p(f,[c]){if(c&27){r=pt(f[0]);let h;for(h=0;h<r.length;h+=1){const v=en(f,r,h);o[h]?(o[h].p(v,c),H(o[h],1)):(o[h]=tn(v),o[h].c(),H(o[h],1),o[h].m(e,null))}for(Ge(),h=r.length;h<o.length;h+=1)i(h);Qe()}f[2]&&!f[5]?a?a.p(f,c):(a=ln(f),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},i(f){if(!n){for(let c=0;c<r.length;c+=1)H(o[c]);n=!0}},o(f){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)L(o[c]);n=!1},d(f){f&&(d(e),d(t),d(l)),Xt(o,f),a&&a.d(f)}}}const sn=s=>({value:s.id,label:s.name,model:s});function Ni(s,e,t){let l,n,r,o;we(s,El,_=>t(3,l=_)),we(s,Kt,_=>t(11,r=_)),we(s,Sn,_=>t(5,o=_));const i=kt("i18n");we(s,i,_=>t(4,n=_));let{selectedModels:a=[""]}=e,{disabled:f=!1}=e,{showSetDefault:c=!0}=e;const h=async()=>{if(a.filter(p=>p==="").length){Be.error(n.t("Choose a model before saving..."));return}Kt.set({...r,models:a}),await $n(localStorage.token,{ui:r}),Be.success(n.t("Default model updated"))};function v(_,p,w,I){w[I]=_,t(0,a),t(3,l)}const g=()=>{t(0,a=[...a,""])},b=_=>{a.splice(_,1),t(0,a),t(3,l)};return s.$$set=_=>{"selectedModels"in _&&t(0,a=_.selectedModels),"disabled"in _&&t(1,f=_.disabled),"showSetDefault"in _&&t(2,c=_.showSetDefault)},s.$$.update=()=>{s.$$.dirty&9&&a.length>0&&l.length>0&&t(0,a=a.map(_=>l.map(p=>p.id).includes(_)?_:""))},[a,f,c,l,n,o,i,h,v,g,b]}class zi extends tt{constructor(e){super(),lt(this,e,Ni,Li,et,{selectedModels:0,disabled:1,showSetDefault:2})}}function Oi(s){let e;const t=s[10].default,l=zt(t,s,s[16],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&65536)&&Ot(l,t,n,n[16],e?Ut(t,n[16],r,null):At(n[16]),null)},i(n){e||(H(l,n),e=!0)},o(n){L(l,n),e=!1},d(n){l&&l.d(n)}}}function Ai(s){let e,t,l,n,r=s[3].t("Share")+"",o;return{c(){e=Ne("svg"),t=Ne("path"),l=R(),n=k("div"),o=pe(r),this.h()},l(i){e=ze(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=E(e);t=ze(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(t).forEach(d),a.forEach(d),l=F(i),n=y(i,"DIV",{class:!0});var f=E(n);o=_e(f,r),f.forEach(d),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","size-4"),u(n,"class","flex items-center")},m(i,a){B(i,e,a),m(e,t),B(i,l,a),B(i,n,a),m(n,o)},p(i,a){a&8&&r!==(r=i[3].t("Share")+"")&&ye(o,r)},d(i){i&&(d(e),d(l),d(n))}}}function Ui(s){let e,t,l,n,r=s[3].t("Download")+"",o;return{c(){e=Ne("svg"),t=Ne("path"),l=R(),n=k("div"),o=pe(r),this.h()},l(i){e=ze(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=E(e);t=ze(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(d),a.forEach(d),l=F(i),n=y(i,"DIV",{class:!0});var f=E(n);o=_e(f,r),f.forEach(d),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","size-4"),u(n,"class","flex items-center")},m(i,a){B(i,e,a),m(e,t),B(i,l,a),B(i,n,a),m(n,o)},p(i,a){a&8&&r!==(r=i[3].t("Download")+"")&&ye(o,r)},d(i){i&&(d(e),d(l),d(n))}}}function ji(s){let e,t=s[3].t("Export chat (.json)")+"",l;return{c(){e=k("div"),l=pe(t),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=E(e);l=_e(r,t),r.forEach(d),this.h()},h(){u(e,"class","flex items-center line-clamp-1")},m(n,r){B(n,e,r),m(e,l)},p(n,r){r&8&&t!==(t=n[3].t("Export chat (.json)")+"")&&ye(l,t)},d(n){n&&d(e)}}}function Pi(s){let e,t=s[3].t("Plain text (.txt)")+"",l;return{c(){e=k("div"),l=pe(t),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=E(e);l=_e(r,t),r.forEach(d),this.h()},h(){u(e,"class","flex items-center line-clamp-1")},m(n,r){B(n,e,r),m(e,l)},p(n,r){r&8&&t!==(t=n[3].t("Plain text (.txt)")+"")&&ye(l,t)},d(n){n&&d(e)}}}function Ri(s){let e,t=s[3].t("PDF document (.pdf)")+"",l;return{c(){e=k("div"),l=pe(t),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=E(e);l=_e(r,t),r.forEach(d),this.h()},h(){u(e,"class","flex items-center line-clamp-1")},m(n,r){B(n,e,r),m(e,l)},p(n,r){r&8&&t!==(t=n[3].t("PDF document (.pdf)")+"")&&ye(l,t)},d(n){n&&d(e)}}}function Fi(s){let e,t,l,n,r,o;return e=new sl({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ji]},$$scope:{ctx:s}}}),e.$on("click",s[12]),l=new sl({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Pi]},$$scope:{ctx:s}}}),l.$on("click",s[13]),r=new sl({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ri]},$$scope:{ctx:s}}}),r.$on("click",s[14]),{c(){ne(e.$$.fragment),t=R(),ne(l.$$.fragment),n=R(),ne(r.$$.fragment)},l(i){re(e.$$.fragment,i),t=F(i),re(l.$$.fragment,i),n=F(i),re(r.$$.fragment,i)},m(i,a){oe(e,i,a),B(i,t,a),oe(l,i,a),B(i,n,a),oe(r,i,a),o=!0},p(i,a){const f={};a&65544&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&65544&&(c.$$scope={dirty:a,ctx:i}),l.$set(c);const h={};a&65544&&(h.$$scope={dirty:a,ctx:i}),r.$set(h)},i(i){o||(H(e.$$.fragment,i),H(l.$$.fragment,i),H(r.$$.fragment,i),o=!0)},o(i){L(e.$$.fragment,i),L(l.$$.fragment,i),L(r.$$.fragment,i),o=!1},d(i){i&&(d(t),d(n)),ie(e,i),ie(l,i),ie(r,i)}}}function Wi(s){let e,t,l,n;return e=new ro({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ui]},$$scope:{ctx:s}}}),l=new Xr({props:{class:"w-full rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",transition:Dl,sideOffset:8,$$slots:{default:[Fi]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment),t=R(),ne(l.$$.fragment)},l(r){re(e.$$.fragment,r),t=F(r),re(l.$$.fragment,r)},m(r,o){oe(e,r,o),B(r,t,o),oe(l,r,o),n=!0},p(r,o){const i={};o&65544&&(i.$$scope={dirty:o,ctx:r}),e.$set(i);const a={};o&65544&&(a.$$scope={dirty:o,ctx:r}),l.$set(a)},i(r){n||(H(e.$$.fragment,r),H(l.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),L(l.$$.fragment,r),n=!1},d(r){r&&d(t),ie(e,r),ie(l,r)}}}function Zi(s){let e,t,l,n,r,o,i,a,f;return e=new sl({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Ai]},$$scope:{ctx:s}}}),e.$on("click",s[11]),l=new Ar({props:{$$slots:{default:[Wi]},$$scope:{ctx:s}}}),a=new cr({props:{chatId:s[1].id}}),{c(){ne(e.$$.fragment),t=R(),ne(l.$$.fragment),n=R(),r=k("hr"),o=R(),i=k("div"),ne(a.$$.fragment),this.h()},l(c){re(e.$$.fragment,c),t=F(c),re(l.$$.fragment,c),n=F(c),r=y(c,"HR",{class:!0}),o=F(c),i=y(c,"DIV",{class:!0});var h=E(i);re(a.$$.fragment,h),h.forEach(d),this.h()},h(){u(r,"class","border-gray-100 dark:border-gray-800 mt-2.5 mb-1.5"),u(i,"class","flex p-1")},m(c,h){oe(e,c,h),B(c,t,h),oe(l,c,h),B(c,n,h),B(c,r,h),B(c,o,h),B(c,i,h),oe(a,i,null),f=!0},p(c,h){const v={};h&65544&&(v.$$scope={dirty:h,ctx:c}),e.$set(v);const g={};h&65544&&(g.$$scope={dirty:h,ctx:c}),l.$set(g);const b={};h&2&&(b.chatId=c[1].id),a.$set(b)},i(c){f||(H(e.$$.fragment,c),H(l.$$.fragment,c),H(a.$$.fragment,c),f=!0)},o(c){L(e.$$.fragment,c),L(l.$$.fragment,c),L(a.$$.fragment,c),f=!1},d(c){c&&(d(t),d(n),d(r),d(o),d(i)),ie(e,c),ie(l,c),ie(a)}}}function xi(s){let e,t,l;return t=new Rl({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:Dl,$$slots:{default:[Zi]},$$scope:{ctx:s}}}),{c(){e=k("div"),ne(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{slot:!0});var r=E(e);re(t.$$.fragment,r),r.forEach(d),this.h()},h(){u(e,"slot","content")},m(n,r){B(n,e,r),oe(t,e,null),l=!0},p(n,r){const o={};r&65547&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){L(t.$$.fragment,n),l=!1},d(n){n&&d(e),ie(t)}}}function qi(s){let e,t;return e=new Pl({props:{$$slots:{content:[xi],default:[Oi]},$$scope:{ctx:s}}}),e.$on("change",s[15]),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,[n]){const r={};n&65547&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function Ji(s,e,t){let l,{$$slots:n={},$$scope:r}=e;const{saveAs:o}=Tr,i=kt("i18n");we(s,i,M=>t(3,l=M));let{shareEnabled:a=!1}=e,{shareHandler:f}=e,{downloadHandler:c}=e,{chat:h}=e,{onClose:v=()=>{}}=e;const g=async()=>{const M=h.chat;console.log("download",h);const N=M.messages.reduce((O,G,A,j)=>`${O}### ${G.role.toUpperCase()}
${G.content}

`,"");let Z=new Blob([N],{type:"text/plain"});o(Z,`chat-${M.title}.txt`)},b=async()=>{const M=h.chat;console.log("download",h);const N=await Mr(M),Z=window.URL.createObjectURL(N),O=document.createElement("a");O.href=Z,O.download=`chat-${M.title}.pdf`,document.body.appendChild(O),O.click(),document.body.removeChild(O),window.URL.revokeObjectURL(Z)},_=async()=>{let M=new Blob([JSON.stringify([h])],{type:"application/json"});o(M,`chat-export-${Date.now()}.json`)},p=()=>{f()},w=()=>{_()},I=()=>{g()},D=()=>{b()},V=M=>{M.detail===!1&&v()};return s.$$set=M=>{"shareEnabled"in M&&t(8,a=M.shareEnabled),"shareHandler"in M&&t(0,f=M.shareHandler),"downloadHandler"in M&&t(9,c=M.downloadHandler),"chat"in M&&t(1,h=M.chat),"onClose"in M&&t(2,v=M.onClose),"$$scope"in M&&t(16,r=M.$$scope)},[f,h,v,l,i,g,b,_,a,c,n,p,w,I,D,V,r]}class Gi extends tt{constructor(e){super(),lt(this,e,Ji,qi,et,{shareEnabled:8,shareHandler:0,downloadHandler:9,chat:1,onClose:2})}}function Qi(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,viewBox:!0,stroke:!0,fill:!0,class:!0,"stroke-width":!0});var n=E(e);t=ze(n,"path",{d:!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){u(t,"d","M18.75 12.75h1.5a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM12 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 6ZM12 18a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 18ZM3.75 6.75h1.5a.75.75 0 1 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM5.25 18.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 0 1.5ZM3 12a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 12ZM9 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM12.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM9 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor"),u(e,"fill","currentColor"),u(e,"class",s[0]),u(e,"stroke-width",s[1])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&1&&u(e,"class",l[0]),n&2&&u(e,"stroke-width",l[1])},i:Ve,o:Ve,d(l){l&&d(e)}}}function Ki(s,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="1.5"}=e;return s.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class Yi extends tt{constructor(e){super(),lt(this,e,Ki,Qi,et,{className:0,strokeWidth:1})}}function nn(s){let e,t,l;function n(o){s[16](o)}let r={showSetDefault:!s[3]};return s[0]!==void 0&&(r.selectedModels=s[0]),e=new zi({props:r}),be.push(()=>Me(e,"selectedModels",n)),{c(){ne(e.$$.fragment)},l(o){re(e.$$.fragment,o)},m(o,i){oe(e,o,i),l=!0},p(o,i){const a={};i&8&&(a.showSetDefault=!o[3]),!t&&i&1&&(t=!0,a.selectedModels=o[0],Te(()=>t=!1)),e.$set(a)},i(o){l||(H(e.$$.fragment,o),l=!0)},o(o){L(e.$$.fragment,o),l=!1},d(o){ie(e,o)}}}function rn(s){let e,t;return e=new Gi({props:{chat:s[4],shareEnabled:s[3],shareHandler:s[17],downloadHandler:s[18],$$slots:{default:[Xi]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,n){const r={};n&16&&(r.chat=l[4]),n&8&&(r.shareEnabled=l[3]),n&64&&(r.shareHandler=l[17]),n&128&&(r.downloadHandler=l[18]),n&8388608&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function Xi(s){let e,t='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){e=k("button"),e.innerHTML=t,this.h()},l(l){e=y(l,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),Je(e)!=="svelte-1st1t1k"&&(e.innerHTML=t),this.h()},h(){u(e,"class","hidden md:flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),u(e,"id","chat-context-menu-button")},m(l,n){B(l,e,n)},p:Ve,d(l){l&&d(e)}}}function $i(s){let e,t,l,n,r,o;return l=new Yi({props:{className:" size-5",strokeWidth:"0.5"}}),{c(){e=k("button"),t=k("div"),ne(l.$$.fragment),this.h()},l(i){e=y(i,"BUTTON",{class:!0});var a=E(e);t=y(a,"DIV",{class:!0});var f=E(t);re(l.$$.fragment,f),f.forEach(d),a.forEach(d),this.h()},h(){u(t,"class","m-auto self-center"),u(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition")},m(i,a){B(i,e,a),m(e,t),oe(l,t,null),n=!0,r||(o=fe(e,"click",s[19]),r=!0)},p:Ve,i(i){n||(H(l.$$.fragment,i),n=!0)},o(i){L(l.$$.fragment,i),n=!1},d(i){i&&d(e),ie(l),r=!1,o()}}}function ea(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"></path><path d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"></path></svg>',n,r,o;return{c(){e=k("button"),t=k("div"),t.innerHTML=l,this.h()},l(i){e=y(i,"BUTTON",{id:!0,class:!0});var a=E(e);t=y(a,"DIV",{class:!0,"data-svelte-h":!0}),Je(t)!=="svelte-1fcii9y"&&(t.innerHTML=l),a.forEach(d),this.h()},h(){u(t,"class","m-auto self-center"),u(e,"id","new-chat-button"),u(e,"class",n="flex "+(s[9]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition")},m(i,a){B(i,e,a),m(e,t),r||(o=fe(e,"click",s[20]),r=!0)},p(i,a){a&512&&n!==(n="flex "+(i[9]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition")&&u(e,"class",n)},d(i){i&&d(e),r=!1,o()}}}function on(s){let e,t;return e=new ur({props:{className:"max-w-[200px]",role:s[11].role,$$slots:{default:[ta]},$$scope:{ctx:s}}}),e.$on("show",s[21]),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,n){const r={};n&2048&&(r.role=l[11].role),n&8390656&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function ta(s){let e,t,l,n;return{c(){e=k("button"),t=k("div"),l=k("img"),this.h()},l(r){e=y(r,"BUTTON",{class:!0,"aria-label":!0});var o=E(e);t=y(o,"DIV",{class:!0});var i=E(t);l=y(i,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),i.forEach(d),o.forEach(d),this.h()},h(){ul(l.src,n=s[11].profile_image_url)||u(l,"src",n),u(l,"class","size-6 object-cover rounded-full"),u(l,"alt","User profile"),u(l,"draggable","false"),u(t,"class","self-center"),u(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition"),u(e,"aria-label","User Menu")},m(r,o){B(r,e,o),m(e,t),m(t,l)},p(r,o){o&2048&&!ul(l.src,n=r[11].profile_image_url)&&u(l,"src",n)},d(r){r&&d(e)}}}function la(s){let e,t,l,n,r,o,i,a,f,c,h,v,g,b,_,p,w,I,D,V,M,N,Z;function O(J){s[14](J)}let G={chatId:s[8]};s[6]!==void 0&&(G.show=s[6]),e=new fr({props:G}),be.push(()=>Me(e,"show",O)),c=new Vr({});let A=s[5]&&nn(s),j=s[3]&&s[4]&&s[4].id&&rn(s);w=new Zt({props:{content:s[10].t("Controls"),$$slots:{default:[$i]},$$scope:{ctx:s}}}),D=new Zt({props:{content:s[10].t("New Chat"),$$slots:{default:[ea]},$$scope:{ctx:s}}});let q=s[11]!==void 0&&on(s);return{c(){ne(e.$$.fragment),l=R(),n=k("nav"),r=k("div"),o=k("div"),i=k("div"),a=k("button"),f=k("div"),ne(c.$$.fragment),v=R(),g=k("div"),A&&A.c(),b=R(),_=k("div"),j&&j.c(),p=R(),ne(w.$$.fragment),I=R(),ne(D.$$.fragment),V=R(),q&&q.c(),this.h()},l(J){re(e.$$.fragment,J),l=F(J),n=y(J,"NAV",{id:!0,class:!0});var x=E(n);r=y(x,"DIV",{class:!0});var W=E(r);o=y(W,"DIV",{class:!0});var U=E(o);i=y(U,"DIV",{class:!0});var Q=E(i);a=y(Q,"BUTTON",{id:!0,class:!0});var Y=E(a);f=y(Y,"DIV",{class:!0});var $=E(f);re(c.$$.fragment,$),$.forEach(d),Y.forEach(d),Q.forEach(d),v=F(U),g=y(U,"DIV",{class:!0});var te=E(g);A&&A.l(te),te.forEach(d),b=F(U),_=y(U,"DIV",{class:!0});var ue=E(_);j&&j.l(ue),p=F(ue),re(w.$$.fragment,ue),I=F(ue),re(D.$$.fragment,ue),V=F(ue),q&&q.l(ue),ue.forEach(d),U.forEach(d),W.forEach(d),x.forEach(d),this.h()},h(){u(f,"class","m-auto self-center"),u(a,"id","sidebar-toggle-button"),u(a,"class","cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),u(i,"class",h=(s[9]?"md:hidden":"")+" mr-3 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),u(g,"class","flex-1 overflow-hidden max-w-full"),u(_,"class","self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),u(o,"class","flex items-center w-full max-w-full"),u(r,"class","flex max-w-full w-full mx-auto px-5 pt-0.5 md:px-[1rem]"),u(n,"id","nav"),u(n,"class","sticky py-2.5 top-0 flex flex-row justify-center z-10")},m(J,x){oe(e,J,x),B(J,l,x),B(J,n,x),m(n,r),m(r,o),m(o,i),m(i,a),m(a,f),oe(c,f,null),m(o,v),m(o,g),A&&A.m(g,null),m(o,b),m(o,_),j&&j.m(_,null),m(_,p),oe(w,_,null),m(_,I),oe(D,_,null),m(_,V),q&&q.m(_,null),M=!0,N||(Z=fe(a,"click",s[15]),N=!0)},p(J,[x]){const W={};x&256&&(W.chatId=J[8]),!t&&x&64&&(t=!0,W.show=J[6],Te(()=>t=!1)),e.$set(W),(!M||x&512&&h!==(h=(J[9]?"md:hidden":"")+" mr-3 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"))&&u(i,"class",h),J[5]?A?(A.p(J,x),x&32&&H(A,1)):(A=nn(J),A.c(),H(A,1),A.m(g,null)):A&&(Ge(),L(A,1,1,()=>{A=null}),Qe()),J[3]&&J[4]&&J[4].id?j?(j.p(J,x),x&24&&H(j,1)):(j=rn(J),j.c(),H(j,1),j.m(_,p)):j&&(Ge(),L(j,1,1,()=>{j=null}),Qe());const U={};x&1024&&(U.content=J[10].t("Controls")),x&8388610&&(U.$$scope={dirty:x,ctx:J}),w.$set(U);const Q={};x&1024&&(Q.content=J[10].t("New Chat")),x&8389124&&(Q.$$scope={dirty:x,ctx:J}),D.$set(Q),J[11]!==void 0?q?(q.p(J,x),x&2048&&H(q,1)):(q=on(J),q.c(),H(q,1),q.m(_,null)):q&&(Ge(),L(q,1,1,()=>{q=null}),Qe())},i(J){M||(H(e.$$.fragment,J),H(c.$$.fragment,J),H(A),H(j),H(w.$$.fragment,J),H(D.$$.fragment,J),H(q),M=!0)},o(J){L(e.$$.fragment,J),L(c.$$.fragment,J),L(A),L(j),L(w.$$.fragment,J),L(D.$$.fragment,J),L(q),M=!1},d(J){J&&(d(l),d(n)),ie(e,J),ie(c),A&&A.d(),j&&j.d(),ie(w),ie(D),q&&q.d(),N=!1,Z()}}}function sa(s,e,t){let l,n,r,o,i;we(s,Cn,A=>t(22,l=A)),we(s,fl,A=>t(8,n=A)),we(s,Ul,A=>t(9,r=A)),we(s,ql,A=>t(11,i=A));const a=kt("i18n");we(s,a,A=>t(10,o=A));let{initNewChat:f}=e,{title:c=l}=e,{shareEnabled:h=!1}=e,{chat:v}=e,{selectedModels:g}=e,{showModelSelector:b=!0}=e,{showControls:_=!1}=e,p=!1,w=!1;function I(A){p=A,t(6,p)}const D=()=>{Ul.set(!r)};function V(A){g=A,t(0,g)}const M=()=>{t(6,p=!p)},N=()=>{t(7,w=!w)},Z=()=>{t(1,_=!_)},O=()=>{f()},G=A=>{A.detail==="archived-chat"&&Jn.set(!0)};return s.$$set=A=>{"initNewChat"in A&&t(2,f=A.initNewChat),"title"in A&&t(13,c=A.title),"shareEnabled"in A&&t(3,h=A.shareEnabled),"chat"in A&&t(4,v=A.chat),"selectedModels"in A&&t(0,g=A.selectedModels),"showModelSelector"in A&&t(5,b=A.showModelSelector),"showControls"in A&&t(1,_=A.showControls)},[g,_,f,h,v,b,p,w,n,r,o,i,a,c,I,D,V,M,N,Z,O,G]}class na extends tt{constructor(e){super(),lt(this,e,sa,la,et,{initNewChat:2,title:13,shareEnabled:3,chat:4,selectedModels:0,showModelSelector:5,showControls:1})}}function an(s,e,t){const l=s.slice();return l[10]=e[t],l}function ra(s){let e;const t=s[4].default,l=zt(t,s,s[8],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&256)&&Ot(l,t,n,n[8],e?Ut(t,n[8],r,null):At(n[8]),null)},i(n){e||(H(l,n),e=!0)},o(n){L(l,n),e=!1},d(n){l&&l.d(n)}}}function oa(s){var o;let e,t,l=(((o=s[10])==null?void 0:o.label)??"Camera")+"",n,r;return{c(){e=k("div"),t=k("div"),n=pe(l),r=R(),this.h()},l(i){e=y(i,"DIV",{class:!0});var a=E(e);t=y(a,"DIV",{class:!0});var f=E(t);n=_e(f,l),f.forEach(d),a.forEach(d),r=F(i),this.h()},h(){u(t,"class","line-clamp-1"),u(e,"class","flex items-center")},m(i,a){B(i,e,a),m(e,t),m(t,n),B(i,r,a)},p(i,a){var f;a&2&&l!==(l=(((f=i[10])==null?void 0:f.label)??"Camera")+"")&&ye(n,l)},d(i){i&&(d(e),d(r))}}}function cn(s){let e,t;function l(){return s[5](s[10])}return e=new sl({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[oa]},$$scope:{ctx:s}}}),e.$on("click",l),{c(){ne(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,r){oe(e,n,r),t=!0},p(n,r){s=n;const o={};r&258&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){ie(e,n)}}}function ia(s){let e,t,l=pt(s[1]),n=[];for(let o=0;o<l.length;o+=1)n[o]=cn(an(s,l,o));const r=o=>L(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=xe()},l(o){for(let i=0;i<n.length;i+=1)n[i].l(o);e=xe()},m(o,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,i);B(o,e,i),t=!0},p(o,i){if(i&10){l=pt(o[1]);let a;for(a=0;a<l.length;a+=1){const f=an(o,l,a);n[a]?(n[a].p(f,i),H(n[a],1)):(n[a]=cn(f),n[a].c(),H(n[a],1),n[a].m(e.parentNode,e))}for(Ge(),a=l.length;a<n.length;a+=1)r(a);Qe()}},i(o){if(!t){for(let i=0;i<l.length;i+=1)H(n[i]);t=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)L(n[i]);t=!1},d(o){o&&d(e),Xt(n,o)}}}function aa(s){let e,t,l;return t=new Rl({props:{class:"w-full max-w-[180px] rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-[9999] bg-white dark:bg-gray-900 dark:text-white shadow-sm",sideOffset:6,side:"top",align:"start",transition:Dl,$$slots:{default:[ia]},$$scope:{ctx:s}}}),{c(){e=k("div"),ne(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{slot:!0});var r=E(e);re(t.$$.fragment,r),r.forEach(d),this.h()},h(){u(e,"slot","content")},m(n,r){B(n,e,r),oe(t,e,null),l=!0},p(n,r){const o={};r&258&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){L(t.$$.fragment,n),l=!1},d(n){n&&d(e),ie(t)}}}function ca(s){let e,t,l;function n(o){s[6](o)}let r={$$slots:{content:[aa],default:[ra]},$$scope:{ctx:s}};return s[2]!==void 0&&(r.show=s[2]),e=new Pl({props:r}),be.push(()=>Me(e,"show",n)),e.$on("change",s[7]),{c(){ne(e.$$.fragment)},l(o){re(e.$$.fragment,o)},m(o,i){oe(e,o,i),l=!0},p(o,[i]){const a={};i&258&&(a.$$scope={dirty:i,ctx:o}),!t&&i&4&&(t=!0,a.show=o[2],Te(()=>t=!1)),e.$set(a)},i(o){l||(H(e.$$.fragment,o),l=!0)},o(o){L(e.$$.fragment,o),l=!1},d(o){ie(e,o)}}}function fa(s,e,t){let{$$slots:l={},$$scope:n}=e;kt("i18n");const r=gl();let{onClose:o=()=>{}}=e,{devices:i}=e,a=!1;const f=v=>{r("change",v.deviceId)};function c(v){a=v,t(2,a)}const h=v=>{v.detail===!1&&o()};return s.$$set=v=>{"onClose"in v&&t(0,o=v.onClose),"devices"in v&&t(1,i=v.devices),"$$scope"in v&&t(8,n=v.$$scope)},[o,i,a,r,l,f,c,h,n]}class ua extends tt{constructor(e){super(),lt(this,e,fa,ca,et,{onClose:0,devices:1})}}function fn(s){let e,t,l,n,r,o,i,a,f,c,h,v,g,b,_,p,w,I='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"></path></svg>',D,V,M,N=s[4]&&un(s);function Z(U,Q){return U[4]?ga:pa}let O=Z(s),G=O(s);const A=[ka,wa],j=[];function q(U,Q){return U[4]?0:1}f=q(s),c=j[f]=A[f](s);function J(U,Q){return U[1]?Sa:U[2]?Da:Ia}let x=J(s),W=x(s);return{c(){e=k("div"),t=k("div"),l=k("div"),N&&N.c(),n=R(),r=k("div"),G.c(),o=R(),i=k("div"),a=k("div"),c.c(),h=R(),v=k("div"),g=k("button"),b=k("div"),W.c(),_=R(),p=k("div"),w=k("button"),w.innerHTML=I,this.h()},l(U){e=y(U,"DIV",{class:!0});var Q=E(e);t=y(Q,"DIV",{class:!0});var Y=E(t);l=y(Y,"DIV",{class:!0});var $=E(l);N&&N.l($),n=F($),r=y($,"DIV",{class:!0});var te=E(r);G.l(te),te.forEach(d),o=F($),i=y($,"DIV",{class:!0});var ue=E(i);a=y(ue,"DIV",{});var De=E(a);c.l(De),De.forEach(d),h=F(ue),v=y(ue,"DIV",{});var Ie=E(v);g=y(Ie,"BUTTON",{type:!0});var ae=E(g);b=y(ae,"DIV",{class:!0});var C=E(b);W.l(C),C.forEach(d),ae.forEach(d),Ie.forEach(d),_=F(ue),p=y(ue,"DIV",{});var K=E(p);w=y(K,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Je(w)!=="svelte-khrbnh"&&(w.innerHTML=I),K.forEach(d),ue.forEach(d),$.forEach(d),Y.forEach(d),Q.forEach(d),this.h()},h(){u(r,"class","flex justify-center items-center flex-1 h-full w-full max-h-full"),u(b,"class","line-clamp-1 text-sm font-medium"),u(g,"type","button"),u(w,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),u(w,"type","button"),u(i,"class","flex justify-between items-center pb-2 w-full"),u(l,"class","max-w-lg w-full h-screen max-h-[100dvh] flex flex-col justify-between p-3 md:p-6"),u(t,"class","absolute w-full h-screen max-h-[100dvh] bg-white text-gray-700 dark:bg-black dark:text-gray-300 flex justify-center"),u(e,"class","absolute w-full h-screen max-h-[100dvh] flex z-[999] overflow-hidden")},m(U,Q){B(U,e,Q),m(e,t),m(t,l),N&&N.m(l,null),m(l,n),m(l,r),G.m(r,null),m(l,o),m(l,i),m(i,a),j[f].m(a,null),m(i,h),m(i,v),m(v,g),m(g,b),W.m(b,null),m(i,_),m(i,p),m(p,w),D=!0,V||(M=[fe(g,"click",s[27]),fe(w,"click",s[28])],V=!0)},p(U,Q){U[4]?N?N.p(U,Q):(N=un(U),N.c(),N.m(l,n)):N&&(N.d(1),N=null),O===(O=Z(U))&&G?G.p(U,Q):(G.d(1),G=O(U),G&&(G.c(),G.m(r,null)));let Y=f;f=q(U),f===Y?j[f].p(U,Q):(Ge(),L(j[Y],1,1,()=>{j[Y]=null}),Qe(),c=j[f],c?c.p(U,Q):(c=j[f]=A[f](U),c.c()),H(c,1),c.m(a,null)),x===(x=J(U))&&W?W.p(U,Q):(W.d(1),W=x(U),W&&(W.c(),W.m(b,null)))},i(U){D||(H(c),D=!0)},o(U){L(c),D=!1},d(U){U&&d(e),N&&N.d(),G.d(),j[f].d(),W.d(),V=!1,jt(M)}}}function un(s){let e,t,l;function n(i,a){return i[3]?ma:i[1]||i[2]?ha:da}let r=n(s),o=r(s);return{c(){e=k("button"),o.c(),this.h()},l(i){e=y(i,"BUTTON",{type:!0,class:!0});var a=E(e);o.l(a),a.forEach(d),this.h()},h(){u(e,"type","button"),u(e,"class","flex justify-center items-center w-full h-20 min-h-20")},m(i,a){B(i,e,a),o.m(e,null),t||(l=fe(e,"click",s[22]),t=!0)},p(i,a){r===(r=n(i))&&o?o.p(i,a):(o.d(1),o=r(i),o&&(o.c(),o.m(e,null)))},d(i){i&&d(e),o.d(),t=!1,l()}}}function da(s){let e,t,l;return{c(){e=k("div"),this.h()},l(n){e=y(n,"DIV",{class:!0,style:!0}),E(e).forEach(d),this.h()},h(){var n,r,o,i,a,f,c,h,v;u(e,"class",t=(s[5]*100>4?" size-[4.5rem]":s[5]*100>2?" size-16":s[5]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((o=(r=(n=s[0])==null?void 0:n.info)==null?void 0:r.meta)==null?void 0:o.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white"),u(e,"style",l=(((f=(a=(i=s[0])==null?void 0:i.info)==null?void 0:a.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(v=(h=(c=s[0])==null?void 0:c.info)==null?void 0:h.meta)==null?void 0:v.profile_image_url}');`:"")},m(n,r){B(n,e,r)},p(n,r){var o,i,a,f,c,h,v,g,b;r[0]&33&&t!==(t=(n[5]*100>4?" size-[4.5rem]":n[5]*100>2?" size-16":n[5]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((a=(i=(o=n[0])==null?void 0:o.info)==null?void 0:i.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white")&&u(e,"class",t),r[0]&1&&l!==(l=(((h=(c=(f=n[0])==null?void 0:f.info)==null?void 0:c.meta)==null?void 0:h.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(b=(g=(v=n[0])==null?void 0:v.info)==null?void 0:g.meta)==null?void 0:b.profile_image_url}');`:"")&&u(e,"style",l)},d(n){n&&d(e)}}}function ha(s){let e,t,l,n,r,o;return{c(){e=Ne("svg"),t=Ne("style"),l=pe(`.spinner_qM83 {
										animation: spinner_8HQG 1.05s infinite;
									}
									.spinner_oXPr {
										animation-delay: 0.1s;
									}
									.spinner_ZTLf {
										animation-delay: 0.2s;
									}
									@keyframes spinner_8HQG {
										0%,
										57.14% {
											animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
											transform: translate(0);
										}
										28.57% {
											animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
											transform: translateY(-6px);
										}
										100% {
											transform: translate(0);
										}
									}
								`),n=Ne("circle"),r=Ne("circle"),o=Ne("circle"),this.h()},l(i){e=ze(i,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=E(e);t=ze(a,"style",{});var f=E(t);l=_e(f,`.spinner_qM83 {
										animation: spinner_8HQG 1.05s infinite;
									}
									.spinner_oXPr {
										animation-delay: 0.1s;
									}
									.spinner_ZTLf {
										animation-delay: 0.2s;
									}
									@keyframes spinner_8HQG {
										0%,
										57.14% {
											animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
											transform: translate(0);
										}
										28.57% {
											animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
											transform: translateY(-6px);
										}
										100% {
											transform: translate(0);
										}
									}
								`),f.forEach(d),n=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(n).forEach(d),r=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(r).forEach(d),o=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(o).forEach(d),a.forEach(d),this.h()},h(){u(n,"class","spinner_qM83"),u(n,"cx","4"),u(n,"cy","12"),u(n,"r","3"),u(r,"class","spinner_qM83 spinner_oXPr"),u(r,"cx","12"),u(r,"cy","12"),u(r,"r","3"),u(o,"class","spinner_qM83 spinner_ZTLf"),u(o,"cx","20"),u(o,"cy","12"),u(o,"r","3"),u(e,"class","size-12 text-gray-900 dark:text-gray-400"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(i,a){B(i,e,a),m(e,t),m(t,l),m(e,n),m(e,r),m(e,o)},p:Ve,d(i){i&&d(e)}}}function ma(s){let e,t;return{c(){e=k("div"),t=pe(s[3]),this.h()},l(l){e=y(l,"DIV",{class:!0,style:!0});var n=E(e);t=_e(n,s[3]),n.forEach(d),this.h()},h(){u(e,"class","transition-all rounded-full"),Ht(e,"font-size",(s[5]*100>4?"4.5":s[5]*100>2?"4.25":s[5]*100>1?"3.75":"3.5")+"rem"),Ht(e,"width","100%"),Ht(e,"text-align","center")},m(l,n){B(l,e,n),m(e,t)},p(l,n){n[0]&8&&ye(t,l[3]),n[0]&32&&Ht(e,"font-size",(l[5]*100>4?"4.5":l[5]*100>2?"4.25":l[5]*100>1?"3.75":"3.5")+"rem")},d(l){l&&d(e)}}}function ga(s){let e,t,l,n,r,o,i,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-6"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"></path></svg>',f,c;return{c(){e=k("div"),t=k("video"),l=R(),n=k("canvas"),r=R(),o=k("div"),i=k("button"),i.innerHTML=a,this.h()},l(h){e=y(h,"DIV",{class:!0});var v=E(e);t=y(v,"VIDEO",{id:!0,class:!0}),E(t).forEach(d),l=F(v),n=y(v,"CANVAS",{id:!0,style:!0}),E(n).forEach(d),r=F(v),o=y(v,"DIV",{class:!0});var g=E(o);i=y(g,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Je(i)!=="svelte-zfg1vd"&&(i.innerHTML=a),g.forEach(d),v.forEach(d),this.h()},h(){u(t,"id","camera-feed"),t.autoplay=!0,u(t,"class","rounded-2xl h-full min-w-full object-cover object-center"),t.playsInline=!0,u(n,"id","camera-canvas"),Ht(n,"display","none"),u(i,"type","button"),u(i,"class","p-1.5 text-white cursor-pointer backdrop-blur-xl bg-black/10 rounded-full"),u(o,"class","absolute top-4 md:top-8 left-4"),u(e,"class","relative flex video-container w-full max-h-full pt-2 pb-4 md:py-6 px-2 h-full")},m(h,v){B(h,e,v),m(e,t),m(e,l),m(e,n),m(e,r),m(e,o),m(o,i),f||(c=fe(i,"click",s[24]),f=!0)},p:Ve,d(h){h&&d(e),f=!1,c()}}}function pa(s){let e,t,l;function n(i,a){return i[3]?ba:i[1]||i[2]?va:_a}let r=n(s),o=r(s);return{c(){e=k("button"),o.c(),this.h()},l(i){e=y(i,"BUTTON",{type:!0});var a=E(e);o.l(a),a.forEach(d),this.h()},h(){u(e,"type","button")},m(i,a){B(i,e,a),o.m(e,null),t||(l=fe(e,"click",s[23]),t=!0)},p(i,a){r===(r=n(i))&&o?o.p(i,a):(o.d(1),o=r(i),o&&(o.c(),o.m(e,null)))},d(i){i&&d(e),o.d(),t=!1,l()}}}function _a(s){let e,t,l;return{c(){e=k("div"),this.h()},l(n){e=y(n,"DIV",{class:!0,style:!0}),E(e).forEach(d),this.h()},h(){var n,r,o,i,a,f,c,h,v;u(e,"class",t=(s[5]*100>4?" size-52":s[5]*100>2?"size-48":s[5]*100>1?"size-[11.5rem]":"size-44")+" transition-all rounded-full "+((((o=(r=(n=s[0])==null?void 0:n.info)==null?void 0:r.meta)==null?void 0:o.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")),u(e,"style",l=(((f=(a=(i=s[0])==null?void 0:i.info)==null?void 0:a.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(v=(h=(c=s[0])==null?void 0:c.info)==null?void 0:h.meta)==null?void 0:v.profile_image_url}');`:"")},m(n,r){B(n,e,r)},p(n,r){var o,i,a,f,c,h,v,g,b;r[0]&33&&t!==(t=(n[5]*100>4?" size-52":n[5]*100>2?"size-48":n[5]*100>1?"size-[11.5rem]":"size-44")+" transition-all rounded-full "+((((a=(i=(o=n[0])==null?void 0:o.info)==null?void 0:i.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white"))&&u(e,"class",t),r[0]&1&&l!==(l=(((h=(c=(f=n[0])==null?void 0:f.info)==null?void 0:c.meta)==null?void 0:h.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(b=(g=(v=n[0])==null?void 0:v.info)==null?void 0:g.meta)==null?void 0:b.profile_image_url}');`:"")&&u(e,"style",l)},d(n){n&&d(e)}}}function va(s){let e,t,l,n,r,o;return{c(){e=Ne("svg"),t=Ne("style"),l=pe(`.spinner_qM83 {
											animation: spinner_8HQG 1.05s infinite;
										}
										.spinner_oXPr {
											animation-delay: 0.1s;
										}
										.spinner_ZTLf {
											animation-delay: 0.2s;
										}
										@keyframes spinner_8HQG {
											0%,
											57.14% {
												animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
												transform: translate(0);
											}
											28.57% {
												animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
												transform: translateY(-6px);
											}
											100% {
												transform: translate(0);
											}
										}
									`),n=Ne("circle"),r=Ne("circle"),o=Ne("circle"),this.h()},l(i){e=ze(i,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=E(e);t=ze(a,"style",{});var f=E(t);l=_e(f,`.spinner_qM83 {
											animation: spinner_8HQG 1.05s infinite;
										}
										.spinner_oXPr {
											animation-delay: 0.1s;
										}
										.spinner_ZTLf {
											animation-delay: 0.2s;
										}
										@keyframes spinner_8HQG {
											0%,
											57.14% {
												animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
												transform: translate(0);
											}
											28.57% {
												animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
												transform: translateY(-6px);
											}
											100% {
												transform: translate(0);
											}
										}
									`),f.forEach(d),n=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(n).forEach(d),r=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(r).forEach(d),o=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(o).forEach(d),a.forEach(d),this.h()},h(){u(n,"class","spinner_qM83"),u(n,"cx","4"),u(n,"cy","12"),u(n,"r","3"),u(r,"class","spinner_qM83 spinner_oXPr"),u(r,"cx","12"),u(r,"cy","12"),u(r,"r","3"),u(o,"class","spinner_qM83 spinner_ZTLf"),u(o,"cx","20"),u(o,"cy","12"),u(o,"r","3"),u(e,"class","size-44 text-gray-900 dark:text-gray-400"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(i,a){B(i,e,a),m(e,t),m(t,l),m(e,n),m(e,r),m(e,o)},p:Ve,d(i){i&&d(e)}}}function ba(s){let e,t;return{c(){e=k("div"),t=pe(s[3]),this.h()},l(l){e=y(l,"DIV",{class:!0,style:!0});var n=E(e);t=_e(n,s[3]),n.forEach(d),this.h()},h(){u(e,"class","transition-all rounded-full"),Ht(e,"font-size",(s[5]*100>4?"13":s[5]*100>2?"12":s[5]*100>1?"11.5":"11")+"rem"),Ht(e,"width","100%"),Ht(e,"text-align","center")},m(l,n){B(l,e,n),m(e,t)},p(l,n){n[0]&8&&ye(t,l[3]),n[0]&32&&Ht(e,"font-size",(l[5]*100>4?"13":l[5]*100>2?"12":l[5]*100>1?"11.5":"11")+"rem")},d(l){l&&d(e)}}}function wa(s){let e,t;return e=new Zt({props:{content:s[9].t("Camera"),$$slots:{default:[ya]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,n){const r={};n[0]&512&&(r.content=l[9].t("Camera")),n[1]&134217728&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function ka(s){let e,t;return e=new ua({props:{devices:s[6],$$slots:{default:[Ea]},$$scope:{ctx:s}}}),e.$on("change",s[25]),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,n){const r={};n[0]&64&&(r.devices=l[6]),n[1]&134217728&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function ya(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"></path></svg>',l,n;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(r){e=y(r,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Je(e)!=="svelte-ehdlsa"&&(e.innerHTML=t),this.h()},h(){u(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),u(e,"type","button")},m(r,o){B(r,e,o),l||(n=fe(e,"click",s[26]),l=!0)},p:Ve,d(r){r&&d(e),l=!1,n()}}}function Ea(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"></path></svg>';return{c(){e=k("button"),e.innerHTML=t,this.h()},l(l){e=y(l,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Je(e)!=="svelte-t977tc"&&(e.innerHTML=t),this.h()},h(){u(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),u(e,"type","button")},m(l,n){B(l,e,n)},p:Ve,d(l){l&&d(e)}}}function Ia(s){let e=s[9].t("Listening...")+"",t;return{c(){t=pe(e)},l(l){t=_e(l,e)},m(l,n){B(l,t,n)},p(l,n){n[0]&512&&e!==(e=l[9].t("Listening...")+"")&&ye(t,e)},d(l){l&&d(t)}}}function Da(s){let e=s[9].t("Tap to interrupt")+"",t;return{c(){t=pe(e)},l(l){t=_e(l,e)},m(l,n){B(l,t,n)},p(l,n){n[0]&512&&e!==(e=l[9].t("Tap to interrupt")+"")&&ye(t,e)},d(l){l&&d(t)}}}function Sa(s){let e=s[9].t("Thinking...")+"",t;return{c(){t=pe(e)},l(l){t=_e(l,e)},m(l,n){B(l,t,n)},p(l,n){n[0]&512&&e!==(e=l[9].t("Thinking...")+"")&&ye(t,e)},d(l){l&&d(t)}}}function Ca(s){let e,t,l=s[8]&&fn(s);return{c(){l&&l.c(),e=xe()},l(n){l&&l.l(n),e=xe()},m(n,r){l&&l.m(n,r),B(n,e,r),t=!0},p(n,r){n[8]?l?(l.p(n,r),r[0]&256&&H(l,1)):(l=fn(n),l.c(),H(l,1),l.m(e.parentNode,e)):l&&(Ge(),L(l,1,1,()=>{l=null}),Qe())},i(n){t||(H(l),t=!0)},o(n){L(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}function Ta(s,e,t){let l,n,r,o,i;we(s,El,X=>t(41,l=X)),we(s,Il,X=>t(42,n=X)),we(s,Kt,X=>t(43,r=X)),we(s,jl,X=>t(8,o=X));const a=kt("i18n");we(s,a,X=>t(9,i=X));let{eventTarget:f}=e,{submitPrompt:c}=e,{stopResponse:h}=e,{files:v}=e,{chatId:g}=e,{modelId:b}=e,_=null,p=!1,w=!1,I=!1,D=null,V=!1,M=null,N=!1,Z=0,O=!1,G,A=[],j=[],q=null;const J=async()=>{const X=await navigator.mediaDevices.enumerateDevices();t(6,j=X.filter(Ee=>Ee.kind==="videoinput")),navigator.mediaDevices.getDisplayMedia&&t(6,j=[...j,{deviceId:"screen",label:"Screen Share"}]),console.log(j),q===null&&j.length>0&&t(7,q=j[0].deviceId)},x=async()=>{if(await J(),M===null){t(4,V=!0),await Pe();try{await W()}catch(X){console.error("Error accessing webcam: ",X)}}},W=async()=>{const X=document.getElementById("camera-feed");X&&(q==="screen"?M=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1}):M=await navigator.mediaDevices.getUserMedia({video:{deviceId:q?{exact:q}:void 0}}),M&&(await J(),X.srcObject=M,await X.play()))},U=async()=>{M&&M.getTracks().forEach(Ee=>Ee.stop()),M=null},Q=()=>{const X=document.getElementById("camera-feed"),Ee=document.getElementById("camera-canvas");if(!Ee)return;const de=Ee.getContext("2d");Ee.width=X.videoWidth,Ee.height=X.videoHeight,de.drawImage(X,0,0,X.videoWidth,X.videoHeight);const ge=Ee.toDataURL("image/png");return console.log(ge),ge},Y=async()=>{await U(),t(4,V=!1)},$=-55,te=async X=>{await Pe();const Ee=Jl(X,"recording.wav"),de=await Gl(localStorage.token,Ee).catch(ge=>(Be.error(ge),null));if(de&&(console.log(de.text),de.text!=="")){const ge=await c(de.text,{_raw:!0});console.log(ge)}},ue=async(X=!0)=>{if(o){console.log("%c%s","color: red; font-size: 20px;","🚨 stopRecordingCallback 🚨");const Ee=A.slice(0);if(A=[],G=!1,X&&De(),w){if(t(1,p=!0),t(3,D=null),M){const ge=Q();t(16,v=[{type:"image",url:ge}])}const de=new Blob(Ee,{type:"audio/wav"});await te(de),w=!1,t(1,p=!1)}}else A=[],G=!1},De=async()=>{const X=await navigator.mediaDevices.getUserMedia({audio:!0});G=new MediaRecorder(X),G.onstart=()=>{console.log("Recording started"),A=[],ae(X)},G.ondataavailable=Ee=>{O&&A.push(Ee.data)},G.onstop=Ee=>{console.log("Recording stopped",Ee),ue()},G.start()},Ie=X=>{let Ee=0;for(let de=0;de<X.length;de++){const ge=(X[de]-128)/128;Ee+=ge*ge}return Math.sqrt(Ee/X.length)},ae=X=>{const Ee=new AudioContext,de=Ee.createMediaStreamSource(X),ge=Ee.createAnalyser();ge.minDecibels=$,de.connect(ge);const P=ge.frequencyBinCount,le=new Uint8Array(P),qe=new Uint8Array(ge.fftSize);let We=Date.now();O=!1,console.log("🔊 Sound detection started",We,O),(()=>{const ct=()=>{if(!G||!o)return;if(I&&!((r==null?void 0:r.voiceInterruption)??!1)?(ge.maxDecibels=0,ge.minDecibels=-1):(ge.minDecibels=$,ge.maxDecibels=-30),ge.getByteTimeDomainData(qe),ge.getByteFrequencyData(le),t(5,Z=Ie(qe)),le.some(It=>It>0)&&(console.log("%c%s","color: red; font-size: 20px;","🔊 Sound detected"),O||(O=!0,he()),We=Date.now()),O&&Date.now()-We>2e3&&(w=!0,G)){console.log("%c%s","color: red; font-size: 20px;","🔇 Silence detected"),G.stop();return}window.requestAnimationFrame(ct)};window.requestAnimationFrame(ct)})()};let C={},K=null,Le=null;const Ue=X=>o?new Promise(Ee=>{let de=[];const ge=setInterval(async()=>{var P;if(de=await speechSynthesis.getVoices(),de.length>0){clearInterval(ge);const le=((P=de==null?void 0:de.filter(qe=>{var We,it,ct,vt;return qe.voiceURI===(((it=(We=r==null?void 0:r.audio)==null?void 0:We.tts)==null?void 0:it.voice)??((vt=(ct=n==null?void 0:n.audio)==null?void 0:ct.tts)==null?void 0:vt.voice))}))==null?void 0:P.at(0))??void 0;Le=new SpeechSynthesisUtterance(X),le&&(Le.voice=le),speechSynthesis.speak(Le),Le.onend=async qe=>{await new Promise(We=>setTimeout(We,200)),Ee(qe)}}},100)}):Promise.resolve(),se=X=>o?new Promise(Ee=>{const de=document.getElementById("audioElement");de&&(de.src=X.src,de.muted=!0,de.play().then(()=>{de.muted=!1}).catch(ge=>{console.error(ge)}),de.onended=async ge=>{await new Promise(P=>setTimeout(P,100)),Ee(ge)})}):Promise.resolve(),he=async()=>{t(2,I=!1),N&&h(),Le&&(speechSynthesis.cancel(),Le=null);const X=document.getElementById("audioElement");X&&(X.muted=!0,X.pause(),X.currentTime=0)};let Re=new AbortController;const Ke=new Map,$e=new Map,rt=async X=>{var Ee,de,ge,P;if(!Ke.has(X))try{if((r==null?void 0:r.showEmojiInCall)??!1){const le=await hr(localStorage.token,b,X,g);le&&$e.set(X,le)}if(n.audio.tts.engine!==""){const le=await Er(localStorage.token,((de=(Ee=r==null?void 0:r.audio)==null?void 0:Ee.tts)==null?void 0:de.voice)??((P=(ge=n==null?void 0:n.audio)==null?void 0:ge.tts)==null?void 0:P.voice),X).catch(qe=>(console.error(qe),null));if(le){const qe=await le.blob(),We=URL.createObjectURL(qe);Ke.set(X,new Audio(We))}}else Ke.set(X,!0)}catch(le){console.error("Error synthesizing speech:",le)}return Ke.get(X)};let st={};const _t=async(X,Ee)=>{for(;!Ee.aborted;)if(st[X]&&st[X].length>0){const de=st[X].shift();if(Ke.has(de))if(((r==null?void 0:r.showEmojiInCall)??!1)&&$e.has(de)?t(3,D=$e.get(de)):t(3,D=null),n.audio.tts.engine!=="")try{console.log("%c%s","color: red; font-size: 20px;",`Playing audio for content: ${de}`);const ge=Ke.get(de);await se(ge),console.log(`Played audio for content: ${de}`),await new Promise(P=>setTimeout(P,200))}catch(ge){console.error("Error playing audio:",ge)}else await Ue(de);else st[X].unshift(de),console.log(`Audio for "${de}" not yet available in the cache, re-queued...`),await new Promise(ge=>setTimeout(ge,200))}else if(C[X]&&st[X]&&st[X].length===0){t(2,I=!1);break}else await new Promise(de=>setTimeout(de,200));console.log(`Audio monitoring and playing stopped for message ID ${X}`)};yl(async()=>{t(0,_=l.find(ge=>ge.id===b)),De();const X=async ge=>{const{id:P}=ge.detail;N=!0,K!==P&&(console.log(`Received chat start event for message ID ${P}`),K=P,Re&&Re.abort(),Re=new AbortController,t(2,I=!0),_t(P,Re.signal))},Ee=async ge=>{const{id:P,content:le}=ge.detail;if(K===P){console.log(`Received chat event for message ID ${P}: ${le}`);try{st[P]===void 0?st[P]=[le]:st[P].push(le),console.log(le),rt(le)}catch(qe){console.error("Failed to fetch or play audio:",qe)}}},de=async ge=>{const{id:P,content:le}=ge.detail;C[P]=!0,N=!1};return f.addEventListener("chat:start",X),f.addEventListener("chat",Ee),f.addEventListener("chat:finish",de),async()=>{f.removeEventListener("chat:start",X),f.removeEventListener("chat",Ee),f.removeEventListener("chat:finish",de),Re.abort(),await Pe(),await he(),await ue(!1),await Y()}});const dt=()=>{I&&he()},mt=()=>{I&&he()},yt=()=>{Y()},ht=async X=>{console.log(X.detail),t(7,q=X.detail),await U(),await W()},Pt=async()=>{await navigator.mediaDevices.getUserMedia({video:!0}),x()},xt=()=>{I&&he()},Et=async()=>{jl.set(!1)};return s.$$set=X=>{"eventTarget"in X&&t(17,f=X.eventTarget),"submitPrompt"in X&&t(18,c=X.submitPrompt),"stopResponse"in X&&t(19,h=X.stopResponse),"files"in X&&t(16,v=X.files),"chatId"in X&&t(20,g=X.chatId),"modelId"in X&&t(21,b=X.modelId)},[_,p,I,D,V,Z,j,q,o,i,a,x,W,U,Y,he,v,f,c,h,g,b,dt,mt,yt,ht,Pt,xt,Et]}class Ma extends tt{constructor(e){super(),lt(this,e,Ta,Ca,et,{eventTarget:17,submitPrompt:18,stopResponse:19,files:16,chatId:20,modelId:21},null,[-1,-1])}}function dn(s,e,t){const l=s.slice();return l[12]=e[t],l[14]=t,l}function hn(s){let e,t,l=s[4].t("Files")+"",n,r,o,i,a,f,c=pt(s[0]),h=[];for(let g=0;g<c.length;g+=1)h[g]=mn(dn(s,c,g));const v=g=>L(h[g],1,1,()=>{h[g]=null});return{c(){e=k("div"),t=k("div"),n=pe(l),r=R(),o=k("div");for(let g=0;g<h.length;g+=1)h[g].c();i=R(),a=k("hr"),this.h()},l(g){e=y(g,"DIV",{});var b=E(e);t=y(b,"DIV",{class:!0});var _=E(t);n=_e(_,l),_.forEach(d),r=F(b),o=y(b,"DIV",{class:!0});var p=E(o);for(let w=0;w<h.length;w+=1)h[w].l(p);p.forEach(d),b.forEach(d),i=F(g),a=y(g,"HR",{class:!0}),this.h()},h(){u(t,"class","mb-1.5 font-medium"),u(o,"class","flex flex-col gap-1"),u(a,"class","my-2 border-gray-100 dark:border-gray-800")},m(g,b){B(g,e,b),m(e,t),m(t,n),m(e,r),m(e,o);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(o,null);B(g,i,b),B(g,a,b),f=!0},p(g,b){if((!f||b&16)&&l!==(l=g[4].t("Files")+"")&&ye(n,l),b&1){c=pt(g[0]);let _;for(_=0;_<c.length;_+=1){const p=dn(g,c,_);h[_]?(h[_].p(p,b),H(h[_],1)):(h[_]=mn(p),h[_].c(),H(h[_],1),h[_].m(o,null))}for(Ge(),_=c.length;_<h.length;_+=1)v(_);Qe()}},i(g){if(!f){for(let b=0;b<c.length;b+=1)H(h[b]);f=!0}},o(g){h=h.filter(Boolean);for(let b=0;b<h.length;b+=1)L(h[b]);f=!1},d(g){g&&(d(e),d(i),d(a)),Xt(h,g)}}}function mn(s){var n;let e,t;function l(){return s[8](s[14])}return e=new Dn({props:{className:"w-full",url:`${(n=s[12])==null?void 0:n.url}`,name:s[12].name,type:s[12].type,dismissible:!0}}),e.$on("dismiss",l),{c(){ne(e.$$.fragment)},l(r){re(e.$$.fragment,r)},m(r,o){oe(e,r,o),t=!0},p(r,o){var a;s=r;const i={};o&1&&(i.url=`${(a=s[12])==null?void 0:a.url}`),o&1&&(i.name=s[12].name),o&1&&(i.type=s[12].type),e.$set(i)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ie(e,r)}}}function gn(s){var b,_;let e,t,l=s[4].t("Valves")+"",n,r,o,i,a,f,c,h;function v(p){s[9](p)}let g={valvesSpec:(_=(b=s[3][0])==null?void 0:b.pipe)==null?void 0:_.valves_spec};return s[1]!==void 0&&(g.valves=s[1]),i=new Br({props:g}),be.push(()=>Me(i,"valves",v)),{c(){e=k("div"),t=k("div"),n=pe(l),r=R(),o=k("div"),ne(i.$$.fragment),f=R(),c=k("hr"),this.h()},l(p){e=y(p,"DIV",{});var w=E(e);t=y(w,"DIV",{class:!0});var I=E(t);n=_e(I,l),I.forEach(d),r=F(w),o=y(w,"DIV",{});var D=E(o);re(i.$$.fragment,D),D.forEach(d),w.forEach(d),f=F(p),c=y(p,"HR",{class:!0}),this.h()},h(){u(t,"class","font-medium"),u(c,"class","my-2 border-gray-100 dark:border-gray-800")},m(p,w){B(p,e,w),m(e,t),m(t,n),m(e,r),m(e,o),oe(i,o,null),B(p,f,w),B(p,c,w),h=!0},p(p,w){var D,V;(!h||w&16)&&l!==(l=p[4].t("Valves")+"")&&ye(n,l);const I={};w&8&&(I.valvesSpec=(V=(D=p[3][0])==null?void 0:D.pipe)==null?void 0:V.valves_spec),!a&&w&2&&(a=!0,I.valves=p[1],Te(()=>a=!1)),i.$set(I)},i(p){h||(H(i.$$.fragment,p),h=!0)},o(p){L(i.$$.fragment,p),h=!1},d(p){p&&(d(e),d(f),d(c)),ie(i)}}}function Va(s){var Ie,ae;let e,t,l,n=s[4].t("Chat Controls")+"",r,o,i,a,f,c,h,v,g,b,_=s[4].t("System Prompt")+"",p,w,I,D,V,M,N,Z,O,G,A=s[4].t("Advanced Params")+"",j,q,J,x,W,U,Q,Y;a=new Ln({props:{className:"size-4"}});let $=s[0].length>0&&hn(s),te=s[3].length===1&&((ae=(Ie=s[3][0])==null?void 0:Ie.pipe)==null?void 0:ae.valves_spec)&&gn(s);function ue(C){s[11](C)}let De={};return s[2]!==void 0&&(De.params=s[2]),x=new Hr({props:De}),be.push(()=>Me(x,"params",ue)),{c(){e=k("div"),t=k("div"),l=k("div"),r=pe(n),o=R(),i=k("button"),ne(a.$$.fragment),f=R(),c=k("div"),$&&$.c(),h=R(),te&&te.c(),v=R(),g=k("div"),b=k("div"),p=pe(_),w=R(),I=k("div"),D=k("textarea"),M=R(),N=k("hr"),Z=R(),O=k("div"),G=k("div"),j=pe(A),q=R(),J=k("div"),ne(x.$$.fragment),this.h()},l(C){e=y(C,"DIV",{class:!0});var K=E(e);t=y(K,"DIV",{class:!0});var Le=E(t);l=y(Le,"DIV",{class:!0});var Ue=E(l);r=_e(Ue,n),Ue.forEach(d),o=F(Le),i=y(Le,"BUTTON",{class:!0});var se=E(i);re(a.$$.fragment,se),se.forEach(d),Le.forEach(d),f=F(K),c=y(K,"DIV",{class:!0});var he=E(c);$&&$.l(he),h=F(he),te&&te.l(he),v=F(he),g=y(he,"DIV",{});var Re=E(g);b=y(Re,"DIV",{class:!0});var Ke=E(b);p=_e(Ke,_),Ke.forEach(d),w=F(Re),I=y(Re,"DIV",{});var $e=E(I);D=y($e,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),E(D).forEach(d),$e.forEach(d),Re.forEach(d),M=F(he),N=y(he,"HR",{class:!0}),Z=F(he),O=y(he,"DIV",{});var rt=E(O);G=y(rt,"DIV",{class:!0});var st=E(G);j=_e(st,A),st.forEach(d),q=F(rt),J=y(rt,"DIV",{});var _t=E(J);re(x.$$.fragment,_t),_t.forEach(d),rt.forEach(d),he.forEach(d),K.forEach(d),this.h()},h(){u(l,"class","text-lg font-medium self-center font-primary"),u(i,"class","self-center"),u(t,"class","flex justify-between dark:text-gray-100 mb-2"),u(b,"class","mb-1.5 font-medium"),u(D,"class","w-full rounded-lg px-4 py-3 text-sm dark:text-gray-300 dark:bg-gray-850 border border-gray-100 dark:border-gray-800 outline-none resize-none"),u(D,"rows","3"),u(D,"placeholder",V=s[4].t("Enter system prompt")),u(N,"class","my-2 border-gray-100 dark:border-gray-800"),u(G,"class","mb-1.5 font-medium"),u(c,"class","dark:text-gray-200 text-sm font-primary"),u(e,"class","dark:text-white")},m(C,K){B(C,e,K),m(e,t),m(t,l),m(l,r),m(t,o),m(t,i),oe(a,i,null),m(e,f),m(e,c),$&&$.m(c,null),m(c,h),te&&te.m(c,null),m(c,v),m(c,g),m(g,b),m(b,p),m(g,w),m(g,I),m(I,D),Ol(D,s[2].system),m(c,M),m(c,N),m(c,Z),m(c,O),m(O,G),m(G,j),m(O,q),m(O,J),oe(x,J,null),U=!0,Q||(Y=[fe(i,"click",s[7]),fe(D,"input",s[10])],Q=!0)},p(C,[K]){var Ue,se;(!U||K&16)&&n!==(n=C[4].t("Chat Controls")+"")&&ye(r,n),C[0].length>0?$?($.p(C,K),K&1&&H($,1)):($=hn(C),$.c(),H($,1),$.m(c,h)):$&&(Ge(),L($,1,1,()=>{$=null}),Qe()),C[3].length===1&&((se=(Ue=C[3][0])==null?void 0:Ue.pipe)!=null&&se.valves_spec)?te?(te.p(C,K),K&8&&H(te,1)):(te=gn(C),te.c(),H(te,1),te.m(c,v)):te&&(Ge(),L(te,1,1,()=>{te=null}),Qe()),(!U||K&16)&&_!==(_=C[4].t("System Prompt")+"")&&ye(p,_),(!U||K&16&&V!==(V=C[4].t("Enter system prompt")))&&u(D,"placeholder",V),K&4&&Ol(D,C[2].system),(!U||K&16)&&A!==(A=C[4].t("Advanced Params")+"")&&ye(j,A);const Le={};!W&&K&4&&(W=!0,Le.params=C[2],Te(()=>W=!1)),x.$set(Le)},i(C){U||(H(a.$$.fragment,C),H($),H(te),H(x.$$.fragment,C),U=!0)},o(C){L(a.$$.fragment,C),L($),L(te),L(x.$$.fragment,C),U=!1},d(C){C&&d(e),ie(a),$&&$.d(),te&&te.d(),ie(x),Q=!1,jt(Y)}}}function Ha(s,e,t){let l;const n=gl(),r=kt("i18n");we(s,r,_=>t(4,l=_));let{models:o=[]}=e,{chatFiles:i=[]}=e,{valves:a={}}=e,{params:f={}}=e;const c=()=>{n("close")},h=_=>{i.splice(_,1),t(0,i)};function v(_){a=_,t(1,a)}function g(){f.system=this.value,t(2,f)}function b(_){f=_,t(2,f)}return s.$$set=_=>{"models"in _&&t(3,o=_.models),"chatFiles"in _&&t(0,i=_.chatFiles),"valves"in _&&t(1,a=_.valves),"params"in _&&t(2,f=_.params)},[i,a,f,o,l,n,r,c,h,v,g,b]}class Nn extends tt{constructor(e){super(),lt(this,e,Ha,Va,et,{models:3,chatFiles:0,valves:1,params:2})}}function Ba(s){let e,t,l;function n(o){s[15](o)}let r={$$slots:{default:[Na]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.show=s[0]),e=new Hn({props:r}),be.push(()=>Me(e,"show",n)),{c(){ne(e.$$.fragment)},l(o){re(e.$$.fragment,o)},m(o,i){oe(e,o,i),l=!0},p(o,i){const a={};i&65567&&(a.$$scope={dirty:i,ctx:o}),!t&&i&1&&(t=!0,a.show=o[0],Te(()=>t=!1)),e.$set(a)},i(o){l||(H(e.$$.fragment,o),l=!0)},o(o){L(e.$$.fragment,o),l=!1},d(o){ie(e,o)}}}function La(s){let e,t,l=s[0]&&pn(s);return{c(){l&&l.c(),e=xe()},l(n){l&&l.l(n),e=xe()},m(n,r){l&&l.m(n,r),B(n,e,r),t=!0},p(n,r){n[0]?l?(l.p(n,r),r&1&&H(l,1)):(l=pn(n),l.c(),H(l,1),l.m(e.parentNode,e)):l&&(Ge(),L(l,1,1,()=>{l=null}),Qe())},i(n){t||(H(l),t=!0)},o(n){L(l),t=!1},d(n){n&&d(e),l&&l.d(n)}}}function Na(s){let e,t,l,n,r,o;function i(h){s[11](h)}function a(h){s[12](h)}function f(h){s[13](h)}let c={models:s[4]};return s[1]!==void 0&&(c.chatFiles=s[1]),s[2]!==void 0&&(c.valves=s[2]),s[3]!==void 0&&(c.params=s[3]),t=new Nn({props:c}),be.push(()=>Me(t,"chatFiles",i)),be.push(()=>Me(t,"valves",a)),be.push(()=>Me(t,"params",f)),t.$on("close",s[14]),{c(){e=k("div"),ne(t.$$.fragment),this.h()},l(h){e=y(h,"DIV",{class:!0});var v=E(e);re(t.$$.fragment,v),v.forEach(d),this.h()},h(){u(e,"class","px-6 py-4 h-full")},m(h,v){B(h,e,v),oe(t,e,null),o=!0},p(h,v){const g={};v&16&&(g.models=h[4]),!l&&v&2&&(l=!0,g.chatFiles=h[1],Te(()=>l=!1)),!n&&v&4&&(n=!0,g.valves=h[2],Te(()=>n=!1)),!r&&v&8&&(r=!0,g.params=h[3],Te(()=>r=!1)),t.$set(g)},i(h){o||(H(t.$$.fragment,h),o=!0)},o(h){L(t.$$.fragment,h),o=!1},d(h){h&&d(e),ie(t)}}}function pn(s){let e,t,l,n,r,o,i,a,f;function c(b){s[7](b)}function h(b){s[8](b)}function v(b){s[9](b)}let g={models:s[4]};return s[1]!==void 0&&(g.chatFiles=s[1]),s[2]!==void 0&&(g.valves=s[2]),s[3]!==void 0&&(g.params=s[3]),n=new Nn({props:g}),be.push(()=>Me(n,"chatFiles",c)),be.push(()=>Me(n,"valves",h)),be.push(()=>Me(n,"params",v)),n.$on("close",s[10]),{c(){e=k("div"),t=k("div"),l=k("div"),ne(n.$$.fragment),this.h()},l(b){e=y(b,"DIV",{class:!0});var _=E(e);t=y(_,"DIV",{class:!0});var p=E(t);l=y(p,"DIV",{class:!0});var w=E(l);re(n.$$.fragment,w),w.forEach(d),p.forEach(d),_.forEach(d),this.h()},h(){u(l,"class","w-full h-full px-5 py-4 bg-white dark:shadow-lg dark:bg-gray-850 border border-gray-50 dark:border-gray-800 rounded-xl z-50 pointer-events-auto overflow-y-auto scrollbar-hidden"),u(t,"class","pr-4 pt-14 pb-8 w-[24rem] h-full"),u(e,"class","absolute bottom-0 right-0 z-20 h-full pointer-events-none")},m(b,_){B(b,e,_),m(e,t),m(t,l),oe(n,l,null),f=!0},p(b,_){const p={};_&16&&(p.models=b[4]),!r&&_&2&&(r=!0,p.chatFiles=b[1],Te(()=>r=!1)),!o&&_&4&&(o=!0,p.valves=b[2],Te(()=>o=!1)),!i&&_&8&&(i=!0,p.params=b[3],Te(()=>i=!1)),n.$set(p)},i(b){f||(H(n.$$.fragment,b),b&&(a||kl(()=>{a=xl(t,vr,{duration:200,axis:"x"}),a.start()})),f=!0)},o(b){L(n.$$.fragment,b),f=!1},d(b){b&&d(e),ie(n)}}}function za(s){let e,t,l,n;const r=[La,Ba],o=[];function i(a,f){return a[5]?0:1}return e=i(s),t=o[e]=r[e](s),{c(){t.c(),l=xe()},l(a){t.l(a),l=xe()},m(a,f){o[e].m(a,f),B(a,l,f),n=!0},p(a,[f]){let c=e;e=i(a),e===c?o[e].p(a,f):(Ge(),L(o[c],1,1,()=>{o[c]=null}),Qe(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),H(t,1),t.m(l.parentNode,l))},i(a){n||(H(t),n=!0)},o(a){L(t),n=!1},d(a){a&&d(l),o[e].d(a)}}}function Oa(s,e,t){let{show:l=!1}=e,{models:n=[]}=e,{chatId:r=null}=e,{chatFiles:o=[]}=e,{valves:i={}}=e,{params:a={}}=e,f=!1;yl(()=>{const D=window.matchMedia("(min-width: 1024px)"),V=M=>{M.matches?t(5,f=!0):t(5,f=!1)};return D.addEventListener("change",V),V(D),()=>{D.removeEventListener("change",V)}});function c(D){o=D,t(1,o)}function h(D){i=D,t(2,i)}function v(D){a=D,t(3,a)}const g=()=>{t(0,l=!1)};function b(D){o=D,t(1,o)}function _(D){i=D,t(2,i)}function p(D){a=D,t(3,a)}const w=()=>{t(0,l=!1)};function I(D){l=D,t(0,l)}return s.$$set=D=>{"show"in D&&t(0,l=D.show),"models"in D&&t(4,n=D.models),"chatId"in D&&t(6,r=D.chatId),"chatFiles"in D&&t(1,o=D.chatFiles),"valves"in D&&t(2,i=D.valves),"params"in D&&t(3,a=D.params)},[l,o,i,a,n,f,r,c,h,v,g,b,_,p,w,I]}class Aa extends tt{constructor(e){super(),lt(this,e,Oa,za,et,{show:0,models:4,chatId:6,chatFiles:1,valves:2,params:3})}}const{document:Zl}=An;function _n(s,e,t){const l=s.slice();return l[89]=e[t],l}function vn(s){var o;let e,t,l;function n(i){s[45](i)}let r={submitPrompt:s[37],stopResponse:s[39],modelId:((o=s[15])==null?void 0:o.at(0))??null,chatId:s[26],eventTarget:s[34]};return s[22]!==void 0&&(r.files=s[22]),e=new Ma({props:r}),be.push(()=>Me(e,"files",n)),{c(){ne(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,a){oe(e,i,a),l=!0},p(i,a){var c;const f={};a[0]&32768&&(f.modelId=((c=i[15])==null?void 0:c.at(0))??null),a[0]&67108864&&(f.chatId=i[26]),!t&&a[0]&4194304&&(t=!0,f.files=i[22],Te(()=>t=!1)),e.$set(f)},i(i){l||(H(e.$$.fragment,i),l=!0)},o(i){L(e.$$.fragment,i),l=!1},d(i){ie(e,i)}}}function bn(s){var de,ge;let e,t,l,n,r,o,i,a,f,c,h,v,g,b,_,p,w,I,D,V,M,N,Z,O,G,A,j,q,J,x,W,U,Q,Y,$,te,ue,De,Ie=(((de=s[27])==null?void 0:de.backgroundImageUrl)??null)&&wn(s);function ae(P){s[46](P)}function C(P){s[47](P)}function K(P){s[48](P)}let Le={title:s[19],shareEnabled:s[23].length>0,chat:s[18],initNewChat:s[35]};s[1]!==void 0&&(Le.selectedModels=s[1]),s[14]!==void 0&&(Le.showModelSelector=s[14]),s[5]!==void 0&&(Le.showControls=s[5]),l=new na({props:Le}),be.push(()=>Me(l,"selectedModels",ae)),be.push(()=>Me(l,"showModelSelector",C)),be.push(()=>Me(l,"showControls",K));let Ue=s[32].length>0&&s[23].length===0&&!s[26]&&s[1].length<=1&&kn(s);function se(P){s[51](P)}function he(P){s[52](P)}function Re(P){s[53](P)}function Ke(P){s[54](P)}let $e={chatId:s[26],selectedModels:s[1],processing:ja,bottomPadding:s[22].length>0,sendPrompt:s[38],continueGeneration:s[41],regenerateResponse:s[40],chatActionHandler:s[36]};s[3]!==void 0&&($e.history=s[3]),s[23]!==void 0&&($e.messages=s[23]),s[6]!==void 0&&($e.autoScroll=s[6]),s[20]!==void 0&&($e.prompt=s[20]),v=new Un({props:$e}),be.push(()=>Me(v,"history",se)),be.push(()=>Me(v,"messages",he)),be.push(()=>Me(v,"autoScroll",Re)),be.push(()=>Me(v,"prompt",Ke));function rt(P){s[58](P)}function st(P){s[59](P)}function _t(P){s[60](P)}function dt(P){s[61](P)}function mt(P){s[62](P)}function yt(P){s[63](P)}let ht={availableToolIds:s[15].reduce(s[57],[]),transparentBackground:((ge=s[27])==null?void 0:ge.backgroundImageUrl)??!1,selectedModels:s[1],messages:s[23],submitPrompt:s[37],stopResponse:s[39]};s[22]!==void 0&&(ht.files=s[22]),s[20]!==void 0&&(ht.prompt=s[20]),s[6]!==void 0&&(ht.autoScroll=s[6]),s[16]!==void 0&&(ht.selectedToolIds=s[16]),s[17]!==void 0&&(ht.webSearchEnabled=s[17]),s[2]!==void 0&&(ht.atSelectedModel=s[2]),M=new Ti({props:ht}),be.push(()=>Me(M,"files",rt)),be.push(()=>Me(M,"prompt",st)),be.push(()=>Me(M,"autoScroll",_t)),be.push(()=>Me(M,"selectedToolIds",dt)),be.push(()=>Me(M,"webSearchEnabled",mt)),be.push(()=>Me(M,"atSelectedModel",yt));function Pt(P){s[65](P)}function xt(P){s[66](P)}function Et(P){s[67](P)}function X(P){s[68](P)}let Ee={models:s[15].reduce(s[64],[])};return s[5]!==void 0&&(Ee.show=s[5]),s[21]!==void 0&&(Ee.chatFiles=s[21]),s[24]!==void 0&&(Ee.params=s[24]),s[25]!==void 0&&(Ee.valves=s[25]),x=new Aa({props:Ee}),be.push(()=>Me(x,"show",Pt)),be.push(()=>Me(x,"chatFiles",xt)),be.push(()=>Me(x,"params",Et)),be.push(()=>Me(x,"valves",X)),{c(){e=k("div"),Ie&&Ie.c(),t=R(),ne(l.$$.fragment),i=R(),Ue&&Ue.c(),a=R(),f=k("div"),c=k("div"),h=k("div"),ne(v.$$.fragment),D=R(),V=k("div"),ne(M.$$.fragment),J=R(),ne(x.$$.fragment),this.h()},l(P){e=y(P,"DIV",{class:!0});var le=E(e);Ie&&Ie.l(le),t=F(le),re(l.$$.fragment,le),i=F(le),Ue&&Ue.l(le),a=F(le),f=y(le,"DIV",{class:!0});var qe=E(f);c=y(qe,"DIV",{class:!0,id:!0});var We=E(c);h=y(We,"DIV",{class:!0});var it=E(h);re(v.$$.fragment,it),it.forEach(d),We.forEach(d),D=F(qe),V=y(qe,"DIV",{class:!0});var ct=E(V);re(M.$$.fragment,ct),ct.forEach(d),qe.forEach(d),J=F(le),re(x.$$.fragment,le),le.forEach(d),this.h()},h(){u(h,"class",w="h-full w-full flex flex-col "+(s[0]?"py-4":"pt-2 pb-4")),u(c,"class",I="pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10 scrollbar-hidden "+(s[5]?"lg:pr-[24rem]":"")),u(c,"id","messages-container"),u(V,"class",q=s[5]?"lg:pr-[24rem]":""),u(f,"class","flex flex-col flex-auto z-10"),u(e,"class",$="h-screen max-h-[100dvh] "+(s[31]?"md:max-w-[calc(100%-260px)]":"")+" w-full max-w-full flex flex-col")},m(P,le){B(P,e,le),Ie&&Ie.m(e,null),m(e,t),oe(l,e,null),m(e,i),Ue&&Ue.m(e,null),m(e,a),m(e,f),m(f,c),m(c,h),oe(v,h,null),s[55](c),m(f,D),m(f,V),oe(M,V,null),m(e,J),oe(x,e,null),te=!0,ue||(De=fe(c,"scroll",s[56]),ue=!0)},p(P,le){var vt,It;((vt=P[27])==null?void 0:vt.backgroundImageUrl)??null?Ie?Ie.p(P,le):(Ie=wn(P),Ie.c(),Ie.m(e,t)):Ie&&(Ie.d(1),Ie=null);const qe={};le[0]&524288&&(qe.title=P[19]),le[0]&8388608&&(qe.shareEnabled=P[23].length>0),le[0]&262144&&(qe.chat=P[18]),!n&&le[0]&2&&(n=!0,qe.selectedModels=P[1],Te(()=>n=!1)),!r&&le[0]&16384&&(r=!0,qe.showModelSelector=P[14],Te(()=>r=!1)),!o&&le[0]&32&&(o=!0,qe.showControls=P[5],Te(()=>o=!1)),l.$set(qe),P[32].length>0&&P[23].length===0&&!P[26]&&P[1].length<=1?Ue?(Ue.p(P,le),le[0]&75497474|le[1]&2&&H(Ue,1)):(Ue=kn(P),Ue.c(),H(Ue,1),Ue.m(e,a)):Ue&&(Ge(),L(Ue,1,1,()=>{Ue=null}),Qe());const We={};le[0]&67108864&&(We.chatId=P[26]),le[0]&2&&(We.selectedModels=P[1]),le[0]&4194304&&(We.bottomPadding=P[22].length>0),!g&&le[0]&8&&(g=!0,We.history=P[3],Te(()=>g=!1)),!b&&le[0]&8388608&&(b=!0,We.messages=P[23],Te(()=>b=!1)),!_&&le[0]&64&&(_=!0,We.autoScroll=P[6],Te(()=>_=!1)),!p&&le[0]&1048576&&(p=!0,We.prompt=P[20],Te(()=>p=!1)),v.$set(We),(!te||le[0]&1&&w!==(w="h-full w-full flex flex-col "+(P[0]?"py-4":"pt-2 pb-4")))&&u(h,"class",w),(!te||le[0]&32&&I!==(I="pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10 scrollbar-hidden "+(P[5]?"lg:pr-[24rem]":"")))&&u(c,"class",I);const it={};le[0]&268468224&&(it.availableToolIds=P[15].reduce(P[57],[])),le[0]&134217728&&(it.transparentBackground=((It=P[27])==null?void 0:It.backgroundImageUrl)??!1),le[0]&2&&(it.selectedModels=P[1]),le[0]&8388608&&(it.messages=P[23]),!N&&le[0]&4194304&&(N=!0,it.files=P[22],Te(()=>N=!1)),!Z&&le[0]&1048576&&(Z=!0,it.prompt=P[20],Te(()=>Z=!1)),!O&&le[0]&64&&(O=!0,it.autoScroll=P[6],Te(()=>O=!1)),!G&&le[0]&65536&&(G=!0,it.selectedToolIds=P[16],Te(()=>G=!1)),!A&&le[0]&131072&&(A=!0,it.webSearchEnabled=P[17],Te(()=>A=!1)),!j&&le[0]&4&&(j=!0,it.atSelectedModel=P[2],Te(()=>j=!1)),M.$set(it),(!te||le[0]&32&&q!==(q=P[5]?"lg:pr-[24rem]":""))&&u(V,"class",q);const ct={};le[0]&268468224&&(ct.models=P[15].reduce(P[64],[])),!W&&le[0]&32&&(W=!0,ct.show=P[5],Te(()=>W=!1)),!U&&le[0]&2097152&&(U=!0,ct.chatFiles=P[21],Te(()=>U=!1)),!Q&&le[0]&16777216&&(Q=!0,ct.params=P[24],Te(()=>Q=!1)),!Y&&le[0]&33554432&&(Y=!0,ct.valves=P[25],Te(()=>Y=!1)),x.$set(ct),(!te||le[1]&1&&$!==($="h-screen max-h-[100dvh] "+(P[31]?"md:max-w-[calc(100%-260px)]":"")+" w-full max-w-full flex flex-col"))&&u(e,"class",$)},i(P){te||(H(l.$$.fragment,P),H(Ue),H(v.$$.fragment,P),H(M.$$.fragment,P),H(x.$$.fragment,P),te=!0)},o(P){L(l.$$.fragment,P),L(Ue),L(v.$$.fragment,P),L(M.$$.fragment,P),L(x.$$.fragment,P),te=!1},d(P){P&&d(e),Ie&&Ie.d(),ie(l),Ue&&Ue.d(),ie(v),s[55](null),ie(M),ie(x),ue=!1,De()}}}function wn(s){let e,t,l,n;return{c(){e=k("div"),l=R(),n=k("div"),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0}),E(e).forEach(d),l=F(r),n=y(r,"DIV",{class:!0}),E(n).forEach(d),this.h()},h(){u(e,"class",t="absolute "+(s[31]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat"),Ht(e,"background-image","url("+s[27].backgroundImageUrl+")"),u(n,"class","absolute top-0 left-0 w-full h-full bg-gradient-to-t from-white to-white/85 dark:from-gray-900 dark:to-[#171717]/90 z-0")},m(r,o){B(r,e,o),B(r,l,o),B(r,n,o)},p(r,o){o[1]&1&&t!==(t="absolute "+(r[31]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat")&&u(e,"class",t),o[0]&134217728&&Ht(e,"background-image","url("+r[27].backgroundImageUrl+")")},d(r){r&&(d(e),d(l),d(n))}}}function kn(s){let e,t,l,n,r=pt(s[32].filter(s[49])),o=[];for(let a=0;a<r.length;a+=1)o[a]=yn(_n(s,r,a));const i=a=>L(o[a],1,1,()=>{o[a]=null});return{c(){e=k("div"),t=k("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=y(a,"DIV",{class:!0});var f=E(e);t=y(f,"DIV",{class:!0});var c=E(t);for(let h=0;h<o.length;h+=1)o[h].l(c);c.forEach(d),f.forEach(d),this.h()},h(){u(t,"class","flex flex-col gap-1 w-full"),u(e,"class",l="absolute top-[4.25rem] w-full "+(s[31]?"md:max-w-[calc(100%-260px)]":"")+" "+(s[5]?"lg:pr-[24rem]":"")+" z-20")},m(a,f){B(a,e,f),m(e,t);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(t,null);n=!0},p(a,f){if(f[1]&2){r=pt(a[32].filter(a[49]));let c;for(c=0;c<r.length;c+=1){const h=_n(a,r,c);o[c]?(o[c].p(h,f),H(o[c],1)):(o[c]=yn(h),o[c].c(),H(o[c],1),o[c].m(t,null))}for(Ge(),c=r.length;c<o.length;c+=1)i(c);Qe()}(!n||f[0]&32|f[1]&1&&l!==(l="absolute top-[4.25rem] w-full "+(a[31]?"md:max-w-[calc(100%-260px)]":"")+" "+(a[5]?"lg:pr-[24rem]":"")+" z-20"))&&u(e,"class",l)},i(a){if(!n){for(let f=0;f<r.length;f+=1)H(o[f]);n=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)L(o[f]);n=!1},d(a){a&&d(e),Xt(o,a)}}}function yn(s){let e,t;return e=new po({props:{banner:s[89]}}),e.$on("dismiss",s[50]),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,n){const r={};n[1]&2&&(r.banner=l[89]),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function Ua(s){let e,t,l,n,r,o,i,a,f,c,h;Zl.title=e=`
		`+(s[19]?`${s[19].length>30?`${s[19].slice(0,30)}...`:s[19]} | ${s[30]}`:`${s[30]}`)+`
	`;function v(p){s[42](p)}let g={title:s[9],message:s[10],input:s[11],inputPlaceholder:s[12]};s[8]!==void 0&&(g.show=s[8]),o=new Lr({props:g}),be.push(()=>Me(o,"show",v)),o.$on("confirm",s[43]),o.$on("cancel",s[44]);let b=s[29]&&vn(s),_=(!s[0]||s[4]&&s[0])&&bn(s);return{c(){t=R(),l=k("audio"),r=R(),ne(o.$$.fragment),a=R(),b&&b.c(),f=R(),_&&_.c(),c=xe(),this.h()},l(p){On("svelte-1123lr8",Zl.head).forEach(d),t=F(p),l=y(p,"AUDIO",{id:!0,src:!0,style:!0}),E(l).forEach(d),r=F(p),re(o.$$.fragment,p),a=F(p),b&&b.l(p),f=F(p),_&&_.l(p),c=xe(),this.h()},h(){u(l,"id","audioElement"),ul(l.src,n="")||u(l,"src",n),Ht(l,"display","none")},m(p,w){B(p,t,w),B(p,l,w),B(p,r,w),oe(o,p,w),B(p,a,w),b&&b.m(p,w),B(p,f,w),_&&_.m(p,w),B(p,c,w),h=!0},p(p,w){(!h||w[0]&1074266112)&&e!==(e=`
		`+(p[19]?`${p[19].length>30?`${p[19].slice(0,30)}...`:p[19]} | ${p[30]}`:`${p[30]}`)+`
	`)&&(Zl.title=e);const I={};w[0]&512&&(I.title=p[9]),w[0]&1024&&(I.message=p[10]),w[0]&2048&&(I.input=p[11]),w[0]&4096&&(I.inputPlaceholder=p[12]),!i&&w[0]&256&&(i=!0,I.show=p[8],Te(()=>i=!1)),o.$set(I),p[29]?b?(b.p(p,w),w[0]&536870912&&H(b,1)):(b=vn(p),b.c(),H(b,1),b.m(f.parentNode,f)):b&&(Ge(),L(b,1,1,()=>{b=null}),Qe()),!p[0]||p[4]&&p[0]?_?(_.p(p,w),w[0]&17&&H(_,1)):(_=bn(p),_.c(),H(_,1),_.m(c.parentNode,c)):_&&(Ge(),L(_,1,1,()=>{_=null}),Qe())},i(p){h||(H(o.$$.fragment,p),H(b),H(_),h=!0)},o(p){L(o.$$.fragment,p),L(b),L(_),h=!1},d(p){p&&(d(t),d(l),d(r),d(a),d(f),d(c)),ie(o,p),b&&b.d(p),_&&_.d(p)}}}let ja="";function Pa(s,e,t){let l,n,r,o,i,a,f,c,h,v,g,b;we(s,fl,T=>t(26,l=T)),we(s,Kt,T=>t(27,r=T)),we(s,El,T=>t(28,o=T)),we(s,jl,T=>t(29,i=T)),we(s,Gn,T=>t(72,a=T)),we(s,ql,T=>t(73,f=T)),we(s,Pn,T=>t(74,c=T)),we(s,Il,T=>t(75,h=T)),we(s,Cn,T=>t(30,v=T)),we(s,Ul,T=>t(31,g=T)),we(s,Qn,T=>t(32,b=T));const _=kt("i18n");we(s,_,T=>t(71,n=T));let{chatIdProp:p=""}=e,w=!1;const I=new EventTarget;let D=!1,V=!1,M=!0,N,Z=!1,O="",G="",A=!1,j="",q=null,J=!0,x=[""],W,U=[],Q=[],Y=!1,$=null,te="",ue="",De=[],Ie=[],ae=[],C={messages:{},currentId:null},K={},Le={};const Ue=async(T,ee)=>{var me,ce;if(T.chat_id===l){await Pe(),console.log(T);let ve=C.messages[T.message_id];const z=((me=T==null?void 0:T.data)==null?void 0:me.type)??null,Oe=((ce=T==null?void 0:T.data)==null?void 0:ce.data)??null;z==="status"?ve!=null&&ve.statusHistory?ve.statusHistory.push(Oe):ve.statusHistory=[Oe]:z==="citation"?ve!=null&&ve.citations?ve.citations.push(Oe):ve.citations=[Oe]:z==="message"?ve.content+=Oe.content:z==="replace"?ve.content=Oe.content:z==="confirmation"?(t(13,q=ee),t(11,A=!1),t(8,Z=!0),t(9,O=Oe.title),t(10,G=Oe.message)):z==="input"?(t(13,q=ee),t(11,A=!0),t(8,Z=!0),t(9,O=Oe.title),t(10,G=Oe.message),t(12,j=Oe.placeholder)):console.log("Unknown message type",Oe),t(23,ae),t(3,C)}};yl(async()=>{const T=async ee=>{if(ee.origin===window.origin){if(console.log("Message received from iframe:",ee.data),ee.data.type==="input:prompt"){console.log(ee.data.text);const me=document.getElementById("chat-textarea");me&&(t(20,ue=ee.data.text),me.focus())}ee.data.type==="action:submit"&&(console.log(ee.data.text),ue!==""&&(await Pe(),_t(ue))),ee.data.type==="input:prompt:submit"&&(console.log(ee.data.text),ue!==""&&(await Pe(),_t(ee.data.text)))}};return window.addEventListener("message",T),a.on("chat-events",Ue),l?(r.saveChatHistory??!0)||await Fl("/"):fl.subscribe(async ee=>{ee||await se()}),()=>{window.removeEventListener("message",T),a.off("chat-events")}});const se=async()=>{var me;window.history.replaceState(C.state,"","/"),await fl.set(""),t(6,M=!0),t(19,te=""),t(23,ae=[]),t(3,C={messages:{},currentId:null}),t(21,De=[]),t(24,K={}),c.url.searchParams.get("models")?t(1,x=(me=c.url.searchParams.get("models"))==null?void 0:me.split(",")):r!=null&&r.models?t(1,x=r==null?void 0:r.models):h!=null&&h.default_models?(console.log((h==null?void 0:h.default_models.split(","))??""),t(1,x=h==null?void 0:h.default_models.split(","))):t(1,x=[""]),c.url.searchParams.get("q")&&(t(20,ue=c.url.searchParams.get("q")??""),ue&&(await Pe(),_t(ue))),t(1,x=x.map(ce=>o.map(ve=>ve.id).includes(ce)?ce:""));const T=await ds(localStorage.token);T?Kt.set(T.ui):Kt.set(JSON.parse(localStorage.getItem("settings")??"{}"));const ee=document.getElementById("chat-textarea");setTimeout(()=>ee==null?void 0:ee.focus(),0)},he=async()=>{if(fl.set(p),t(18,$=await tr(localStorage.token,l).catch(async T=>(await Fl("/"),null))),$){await ge();const T=$.chat;if(T){console.log(T),t(1,x=((T==null?void 0:T.models)??void 0)!==void 0?T.models:[T.models??""]),t(3,C=((T==null?void 0:T.history)??void 0)!==void 0?T.history:Yn(T.messages)),t(19,te=T.title);const ee=await ds(localStorage.token);return ee?await Kt.set(ee.ui):await Kt.set(JSON.parse(localStorage.getItem("settings")??"{}")),t(24,K=(T==null?void 0:T.params)??{}),t(21,De=(T==null?void 0:T.files)??[]),t(6,M=!0),await Pe(),ae.length>0&&t(3,C.messages[ae.at(-1).id].done=!0,C),await Pe(),!0}else return null}},Re=async()=>{await Pe(),N&&t(7,N.scrollTop=N.scrollHeight,N)},Ke=T=>{const ee=C.messages[T];return ee.parentId?[...Ke(ee.parentId),ee]:[ee]},$e=async(T,ee,me,ce)=>{await jn.run({querySelector:".mermaid"});const ve=await gr(localStorage.token,{model:ee,messages:ce.map(z=>({id:z.id,role:z.role,content:z.content,info:z.info?z.info:void 0,timestamp:z.timestamp})),chat_id:T,session_id:a==null?void 0:a.id,id:me}).catch(z=>(Be.error(z),ce.at(-1).error={content:z},null));if(ve!==null)for(const z of ve.messages)t(3,C.messages[z.id]={...C.messages[z.id],...C.messages[z.id].content!==z.content?{originalContent:C.messages[z.id].content}:{},...z},C);l==T&&(r.saveChatHistory??!0)&&(t(18,$=await bl(localStorage.token,T,{models:x,messages:ce,history:C,params:K,files:De})),await al.set(await cl(localStorage.token)))},rt=async(T,ee,me,ce)=>{const ve=await pr(localStorage.token,ee,{model:me,messages:ae.map(z=>({id:z.id,role:z.role,content:z.content,info:z.info?z.info:void 0,timestamp:z.timestamp})),chat_id:T,session_id:a==null?void 0:a.id,id:ce}).catch(z=>(Be.error(z),ae.at(-1).error={content:z},null));if(ve!==null)for(const z of ve.messages)t(3,C.messages[z.id]={...C.messages[z.id],...C.messages[z.id].content!==z.content?{originalContent:C.messages[z.id].content}:{},...z},C);l==T&&(r.saveChatHistory??!0)&&(t(18,$=await bl(localStorage.token,T,{models:x,messages:ae,history:C,params:K,files:De})),await al.set(await cl(localStorage.token)))},st=async(T,ee="")=>setInterval(()=>{a==null||a.emit("usage",{action:"chat",model:T,chat_id:ee})},1e3),_t=async(T,{_raw:ee=!1}={})=>{let me=[];if(console.log("submitPrompt",l),t(1,x=x.map(ce=>o.map(ve=>ve.id).includes(ce)?ce:"")),x.includes(""))Be.error(n.t("Model not selected"));else if(ae.length!=0&&ae.at(-1).done!=!0)console.log("wait");else if(ae.length!=0&&ae.at(-1).error)Be.error(n.t("Oops! There was an error in the previous response. Please try again or contact admin."));else if(Ie.length>0&&Ie.filter(ce=>ce.type!=="image"&&ce.status!=="processed").length>0)Be.error(n.t("Oops! Hold tight! Your files are still in the processing oven. We're cooking them up to perfection. Please be patient and we'll let you know once they're ready."));else{const ce=document.getElementById("chat-textarea");ce&&(ce.value="",ce.style.height="");const ve=JSON.parse(JSON.stringify(Ie));De.push(...ve.filter(ot=>["doc","file","collection"].includes(ot.type))),t(21,De=De.filter((ot,Ye,Xe)=>Xe.findIndex(ut=>JSON.stringify(ut)===JSON.stringify(ot))===Ye)),t(22,Ie=[]),t(20,ue="");let z=cs(),Oe={id:z,parentId:ae.length!==0?ae.at(-1).id:null,childrenIds:[],role:"user",content:T,files:ve.length>0?ve:void 0,timestamp:Math.floor(Date.now()/1e3),models:x.filter((ot,Ye)=>x.indexOf(ot)===Ye)};t(3,C.messages[z]=Oe,C),t(3,C.currentId=z,C),ae.length!==0&&C.messages[ae.at(-1).id].childrenIds.push(z),await Pe(),me=await dt(T,z,{newChat:!0})}return me},dt=async(T,ee,{modelId:me=null,newChat:ce=!1}={})=>{let ve=[],z=me?[me]:W!==void 0?[W.id]:x;const Oe={};for(const Ye of z){const Xe=o.filter(ut=>ut.id===Ye).at(0);if(Xe){let ut=cs(),bt={parentId:ee,id:ut,childrenIds:[],role:"assistant",content:"",model:Xe.id,modelName:Xe.name??Xe.id,userContext:null,timestamp:Math.floor(Date.now()/1e3)};t(3,C.messages[ut]=bt,C),t(3,C.currentId=ut,C),ee!==null&&t(3,C.messages[ee].childrenIds=[...C.messages[ee].childrenIds,ut],C),Oe[Ye]=ut}}await Pe(),ce&&ae.length==2&&(r.saveChatHistory??!0?(t(18,$=await er(localStorage.token,{id:l,title:n.t("New Chat"),models:x,system:r.system??void 0,params:K,messages:ae,history:C,tags:[],timestamp:Date.now()})),await al.set(await cl(localStorage.token)),await fl.set($.id)):await fl.set("local"),await Pe());const ot=JSON.parse(JSON.stringify(l));return await Promise.all(z.map(async Ye=>{var ut,bt,St;console.log("modelId",Ye);const Xe=o.filter(Mt=>Mt.id===Ye).at(0);if(Xe){ae.some(Ae=>{var je;return(je=Ae.files)==null?void 0:je.some(He=>He.type==="image")})&&!(((St=(bt=(ut=Xe.info)==null?void 0:ut.meta)==null?void 0:bt.capabilities)==null?void 0:St.vision)??!0)&&Be.error(n.t("Model {{modelName}} is not vision capable",{modelName:Xe.name??Xe.id}));let Ct=Oe[Ye],Jt=C.messages[Ct],wt=null;if(((r==null?void 0:r.memory)??!1)&&wt===null){const Ae=await dr(localStorage.token,T).catch(je=>(Be.error(je),null));Ae&&(Ae.documents[0].length>0&&(wt=Ae.documents[0].reduce((je,He,gt)=>{const Fe=Ae.metadatas[0][gt].created_at,Ze=new Date(Fe*1e3).toISOString().split("T")[0];return`${je}${gt+1}. [${Ze}]. ${He}
`},"")),console.log(wt))}Jt.userContext=wt;const Gt=await st(Xe.id,ot);Y&&await de(Xe.id,ee,Ct);let Nt=null;(Xe==null?void 0:Xe.owned_by)==="openai"?Nt=await yt(Xe,T,Ct,ot):Xe&&(Nt=await mt(Xe,T,Ct,ot)),ve.push(Nt),Gt&&clearInterval(Gt)}else Be.error(n.t("Model {{modelId}} not found",{modelId:Ye}))})),await al.set(await cl(localStorage.token)),ve},mt=async(T,ee,me,ce)=>{var St,Mt,Ct,Jt,wt,Gt,Nt;let ve=null;const z=C.messages[me];await Pe(),Re();const Oe=[K!=null&&K.system||r.system||((z==null?void 0:z.userContext)??null)?{role:"system",content:`${fs((K==null?void 0:K.system)??(r==null?void 0:r.system)??"",f.name,r!=null&&r.userLocation?await hs(localStorage.token):void 0)}${(z==null?void 0:z.userContext)??null?`

User Context:
${(z==null?void 0:z.userContext)??""}`:""}`}:void 0,...ae].filter(Ae=>{var je;return(je=Ae==null?void 0:Ae.content)==null?void 0:je.trim()}).map((Ae,je,He)=>{var Ze;const gt={role:Ae.role,content:Ae.content},Fe=(Ze=Ae.files)==null?void 0:Ze.filter(at=>at.type==="image").map(at=>at.url.slice(at.url.indexOf(",")+1));return Fe&&Fe.length>0&&Ae.role==="user"&&(gt.images=Fe),gt});let ot=-1;Oe.forEach((Ae,je)=>{Ae.images&&(ot=je)}),Oe.forEach((Ae,je)=>{je!==ot&&delete Ae.images});let Ye=JSON.parse(JSON.stringify(De));(((Mt=(St=T==null?void 0:T.info)==null?void 0:St.meta)==null?void 0:Mt.knowledge)??!1)&&Ye.push(...T.info.meta.knowledge),z!=null&&z.files&&Ye.push(...z==null?void 0:z.files.filter(Ae=>["web_search_results"].includes(Ae.type))),I.dispatchEvent(new CustomEvent("chat:start",{detail:{id:me}})),await Pe();const[Xe,ut]=await Xn(localStorage.token,{stream:!0,model:T.id,messages:Oe,options:{...K??r.params??{},stop:(K==null?void 0:K.stop)??((Ct=r==null?void 0:r.params)==null?void 0:Ct.stop)??void 0?((K==null?void 0:K.stop)??r.params.stop).map(Ae=>decodeURIComponent(JSON.parse('"'+Ae.replace(/\"/g,'\\"')+'"'))):void 0,num_predict:(K==null?void 0:K.max_tokens)??((Jt=r==null?void 0:r.params)==null?void 0:Jt.max_tokens)??void 0,repeat_penalty:(K==null?void 0:K.frequency_penalty)??((wt=r==null?void 0:r.params)==null?void 0:wt.frequency_penalty)??void 0},format:r.requestFormat??void 0,keep_alive:r.keepAlive??void 0,tool_ids:Q.length>0?Q:void 0,files:Ye.length>0?Ye:void 0,...Object.keys(Le).length?{valves:Le}:{},session_id:a==null?void 0:a.id,chat_id:l,id:me});if(Xe&&Xe.ok){console.log("controller",ut);const Ae=Xe.body.pipeThrough(new TextDecoderStream).pipeThrough(Kn(`
`)).getReader();for(;;){const{value:je,done:He}=await Ae.read();if(He||V||ce!==l){if(z.done=!0,t(23,ae),t(3,C),V)ut.abort("User: Stop Response");else{const gt=Ke(me);await $e(ce,T.id,me,gt)}ve=z.content;break}try{let gt=je.split(`
`);for(const Fe of gt)if(Fe!==""){console.log(Fe);let Ze=JSON.parse(Fe);if("citations"in Ze){z.citations=Ze.citations;continue}if("detail"in Ze)throw Ze;if(Ze.done==!1){if(z.content==""&&Ze.message.content==`
`)continue;{z.content+=Ze.message.content;const at=Nl(z.content);at.pop(),at.length>0&&at[at.length-1]!==z.lastSentence&&(z.lastSentence=at[at.length-1],I.dispatchEvent(new CustomEvent("chat",{detail:{id:me,content:at[at.length-1]}}))),t(23,ae),t(3,C)}}else{if(z.done=!0,z.content==""&&(z.error={code:400,content:"Oops! No text generated from Ollama, Please try again."}),z.context=Ze.context??null,z.info={total_duration:Ze.total_duration,load_duration:Ze.load_duration,sample_count:Ze.sample_count,sample_duration:Ze.sample_duration,prompt_eval_count:Ze.prompt_eval_count,prompt_eval_duration:Ze.prompt_eval_duration,eval_count:Ze.eval_count,eval_duration:Ze.eval_duration},t(23,ae),t(3,C),r.notificationEnabled&&!document.hasFocus()){const at=new Notification(`${T.id}`,{body:z.content,icon:`${wl}/static/favicon.png`})}((r==null?void 0:r.responseAutoCopy)??!1)&&us(z.content),r.responseAutoPlayback&&!i&&(await Pe(),(Gt=document.getElementById(`speak-button-${z.id}`))==null||Gt.click())}}}catch(gt){console.log(gt),"detail"in gt&&Be.error(gt.detail);break}M&&Re()}l==ce&&(r.saveChatHistory??!0)&&(t(18,$=await bl(localStorage.token,ce,{messages:ae,history:C,models:x,params:K,files:De})),await al.set(await cl(localStorage.token)))}else{if(Xe!==null){const Ae=await Xe.json();console.log(Ae),"detail"in Ae?(Be.error(Ae.detail),z.error={content:Ae.detail}):(Be.error(Ae.error),z.error={content:Ae.error})}else Be.error(n.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:"Ollama"})),z.error={content:n.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:"Ollama"})};z.done=!0,t(23,ae),t(3,C)}V=!1,await Pe();let bt=((Nt=Nl(z.content))==null?void 0:Nt.at(-1))??"";if(bt&&I.dispatchEvent(new CustomEvent("chat",{detail:{id:me,content:bt}})),I.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:me,content:z.content}})),M&&Re(),ae.length==2&&ae.at(1).content!==""&&x[0]===T.id){window.history.replaceState(C.state,"",`/c/${ce}`);const Ae=await X(ee);await Ee(ce,Ae)}return ve},yt=async(T,ee,me,ce)=>{var Ye,Xe,ut,bt,St,Mt,Ct,Jt,wt,Gt,Nt,Ae,je;let ve=null;const z=C.messages[me];let Oe=JSON.parse(JSON.stringify(De));(((Xe=(Ye=T==null?void 0:T.info)==null?void 0:Ye.meta)==null?void 0:Xe.knowledge)??!1)&&Oe.push(...T.info.meta.knowledge),z!=null&&z.files&&Oe.push(...z==null?void 0:z.files.filter(He=>["web_search_results"].includes(He.type))),Re(),I.dispatchEvent(new CustomEvent("chat:start",{detail:{id:me}})),await Pe();try{const[He,gt]=await sr(localStorage.token,{stream:!0,model:T.id,stream_options:((St=(bt=(ut=T.info)==null?void 0:ut.meta)==null?void 0:bt.capabilities)==null?void 0:St.usage)??!1?{include_usage:!0}:void 0,messages:[K!=null&&K.system||r.system||((z==null?void 0:z.userContext)??null)?{role:"system",content:`${fs((K==null?void 0:K.system)??(r==null?void 0:r.system)??"",f.name,r!=null&&r.userLocation?await hs(localStorage.token):void 0)}${(z==null?void 0:z.userContext)??null?`

User Context:
${(z==null?void 0:z.userContext)??""}`:""}`}:void 0,...ae].filter(Fe=>{var Ze;return(Ze=Fe==null?void 0:Fe.content)==null?void 0:Ze.trim()}).map((Fe,Ze,at)=>{var Vt;return{role:Fe.role,...((Vt=Fe.files)==null?void 0:Vt.filter(Ft=>Ft.type==="image").length)>0&&Fe.role==="user"?{content:[{type:"text",text:at.length-1!==Ze?Fe.content:(Fe==null?void 0:Fe.raContent)??Fe.content},...Fe.files.filter(Ft=>Ft.type==="image").map(Ft=>({type:"image_url",image_url:{url:Ft.url}}))]}:{content:at.length-1!==Ze?Fe.content:(Fe==null?void 0:Fe.raContent)??Fe.content}}}),seed:(K==null?void 0:K.seed)??((Mt=r==null?void 0:r.params)==null?void 0:Mt.seed)??void 0,stop:(K==null?void 0:K.stop)??((Ct=r==null?void 0:r.params)==null?void 0:Ct.stop)??void 0?((K==null?void 0:K.stop)??r.params.stop).map(Fe=>decodeURIComponent(JSON.parse('"'+Fe.replace(/\"/g,'\\"')+'"'))):void 0,temperature:(K==null?void 0:K.temperature)??((Jt=r==null?void 0:r.params)==null?void 0:Jt.temperature)??void 0,top_p:(K==null?void 0:K.top_p)??((wt=r==null?void 0:r.params)==null?void 0:wt.top_p)??void 0,frequency_penalty:(K==null?void 0:K.frequency_penalty)??((Gt=r==null?void 0:r.params)==null?void 0:Gt.frequency_penalty)??void 0,max_tokens:(K==null?void 0:K.max_tokens)??((Nt=r==null?void 0:r.params)==null?void 0:Nt.max_tokens)??void 0,tool_ids:Q.length>0?Q:void 0,files:Oe.length>0?Oe:void 0,...Object.keys(Le).length?{valves:Le}:{},session_id:a==null?void 0:a.id,chat_id:l,id:me},`${wl}/api`);if(await Pe(),Re(),He&&He.ok&&He.body){const Fe=await co(He.body,r.splitLargeChunks);let Ze=null;for await(const at of Fe){const{value:Vt,done:Ft,citations:_l,error:il,usage:vl}=at;if(il){await ht(il,null,T,z);break}if(Ft||V||ce!==l){if(z.done=!0,t(23,ae),t(3,C),V)gt.abort("User: Stop Response");else{const Tt=Ke(me);await $e(ce,T.id,me,Tt)}ve=z.content;break}if(vl&&(Ze=vl),_l){z.citations=_l;continue}if(!(z.content==""&&Vt==`
`)){{z.content+=Vt;const Tt=Nl(z.content);Tt.pop(),Tt.length>0&&Tt[Tt.length-1]!==z.lastSentence&&(z.lastSentence=Tt[Tt.length-1],I.dispatchEvent(new CustomEvent("chat",{detail:{id:me,content:Tt[Tt.length-1]}}))),t(23,ae),t(3,C)}M&&Re()}}if(r.notificationEnabled&&!document.hasFocus()){const at=new Notification(`${T.id}`,{body:z.content,icon:`${wl}/static/favicon.png`})}r.responseAutoCopy&&us(z.content),r.responseAutoPlayback&&!i&&(await Pe(),(Ae=document.getElementById(`speak-button-${z.id}`))==null||Ae.click()),Ze&&(z.info={...Ze,openai:!0}),l==ce&&(r.saveChatHistory??!0)&&(t(18,$=await bl(localStorage.token,ce,{models:x,messages:ae,history:C,params:K,files:De})),await al.set(await cl(localStorage.token)))}else await ht(null,He,T,z)}catch(He){await ht(He,null,T,z)}t(23,ae),t(3,C),V=!1,await Pe();let ot=((je=Nl(z.content))==null?void 0:je.at(-1))??"";if(ot&&I.dispatchEvent(new CustomEvent("chat",{detail:{id:me,content:ot}})),I.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:me,content:z.content}})),M&&Re(),ae.length==2&&x[0]===T.id){window.history.replaceState(C.state,"",`/c/${ce}`);const He=await X(ee);await Ee(ce,He)}return ve},ht=async(T,ee,me,ce)=>{let ve="",z;T?z=T:ee!==null&&(z=await ee.json()),console.error(z),"detail"in z?(Be.error(z.detail),ve=z.detail):"error"in z?"message"in z.error?(Be.error(z.error.message),ve=z.error.message):(Be.error(z.error),ve=z.error):"message"in z&&(Be.error(z.message),ve=z.message),ce.error={content:n.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:me.name??me.id})+`
`+ve},ce.done=!0,t(23,ae),t(3,C)},Pt=()=>{V=!0,console.log("stopResponse")},xt=async T=>{if(console.log("regenerateResponse"),ae.length!=0){let ee=C.messages[T.parentId],me=ee.content;((ee==null?void 0:ee.models)??[...x]).length==1?await dt(me,ee.id):await dt(me,ee.id,{modelId:T.model})}},Et=async()=>{console.log("continueGeneration");const T=JSON.parse(JSON.stringify(l));if(ae.length!=0&&ae.at(-1).done==!0){const ee=C.messages[C.currentId];ee.done=!1,await Pe();const me=o.filter(ce=>ce.id===ee.model).at(0);me&&((me==null?void 0:me.owned_by)==="openai"?await yt(me,C.messages[ee.parentId].content,ee.id,T):await mt(me,C.messages[ee.parentId].content,ee.id,T))}else Be.error(n.t("Model {{modelId}} not found",{modelId}))},X=async T=>{var ee;return((ee=r==null?void 0:r.title)==null?void 0:ee.auto)??!0?await mr(localStorage.token,x[0],T,l).catch(ce=>(console.error(ce),"New Chat")):`${T}`},Ee=async(T,ee)=>{T===l&&t(19,te=ee),(r.saveChatHistory??!0)&&(t(18,$=await bl(localStorage.token,T,{title:ee})),await al.set(await cl(localStorage.token)))},de=async(T,ee,me)=>{const ce=C.messages[me],ve=C.messages[ee];ce.statusHistory=[{done:!1,action:"web_search",description:n.t("Generating search query")}],t(23,ae),t(3,C);const z=ve.content;let Oe=await _r(localStorage.token,T,ae,z).catch(Ye=>(console.log(Ye),z));Oe||(Be.warning(n.t("No search query generated")),ce.statusHistory.push({done:!0,error:!0,action:"web_search",description:"No search query generated"}),t(23,ae),t(3,C)),ce.statusHistory.push({done:!1,action:"web_search",description:n.t('Searching "{{searchQuery}}"',{searchQuery:Oe})}),t(23,ae),t(3,C);const ot=await ar(localStorage.token,Oe).catch(Ye=>(console.log(Ye),Be.error(Ye),null));ot?(ce.statusHistory.push({done:!0,action:"web_search",description:n.t("Searched {{count}} sites",{count:ot.filenames.length}),query:Oe,urls:ot.filenames}),((ce==null?void 0:ce.files)??!0)&&(ce.files=[]),ce.files.push({collection_name:ot.collection_name,name:Oe,type:"web_search_results",urls:ot.filenames}),t(23,ae),t(3,C)):(ce.statusHistory.push({done:!0,error:!0,action:"web_search",description:"No search results found"}),t(23,ae),t(3,C))},ge=async()=>await lr(localStorage.token,l).catch(async T=>[]);function P(T){Z=T,t(8,Z)}const le=T=>{T.detail?q(T.detail):q(!0)},qe=()=>{q(!1)};function We(T){Ie=T,t(22,Ie)}function it(T){x=T,t(1,x)}function ct(T){J=T,t(14,J)}function vt(T){D=T,t(5,D)}const It=T=>T.dismissible?!JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]").includes(T.id):!0,$t=T=>{const ee=T.detail;localStorage.setItem("dismissedBannerIds",JSON.stringify([ee,...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]")].filter(me=>b.find(ce=>ce.id===me))))};function tl(T){C=T,t(3,C)}function nl(T){ae=T,t(23,ae),t(3,C)}function qt(T){M=T,t(6,M)}function dl(T){ue=T,t(20,ue)}function rl(T){be[T?"unshift":"push"](()=>{N=T,t(7,N)})}const Qt=T=>{t(6,M=N.scrollHeight-N.scrollTop<=N.clientHeight+5)},S=(T,ee,me,ce)=>{var z,Oe;const ve=o.find(ot=>ot.id===ee);return((Oe=(z=ve==null?void 0:ve.info)==null?void 0:z.meta)==null?void 0:Oe.toolIds)??!1?[...new Set([...T,...ve.info.meta.toolIds])]:T};function ke(T){Ie=T,t(22,Ie)}function Se(T){ue=T,t(20,ue)}function Ce(T){M=T,t(6,M)}function nt(T){Q=T,t(16,Q)}function ft(T){Y=T,t(17,Y)}function Dt(T){W=T,t(2,W)}const Bt=(T,ee,me,ce)=>{const ve=o.find(z=>z.id===ee);return ve?[...T,ve]:T};function Rt(T){D=T,t(5,D)}function Lt(T){De=T,t(21,De)}function el(T){K=T,t(24,K)}function ol(T){Le=T,t(25,Le)}return s.$$set=T=>{"chatIdProp"in T&&t(0,p=T.chatIdProp)},s.$$.update=()=>{if(s.$$.dirty[0]&6&&t(15,U=W!==void 0?[W.id]:x),s.$$.dirty[0]&8)if(C.currentId!==null){let T=[],ee=C.messages[C.currentId];for(;ee!==null;)T.unshift({...ee}),ee=ee.parentId!==null?C.messages[ee.parentId]:null;t(23,ae=T)}else t(23,ae=[]);s.$$.dirty[0]&1&&p&&(async()=>{if(console.log(p),p&&await he()){await Pe(),t(4,w=!0),window.setTimeout(()=>Re(),0);const T=document.getElementById("chat-textarea");T==null||T.focus()}else await Fl("/")})()},[p,x,W,C,w,D,M,N,Z,O,G,A,j,q,J,U,Q,Y,$,te,ue,De,Ie,ae,K,Le,l,r,o,i,v,g,b,_,I,se,rt,_t,dt,Pt,xt,Et,P,le,qe,We,it,ct,vt,It,$t,tl,nl,qt,dl,rl,Qt,S,ke,Se,Ce,nt,ft,Dt,Bt,Rt,Lt,el,ol]}class Gc extends tt{constructor(e){super(),lt(this,e,Pa,Ua,et,{chatIdProp:0},null,[-1,-1,-1])}}function Ra(s){let e,t,l,n=s[1].t("Keyboard shortcuts")+"",r,o,i,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,c,h,v,g,b,_=s[1].t("Open new chat")+"",p,w,I,D='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">O</div>',V,M,N,Z=s[1].t("Focus chat input")+"",O,G,A,j='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Esc</div>',q,J,x,W=s[1].t("Copy last code block")+"",U,Q,Y,$='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">;</div>',te,ue,De,Ie=s[1].t("Copy last response")+"",ae,C,K,Le='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">C</div>',Ue,se,he,Re,Ke=s[1].t("Toggle settings")+"",$e,rt,st,_t='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">.</div>',dt,mt,yt,ht=s[1].t("Toggle sidebar")+"",Pt,xt,Et,X='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">S</div>',Ee,de,ge,P=s[1].t("Delete chat")+"",le,qe,We,it='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">⌫</div>',ct,vt,It,$t=s[1].t("Show shortcuts")+"",tl,nl,qt,dl='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',rl,Qt,S,ke=s[1].t("Input commands")+"",Se,Ce,nt,ft,Dt,Bt,Rt,Lt=s[1].t("Attach file")+"",el,ol,T,ee='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">#</div>',me,ce,ve,z=s[1].t("Add custom prompt")+"",Oe,ot,Ye,Xe='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',ut,bt,St,Mt=s[1].t("Select model")+"",Ct,Jt,wt,Gt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">@</div>',Nt,Ae;return{c(){e=k("div"),t=k("div"),l=k("div"),r=pe(n),o=R(),i=k("button"),i.innerHTML=a,f=R(),c=k("div"),h=k("div"),v=k("div"),g=k("div"),b=k("div"),p=pe(_),w=R(),I=k("div"),I.innerHTML=D,V=R(),M=k("div"),N=k("div"),O=pe(Z),G=R(),A=k("div"),A.innerHTML=j,q=R(),J=k("div"),x=k("div"),U=pe(W),Q=R(),Y=k("div"),Y.innerHTML=$,te=R(),ue=k("div"),De=k("div"),ae=pe(Ie),C=R(),K=k("div"),K.innerHTML=Le,Ue=R(),se=k("div"),he=k("div"),Re=k("div"),$e=pe(Ke),rt=R(),st=k("div"),st.innerHTML=_t,dt=R(),mt=k("div"),yt=k("div"),Pt=pe(ht),xt=R(),Et=k("div"),Et.innerHTML=X,Ee=R(),de=k("div"),ge=k("div"),le=pe(P),qe=R(),We=k("div"),We.innerHTML=it,ct=R(),vt=k("div"),It=k("div"),tl=pe($t),nl=R(),qt=k("div"),qt.innerHTML=dl,rl=R(),Qt=k("div"),S=k("div"),Se=pe(ke),Ce=R(),nt=k("div"),ft=k("div"),Dt=k("div"),Bt=k("div"),Rt=k("div"),el=pe(Lt),ol=R(),T=k("div"),T.innerHTML=ee,me=R(),ce=k("div"),ve=k("div"),Oe=pe(z),ot=R(),Ye=k("div"),Ye.innerHTML=Xe,ut=R(),bt=k("div"),St=k("div"),Ct=pe(Mt),Jt=R(),wt=k("div"),wt.innerHTML=Gt,this.h()},l(je){e=y(je,"DIV",{class:!0});var He=E(e);t=y(He,"DIV",{class:!0});var gt=E(t);l=y(gt,"DIV",{class:!0});var Fe=E(l);r=_e(Fe,n),Fe.forEach(d),o=F(gt),i=y(gt,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(i)!=="svelte-745w2y"&&(i.innerHTML=a),gt.forEach(d),f=F(He),c=y(He,"DIV",{class:!0});var Ze=E(c);h=y(Ze,"DIV",{class:!0});var at=E(h);v=y(at,"DIV",{class:!0});var Vt=E(v);g=y(Vt,"DIV",{class:!0});var Ft=E(g);b=y(Ft,"DIV",{class:!0});var _l=E(b);p=_e(_l,_),_l.forEach(d),w=F(Ft),I=y(Ft,"DIV",{class:!0,"data-svelte-h":!0}),Je(I)!=="svelte-lcmjz9"&&(I.innerHTML=D),Ft.forEach(d),V=F(Vt),M=y(Vt,"DIV",{class:!0});var il=E(M);N=y(il,"DIV",{class:!0});var vl=E(N);O=_e(vl,Z),vl.forEach(d),G=F(il),A=y(il,"DIV",{class:!0,"data-svelte-h":!0}),Je(A)!=="svelte-1c7wvdz"&&(A.innerHTML=j),il.forEach(d),q=F(Vt),J=y(Vt,"DIV",{class:!0});var Tt=E(J);x=y(Tt,"DIV",{class:!0});var Ql=E(x);U=_e(Ql,W),Ql.forEach(d),Q=F(Tt),Y=y(Tt,"DIV",{class:!0,"data-svelte-h":!0}),Je(Y)!=="svelte-1vgtrzt"&&(Y.innerHTML=$),Tt.forEach(d),te=F(Vt),ue=y(Vt,"DIV",{class:!0});var Sl=E(ue);De=y(Sl,"DIV",{class:!0});var Kl=E(De);ae=_e(Kl,Ie),Kl.forEach(d),C=F(Sl),K=y(Sl,"DIV",{class:!0,"data-svelte-h":!0}),Je(K)!=="svelte-m149u9"&&(K.innerHTML=Le),Sl.forEach(d),Vt.forEach(d),Ue=F(at),se=y(at,"DIV",{class:!0});var ll=E(se);he=y(ll,"DIV",{class:!0});var Cl=E(he);Re=y(Cl,"DIV",{class:!0});var Yl=E(Re);$e=_e(Yl,Ke),Yl.forEach(d),rt=F(Cl),st=y(Cl,"DIV",{class:!0,"data-svelte-h":!0}),Je(st)!=="svelte-1lfzi34"&&(st.innerHTML=_t),Cl.forEach(d),dt=F(ll),mt=y(ll,"DIV",{class:!0});var Tl=E(mt);yt=y(Tl,"DIV",{class:!0});var Xl=E(yt);Pt=_e(Xl,ht),Xl.forEach(d),xt=F(Tl),Et=y(Tl,"DIV",{class:!0,"data-svelte-h":!0}),Je(Et)!=="svelte-1egz3pd"&&(Et.innerHTML=X),Tl.forEach(d),Ee=F(ll),de=y(ll,"DIV",{class:!0});var Ml=E(de);ge=y(Ml,"DIV",{class:!0});var $l=E(ge);le=_e($l,P),$l.forEach(d),qe=F(Ml),We=y(Ml,"DIV",{class:!0,"data-svelte-h":!0}),Je(We)!=="svelte-1b065vn"&&(We.innerHTML=it),Ml.forEach(d),ct=F(ll),vt=y(ll,"DIV",{class:!0});var Vl=E(vt);It=y(Vl,"DIV",{class:!0});var es=E(It);tl=_e(es,$t),es.forEach(d),nl=F(Vl),qt=y(Vl,"DIV",{class:!0,"data-svelte-h":!0}),Je(qt)!=="svelte-714lzr"&&(qt.innerHTML=dl),Vl.forEach(d),ll.forEach(d),at.forEach(d),Ze.forEach(d),rl=F(He),Qt=y(He,"DIV",{class:!0});var ts=E(Qt);S=y(ts,"DIV",{class:!0});var ls=E(S);Se=_e(ls,ke),ls.forEach(d),ts.forEach(d),Ce=F(He),nt=y(He,"DIV",{class:!0});var ss=E(nt);ft=y(ss,"DIV",{class:!0});var ns=E(ft);Dt=y(ns,"DIV",{class:!0});var hl=E(Dt);Bt=y(hl,"DIV",{class:!0});var Hl=E(Bt);Rt=y(Hl,"DIV",{class:!0});var rs=E(Rt);el=_e(rs,Lt),rs.forEach(d),ol=F(Hl),T=y(Hl,"DIV",{class:!0,"data-svelte-h":!0}),Je(T)!=="svelte-11t0lmd"&&(T.innerHTML=ee),Hl.forEach(d),me=F(hl),ce=y(hl,"DIV",{class:!0});var Bl=E(ce);ve=y(Bl,"DIV",{class:!0});var os=E(ve);Oe=_e(os,z),os.forEach(d),ot=F(Bl),Ye=y(Bl,"DIV",{class:!0,"data-svelte-h":!0}),Je(Ye)!=="svelte-1s9pky1"&&(Ye.innerHTML=Xe),Bl.forEach(d),ut=F(hl),bt=y(hl,"DIV",{class:!0});var Ll=E(bt);St=y(Ll,"DIV",{class:!0});var is=E(St);Ct=_e(is,Mt),is.forEach(d),Jt=F(Ll),wt=y(Ll,"DIV",{class:!0,"data-svelte-h":!0}),Je(wt)!=="svelte-oivy56"&&(wt.innerHTML=Gt),Ll.forEach(d),hl.forEach(d),ns.forEach(d),ss.forEach(d),He.forEach(d),this.h()},h(){u(l,"class","text-lg font-medium self-center"),u(i,"class","self-center"),u(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),u(b,"class","text-sm"),u(I,"class","flex space-x-1 text-xs"),u(g,"class","w-full flex justify-between items-center"),u(N,"class","text-sm"),u(A,"class","flex space-x-1 text-xs"),u(M,"class","w-full flex justify-between items-center"),u(x,"class","text-sm"),u(Y,"class","flex space-x-1 text-xs"),u(J,"class","w-full flex justify-between items-center"),u(De,"class","text-sm"),u(K,"class","flex space-x-1 text-xs"),u(ue,"class","w-full flex justify-between items-center"),u(v,"class","flex flex-col space-y-3 w-full self-start"),u(Re,"class","text-sm"),u(st,"class","flex space-x-1 text-xs"),u(he,"class","w-full flex justify-between items-center"),u(yt,"class","text-sm"),u(Et,"class","flex space-x-1 text-xs"),u(mt,"class","w-full flex justify-between items-center"),u(ge,"class","text-sm"),u(We,"class","flex space-x-1 text-xs"),u(de,"class","w-full flex justify-between items-center"),u(It,"class","text-sm"),u(qt,"class","flex space-x-1 text-xs"),u(vt,"class","w-full flex justify-between items-center"),u(se,"class","flex flex-col space-y-3 w-full self-start"),u(h,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),u(c,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),u(S,"class","text-lg font-medium self-center"),u(Qt,"class","flex justify-between dark:text-gray-300 px-5"),u(Rt,"class","text-sm"),u(T,"class","flex space-x-1 text-xs"),u(Bt,"class","w-full flex justify-between items-center"),u(ve,"class","text-sm"),u(Ye,"class","flex space-x-1 text-xs"),u(ce,"class","w-full flex justify-between items-center"),u(St,"class","text-sm"),u(wt,"class","flex space-x-1 text-xs"),u(bt,"class","w-full flex justify-between items-center"),u(Dt,"class","flex flex-col space-y-3 w-full self-start"),u(ft,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),u(nt,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),u(e,"class","text-gray-700 dark:text-gray-100")},m(je,He){B(je,e,He),m(e,t),m(t,l),m(l,r),m(t,o),m(t,i),m(e,f),m(e,c),m(c,h),m(h,v),m(v,g),m(g,b),m(b,p),m(g,w),m(g,I),m(v,V),m(v,M),m(M,N),m(N,O),m(M,G),m(M,A),m(v,q),m(v,J),m(J,x),m(x,U),m(J,Q),m(J,Y),m(v,te),m(v,ue),m(ue,De),m(De,ae),m(ue,C),m(ue,K),m(h,Ue),m(h,se),m(se,he),m(he,Re),m(Re,$e),m(he,rt),m(he,st),m(se,dt),m(se,mt),m(mt,yt),m(yt,Pt),m(mt,xt),m(mt,Et),m(se,Ee),m(se,de),m(de,ge),m(ge,le),m(de,qe),m(de,We),m(se,ct),m(se,vt),m(vt,It),m(It,tl),m(vt,nl),m(vt,qt),m(e,rl),m(e,Qt),m(Qt,S),m(S,Se),m(e,Ce),m(e,nt),m(nt,ft),m(ft,Dt),m(Dt,Bt),m(Bt,Rt),m(Rt,el),m(Bt,ol),m(Bt,T),m(Dt,me),m(Dt,ce),m(ce,ve),m(ve,Oe),m(ce,ot),m(ce,Ye),m(Dt,ut),m(Dt,bt),m(bt,St),m(St,Ct),m(bt,Jt),m(bt,wt),Nt||(Ae=fe(i,"click",s[3]),Nt=!0)},p(je,He){He&2&&n!==(n=je[1].t("Keyboard shortcuts")+"")&&ye(r,n),He&2&&_!==(_=je[1].t("Open new chat")+"")&&ye(p,_),He&2&&Z!==(Z=je[1].t("Focus chat input")+"")&&ye(O,Z),He&2&&W!==(W=je[1].t("Copy last code block")+"")&&ye(U,W),He&2&&Ie!==(Ie=je[1].t("Copy last response")+"")&&ye(ae,Ie),He&2&&Ke!==(Ke=je[1].t("Toggle settings")+"")&&ye($e,Ke),He&2&&ht!==(ht=je[1].t("Toggle sidebar")+"")&&ye(Pt,ht),He&2&&P!==(P=je[1].t("Delete chat")+"")&&ye(le,P),He&2&&$t!==($t=je[1].t("Show shortcuts")+"")&&ye(tl,$t),He&2&&ke!==(ke=je[1].t("Input commands")+"")&&ye(Se,ke),He&2&&Lt!==(Lt=je[1].t("Attach file")+"")&&ye(el,Lt),He&2&&z!==(z=je[1].t("Add custom prompt")+"")&&ye(Oe,z),He&2&&Mt!==(Mt=je[1].t("Select model")+"")&&ye(Ct,Mt)},d(je){je&&d(e),Nt=!1,Ae()}}}function Fa(s){let e,t,l;function n(o){s[4](o)}let r={$$slots:{default:[Ra]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.show=s[0]),e=new Hn({props:r}),be.push(()=>Me(e,"show",n)),{c(){ne(e.$$.fragment)},l(o){re(e.$$.fragment,o)},m(o,i){oe(e,o,i),l=!0},p(o,[i]){const a={};i&35&&(a.$$scope={dirty:i,ctx:o}),!t&&i&1&&(t=!0,a.show=o[0],Te(()=>t=!1)),e.$set(a)},i(o){l||(H(e.$$.fragment,o),l=!0)},o(o){L(e.$$.fragment,o),l=!1},d(o){ie(e,o)}}}function Wa(s,e,t){let l;const n=kt("i18n");we(s,n,a=>t(1,l=a));let{show:r=!1}=e;const o=()=>{t(0,r=!1)};function i(a){r=a,t(0,r)}return s.$$set=a=>{"show"in a&&t(0,r=a.show)},[r,l,n,o,i]}class Za extends tt{constructor(e){super(),lt(this,e,Wa,Fa,et,{show:0})}}function xa(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=E(e);t=ze(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",s[1]),u(e,"stroke","currentColor"),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&2&&u(e,"stroke-width",l[1]),n&1&&u(e,"class",l[0])},i:Ve,o:Ve,d(l){l&&d(e)}}}function qa(s,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:n="2"}=e;return s.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class Ja extends tt{constructor(e){super(),lt(this,e,qa,xa,et,{className:0,strokeWidth:1})}}function Ga(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var n=E(e);t=ze(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(t).forEach(d),n.forEach(d),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7Zm5.01 1H5v2.01h2.01V8Zm3 0H8v2.01h2.01V8Zm3 0H11v2.01h2.01V8Zm3 0H14v2.01h2.01V8Zm3 0H17v2.01h2.01V8Zm-12 3H5v2.01h2.01V11Zm3 0H8v2.01h2.01V11Zm3 0H11v2.01h2.01V11Zm3 0H14v2.01h2.01V11Zm3 0H17v2.01h2.01V11Zm-12 3H5v2.01h2.01V14ZM8 14l-.001 2 8.011.01V14H8Zm11.01 0H17v2.01h2.01V14Z"),u(t,"clip-rule","evenodd"),u(e,"aria-hidden","true"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",s[1]),u(e,"class",s[0])},m(l,n){B(l,e,n),m(e,t)},p(l,[n]){n&2&&u(e,"stroke-width",l[1]),n&1&&u(e,"class",l[0])},i:Ve,o:Ve,d(l){l&&d(e)}}}function Qa(s,e,t){let{className:l="size-4"}=e,{strokeWidth:n="2"}=e;return s.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class Ka extends tt{constructor(e){super(),lt(this,e,Qa,Ga,et,{className:0,strokeWidth:1})}}function Ya(s){let e;const t=s[5].default,l=zt(t,s,s[9],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&512)&&Ot(l,t,n,n[9],e?Ut(t,n[9],r,null):At(n[9]),null)},i(n){e||(H(l,n),e=!0)},o(n){L(l,n),e=!1},d(n){l&&l.d(n)}}}function Xa(s){let e,t,l,n=s[2].t("Documentation")+"",r,o;return e=new Ja({props:{className:"size-5"}}),{c(){ne(e.$$.fragment),t=R(),l=k("div"),r=pe(n),this.h()},l(i){re(e.$$.fragment,i),t=F(i),l=y(i,"DIV",{class:!0});var a=E(l);r=_e(a,n),a.forEach(d),this.h()},h(){u(l,"class","flex items-center")},m(i,a){oe(e,i,a),B(i,t,a),B(i,l,a),m(l,r),o=!0},p(i,a){(!o||a&4)&&n!==(n=i[2].t("Documentation")+"")&&ye(r,n)},i(i){o||(H(e.$$.fragment,i),o=!0)},o(i){L(e.$$.fragment,i),o=!1},d(i){i&&(d(t),d(l)),ie(e,i)}}}function $a(s){let e,t,l,n=s[2].t("Keyboard shortcuts")+"",r,o;return e=new Ka({props:{className:"size-5"}}),{c(){ne(e.$$.fragment),t=R(),l=k("div"),r=pe(n),this.h()},l(i){re(e.$$.fragment,i),t=F(i),l=y(i,"DIV",{class:!0});var a=E(l);r=_e(a,n),a.forEach(d),this.h()},h(){u(l,"class","flex items-center")},m(i,a){oe(e,i,a),B(i,t,a),B(i,l,a),m(l,r),o=!0},p(i,a){(!o||a&4)&&n!==(n=i[2].t("Keyboard shortcuts")+"")&&ye(r,n)},i(i){o||(H(e.$$.fragment,i),o=!0)},o(i){L(e.$$.fragment,i),o=!1},d(i){i&&(d(t),d(l)),ie(e,i)}}}function ec(s){let e,t,l,n;return e=new sl({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Xa]},$$scope:{ctx:s}}}),e.$on("click",s[6]),l=new sl({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[$a]},$$scope:{ctx:s}}}),l.$on("click",s[7]),{c(){ne(e.$$.fragment),t=R(),ne(l.$$.fragment)},l(r){re(e.$$.fragment,r),t=F(r),re(l.$$.fragment,r)},m(r,o){oe(e,r,o),B(r,t,o),oe(l,r,o),n=!0},p(r,o){const i={};o&516&&(i.$$scope={dirty:o,ctx:r}),e.$set(i);const a={};o&516&&(a.$$scope={dirty:o,ctx:r}),l.$set(a)},i(r){n||(H(e.$$.fragment,r),H(l.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),L(l.$$.fragment,r),n=!1},d(r){r&&d(t),ie(e,r),ie(l,r)}}}function tc(s){let e,t,l;return t=new Rl({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:4,side:"top",align:"end",transition:Dl,$$slots:{default:[ec]},$$scope:{ctx:s}}}),{c(){e=k("div"),ne(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{slot:!0});var r=E(e);re(t.$$.fragment,r),r.forEach(d),this.h()},h(){u(e,"slot","content")},m(n,r){B(n,e,r),oe(t,e,null),l=!0},p(n,r){const o={};r&517&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){l||(H(t.$$.fragment,n),l=!0)},o(n){L(t.$$.fragment,n),l=!1},d(n){n&&d(e),ie(t)}}}function lc(s){let e,t;return e=new Pl({props:{$$slots:{content:[tc],default:[Ya]},$$scope:{ctx:s}}}),e.$on("change",s[8]),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,[n]){const r={};n&517&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function sc(s,e,t){let l,{$$slots:n={},$$scope:r}=e;const o=kt("i18n");we(s,o,g=>t(2,l=g));let{showDocsHandler:i}=e,{showShortcutsHandler:a}=e,{onClose:f=()=>{}}=e;const c=()=>{window.open("https://docs.openwebui.com","_blank")},h=()=>{a()},v=g=>{g.detail===!1&&f()};return s.$$set=g=>{"showDocsHandler"in g&&t(4,i=g.showDocsHandler),"showShortcutsHandler"in g&&t(0,a=g.showShortcutsHandler),"onClose"in g&&t(1,f=g.onClose),"$$scope"in g&&t(9,r=g.$$scope)},[a,f,l,o,i,n,c,h,v,r]}class nc extends tt{constructor(e){super(),lt(this,e,sc,lc,et,{showDocsHandler:4,showShortcutsHandler:0,onClose:1})}}function rc(s){let e,t="?";return{c(){e=k("button"),e.textContent=t,this.h()},l(l){e=y(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-oq3opr"&&(e.textContent=t),this.h()},h(){u(e,"class","text-gray-600 dark:text-gray-300 bg-gray-300/20 size-5 flex items-center justify-center text-[0.7rem] rounded-full")},m(l,n){B(l,e,n)},p:Ve,d(l){l&&d(e)}}}function oc(s){let e,t;return e=new Zt({props:{content:s[1].t("Help"),placement:"left",$$slots:{default:[rc]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){oe(e,l,n),t=!0},p(l,n){const r={};n&2&&(r.content=l[1].t("Help")),n&128&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function ic(s){let e,t,l,n,r,o,i,a,f,c;n=new nc({props:{showDocsHandler:s[4],showShortcutsHandler:s[5],$$slots:{default:[oc]},$$scope:{ctx:s}}});function h(g){s[6](g)}let v={};return s[0]!==void 0&&(v.show=s[0]),o=new Za({props:v}),be.push(()=>Me(o,"show",h)),{c(){e=k("div"),t=k("button"),l=R(),ne(n.$$.fragment),r=R(),ne(o.$$.fragment),this.h()},l(g){e=y(g,"DIV",{class:!0});var b=E(e);t=y(b,"BUTTON",{id:!0,class:!0}),E(t).forEach(d),l=F(b),re(n.$$.fragment,b),b.forEach(d),r=F(g),re(o.$$.fragment,g),this.h()},h(){u(t,"id","show-shortcuts-button"),u(t,"class","hidden"),u(e,"class","hidden lg:flex fixed bottom-0 right-0 px-2 py-2 z-20")},m(g,b){B(g,e,b),m(e,t),m(e,l),oe(n,e,null),B(g,r,b),oe(o,g,b),a=!0,f||(c=fe(t,"click",s[3]),f=!0)},p(g,[b]){const _={};b&1&&(_.showDocsHandler=g[4]),b&1&&(_.showShortcutsHandler=g[5]),b&130&&(_.$$scope={dirty:b,ctx:g}),n.$set(_);const p={};!i&&b&1&&(i=!0,p.show=g[0],Te(()=>i=!1)),o.$set(p)},i(g){a||(H(n.$$.fragment,g),H(o.$$.fragment,g),a=!0)},o(g){L(n.$$.fragment,g),L(o.$$.fragment,g),a=!1},d(g){g&&(d(e),d(r)),ie(n),ie(o,g),f=!1,c()}}}function ac(s,e,t){let l;const n=kt("i18n");we(s,n,c=>t(1,l=c));let r=!1;const o=()=>{t(0,r=!r)},i=()=>{t(0,r=!r)},a=()=>{t(0,r=!r)};function f(c){r=c,t(0,r)}return[r,l,n,o,i,a,f]}class Qc extends tt{constructor(e){super(),lt(this,e,ac,ic,et,{})}}export{Gc as C,Qc as H};
//# sourceMappingURL=Help.6e7c69a1.js.map
